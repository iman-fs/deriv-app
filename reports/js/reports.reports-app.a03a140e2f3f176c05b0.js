(self.webpackChunk_deriv_reports=self.webpackChunk_deriv_reports||[]).push([["reports-app"],{"../../node_modules/lodash.debounce/index.js":(t,e,r)=>{var o=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,c=parseInt,s="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,u="object"==typeof self&&self&&self.Object===Object&&self,l=s||u||Function("return this")(),p=Object.prototype.toString,f=Math.max,h=Math.min,y=function(){return l.Date.now()};function d(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function b(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==p.call(t)}(t))return NaN;if(d(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=d(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var r=i.test(t);return r||a.test(t)?c(t.slice(2),r?2:8):n.test(t)?NaN:+t}t.exports=function(t,e,r){var o,n,i,a,c,s,u=0,l=!1,p=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function _(e){var r=o,i=n;return o=n=void 0,u=e,a=t.apply(i,r)}function m(t){return u=t,c=setTimeout(O,e),l?_(t):a}function v(t){var r=t-s;return void 0===s||r>=e||r<0||p&&t-u>=i}function O(){var t=y();if(v(t))return w(t);c=setTimeout(O,function(t){var r=e-(t-s);return p?h(r,i-(t-u)):r}(t))}function w(t){return c=void 0,g&&o?_(t):(o=n=void 0,a)}function j(){var t=y(),r=v(t);if(o=arguments,n=this,s=t,r){if(void 0===c)return m(s);if(p)return c=setTimeout(O,e),_(s)}return void 0===c&&(c=setTimeout(O,e)),a}return e=b(e)||0,d(r)&&(l=!!r.leading,i=(p="maxWait"in r)?f(b(r.maxWait)||0,e):i,g="trailing"in r?!!r.trailing:g),j.cancel=function(){void 0!==c&&clearTimeout(c),u=0,o=s=n=c=void 0},j.flush=function(){return void 0===c?a:w(y())},j}},"../../node_modules/prop-types/factoryWithThrowingShims.js":(t,e,r)=>{"use strict";var o=r("../../node_modules/prop-types/lib/ReactPropTypesSecret.js");function n(){}function i(){}i.resetWarningCache=n,t.exports=function(){function t(t,e,r,n,i,a){if(a!==o){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function e(){return t}t.isRequired=t;var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:n};return r.PropTypes=r,r}},"../../node_modules/prop-types/index.js":(t,e,r)=>{t.exports=r("../../node_modules/prop-types/factoryWithThrowingShims.js")()},"../../node_modules/prop-types/lib/ReactPropTypesSecret.js":t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"./src/Stores/connect.js":(t,e,r)=>{"use strict";r.d(e,{z1:()=>u,$j:()=>l});var o=r("mobx-react"),n=r("react");function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=n.createContext(null),u=function(t){var e=t.store,r=t.children;return n.createElement(s.Provider,{value:a(a({},e),{},{mobxStores:e})},r)},l=function(t){return function(e){return function(t,e){var r=function(r){var i=n.useContext(s),c=e;return function(t){return!("function"!=typeof t||!t.prototype||!t.prototype.isReactComponent)}(e)&&(c=function(t){return n.createElement(e,t)}),(0,o.useObserver)((function(){return c(a(a({},r),t(i,r)))}))};return r.displayName=e.name,r}(t,e)}}},"./src/_common/base/server_time.js":(t,e,r)=>{var o,n,i,a=r("./src/_common/utility.js").PromiseClass,c=(n=!1,i=new a,{init:function(t){n||(o=t,i.resolve(o.server_time),n=!0)},get:function(){return n&&o.server_time?o.server_time.clone():void 0},timePromise:function(){return n?Promise.resolve(o.server_time):i.promise}});t.exports=c},"./src/_common/utility.js":t=>{function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r,o=function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.promise=new Promise((function(t,r){e.reject=r,e.resolve=t}))}));t.exports={template:function(t,e){var r=e;return e&&!Array.isArray(e)&&(r=[e]),t.replace(/\[_(\d+)]/g,(function(t,e){return r[+e-1]}))},createElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement(t);return Object.keys(e).forEach((function(t){var o=e[t];"text"===t?r.textContent=o:"html"===t?r.html(o):r.setAttribute(t,o)})),r},getStaticHash:function(){return r=r||(document.querySelector('script[src*="main"]').getAttribute("src")||"").split(".")[1]},PromiseClass:o}},"./src/app.jsx":(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>tr});var o,n=r("../../node_modules/prop-types/index.js"),i=r.n(n),a=r("react"),c=r("mobx-react"),s=r("react-router"),u=r("react-router-dom"),l=r("@deriv/shared"),p=r("@deriv/components"),f=r("@deriv/translations"),h=a.lazy((function(){return r.e("404").then(r.bind(r,"./src/Modules/Page404/index.js"))})),y=(0,l.makeLazyLoader)((function(){return(0,l.moduleLoader)((function(){return r.e("reports-routes").then(r.bind(r,"./src/Containers/index.js"))}))}),(function(){return a.createElement(p.Loading,null)})),d={component:h,getTitle:function(){return(0,f.localize)("Error 404")}};const b=function(){return o||(o=[{path:l.routes.reports,component:y("Reports"),is_authenticated:!0,getTitle:function(){return(0,f.localize)("Reports")},icon_component:"IcReports",routes:[{path:l.routes.positions,component:y("OpenPositions"),getTitle:function(){return(0,f.localize)("Open positions")},icon_component:"IcOpenPositions",default:!0},{path:l.routes.profit,component:y("ProfitTable"),getTitle:function(){return(0,f.localize)("Profit table")},icon_component:"IcProfitTable"},{path:l.routes.statement,component:y("Statement"),getTitle:function(){return(0,f.localize)("Statement")},icon_component:"IcStatement"}]}]).push(d),o};var g=function t(e,r){var o;return r.some((function(r){var n;try{n=(0,s.matchPath)(e,r)}catch(t){if(/undefined/.test(t.message))return}return n?(o=r,!0):!!r.routes&&(o=t(e,r.routes))})),o},_=["active_class","to","children"];function m(){return m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},m.apply(this,arguments)}function v(){return v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},v.apply(this,arguments)}(function(t){var e=t.active_class,r=t.to,o=t.children,n=function(t,e){if(null==t)return{};var r,o,n=function(t,e){if(null==t)return{};var r,o,n={},i=Object.keys(t);for(o=0;o<i.length;o++)r=i[o],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}(t,_),i=(a.useContext(l.PlatformContext).is_appstore,function(t){return/^\//.test(t)?t:"/".concat(t||"")}(r)),c=g(i,b());if(!c)throw new Error("Route not found: ".concat(r));return r?a.createElement(u.NavLink,m({to:i,activeClassName:e||"active",exact:c.exact},n),o):a.createElement("a",n,o)}).propTypes={active_class:i().string,children:i().oneOfType([i().object,i().array,i().string]),to:i().string};const O=function(t){return a.createElement(u.Route,{exact:t.exact,path:t.path,render:function(e){var r,o=null;if(t.component===u.Redirect){var n=t.to;t.path===l.routes.index&&(n=e.location.pathname.toLowerCase().replace(t.path,"")),o=a.createElement(u.Redirect,{to:n})}else if(!t.is_authenticated||t.is_logging_in||t.is_logged_in){var i=t.routes?t.routes.find((function(t){return t.default})):{},c=!(0,l.isEmptyObject)(i),s=(0,l.removeBranchName)(location.pathname);o=a.createElement(a.Fragment,null,c&&s===t.path&&a.createElement(u.Redirect,{to:i.path}),a.createElement(t.component,v({},e,{routes:t.routes})))}else(0,l.redirectToLogin)(t.is_logged_in,(0,f.getLanguage)());var p=(null===(r=t.getTitle)||void 0===r?void 0:r.call(t))||"";return document.title="".concat(p," | ").concat(l.default_title),o}})};function w(){return w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},w.apply(this,arguments)}const j=function(t){a.useContext(l.PlatformContext).is_appstore;return a.createElement(a.Suspense,{fallback:function(){return a.createElement("div",null,a.createElement(f.Localize,{i18n_default_text:"Loading..."}))}},a.createElement(u.Switch,null,b().map((function(e){return a.createElement(O,w({key:e.path},e,t))}))))};var S=r("./src/Stores/connect.js"),P=function(t){var e=t.header,r=t.message,o=t.is_dialog,n=t.redirect_label,i=t.redirectOnClick,c=t.should_show_refresh,s=void 0===c||c?(0,f.localize)("Please refresh this page to continue."):"";return o?a.createElement(p.Dialog,{title:e||(0,f.localize)("There was an error"),is_visible:!0,confirm_button_text:n||(0,f.localize)("Ok"),onConfirm:i||function(){return location.reload()}},r||(0,f.localize)("Sorry, an error occured while processing your request.")):a.createElement(p.PageError,{header:e||(0,f.localize)("Somethingâ€™s not right"),messages:r?[r,s]:[(0,f.localize)("Sorry, an error occured while processing your request."),s],redirect_urls:[l.routes.trade],redirect_labels:[n||(0,f.localize)("Refresh")],buttonOnClick:i||function(){return location.reload()}})};P.propTypes={header:i().string,is_dialog:i().bool,message:i().oneOfType([i().node,i().string,i().object]),redirect_label:i().string,redirectOnClick:i().func,should_show_refresh:i().bool,type:i().string};const k=P;var D=function(t){return t.has_error?a.createElement(k,t.error):a.createElement(j,{is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,passthrough:t.passthrough})};D.propTypes={error:c.PropTypes.objectOrObservableObject,has_error:i().bool,is_logged_in:i().bool,is_logging_in:i().bool,is_virtual:i().bool,passthrough:i().object};const E=(0,s.withRouter)((0,S.$j)((function(t){var e=t.client,r=t.common;return{is_logged_in:e.is_logged_in,is_logging_in:e.is_logging_in,error:r.error,has_error:r.has_error}}))(D));var x=r("mobx"),A=r("../../node_modules/lodash.debounce/index.js"),T=r.n(A);function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){z(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function z(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var N=function(t,e){var r=(0,l.toMoment)().startOf("day").unix();return e&&r>e?e:(0,l.epochToMoment)(r).add(1,"d").subtract(1,"s").unix()},L=function(t,e,r,o){return(0,l.toMoment)().startOf("day").unix()>o?r:t&&e?e:r},I=function(t,e,r,o){return(0,l.toMoment)().startOf("day").unix()>o?!!t||e:e?r||t:!!t||!1};const M=function(t,e,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return R(R({},I(t,o,r,e)&&{date_from:L(o,r,t,e)}),(e||o)&&{date_to:N(0,e)})};function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){H(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function H(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var W=r("./src/_common/utility.js");function V(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const U=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}var e,r;return e=t,(r=[{key:"add",value:function(t,e){this.has(t)||(this.errors[t]=[]),-1===this.errors[t].indexOf(e)&&this.errors[t].push(e)}},{key:"all",value:function(){return this.errors}},{key:"first",value:function(t){return this.has(t)?this.errors[t][0]:null}},{key:"get",value:function(t){return this.has(t)?this.errors[t]:[]}},{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.errors,t)}}])&&V(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const Y=function(){function t(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;G(this,t),this.input=e,this.rules=r,this.store=o,this.errors=new U,this.error_count=0}var e,r,o;return e=t,o=[{key:"getRuleObject",value:function(t){var e="string"==typeof t,r={name:e?t:t[0],options:e?{}:t[1]||{}};return r.validator="custom"===r.name?t[1].func:(0,l.getPreBuildDVRs)()[r.name].func,r}}],(r=[{key:"addFailure",value:function(t,e,r){var o=r||e.options.message||(0,l.getPreBuildDVRs)()[e.name].message();"length"===e.name?o=(0,W.template)(o,[e.options.min===e.options.max?e.options.min:"".concat(e.options.min,"-").concat(e.options.max)]):"min"===e.name?o=(0,W.template)(o,[e.options.min]):"not_equal"===e.name&&(o=(0,W.template)(o,[e.options.name1,e.options.name2])),this.errors.add(t,o),this.error_count++}},{key:"check",value:function(){var e=this;return Object.keys(this.input).forEach((function(r){Object.prototype.hasOwnProperty.call(e.rules,r)&&e.rules[r].forEach((function(o){var n=t.getRuleObject(o);if((n.validator||"function"==typeof n.validator)&&(!n.options.condition||n.options.condition(e.store))&&(""!==e.input[r]||"req"===n.name)){var i,a;if("number"===n.name){var c=n.validator(e.input[r],n.options,e.store,e.input);i=c.is_ok,a=c.message}else i=n.validator(e.input[r],n.options,e.store,e.input);i||e.addFailure(r,n,a)}}))})),!this.error_count}},{key:"isPassed",value:function(){return this.check()}}])&&q(e.prototype,r),o&&q(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();var $,J,K,Q,X,Z,tt,et,rt,ot,nt,it,at,ct,st,ut,lt,pt,ft,ht,yt,dt;function bt(t,e,r,o,n,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(o,n)}function gt(t){return function(){var e=this,r=arguments;return new Promise((function(o,n){var i=t.apply(e,r);function a(t){bt(i,o,n,a,c,"next",t)}function c(t){bt(i,o,n,a,c,"throw",t)}a(void 0)}))}}function _t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function mt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(r),!0).forEach((function(e){vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function vt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ot(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jt(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function St(t,e,r,o,n){var i={};return Object.keys(o).forEach((function(t){i[t]=o[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var Pt,kt,Dt,Et,xt,At,Tt,Ct,Rt,zt,Nt,Lt,It,Mt,Ft,Bt,Ht,Wt,Vt,Ut=($=x.action.bound,J=x.action.bound,K=x.action.bound,Q=x.action.bound,X=x.action.bound,Z=x.action.bound,tt=x.action.bound,et=x.action.bound,rt=x.action.bound,ot=x.action.bound,nt=x.action.bound,it=x.action.bound,at=x.action.bound,ct=x.action.bound,st=x.action.bound,ut=x.action.bound,dt=yt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,t),Ot(this,"validation_errors",pt,this),Ot(this,"validation_rules",ft,this),this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,Ot(this,"partial_fetch_time",ht,this);var r=e.root_store,o=e.local_storage_properties,n=e.session_storage_properties,i=e.validation_rules,a=e.store_name;Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0});var c=o&&o.length||n&&n.length;if(c){if(!a)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:a,enumerable:!1,writable:!1})}this.root_store=r,this.local_storage_properties=o||[],this.session_storage_properties=n||[],this.setValidationRules(i),this.setupReactionForLocalStorage(),this.setupReactionForSessionStorage(),this.retrieveFromStorage()}var e,r;return e=t,r=[{key:"getSnapshot",value:function(t){var e=(0,x.toJS)(this);return(0,l.isEmptyObject)(this.root_store)||(e.root_store=this.root_store),t&&t.length&&(e=t.reduce((function(t,r){return Object.assign(t,vt({},r,e[r]))}),{})),e}},{key:"setupReactionForLocalStorage",value:function(){var e=this;this.local_storage_properties.length&&(0,x.reaction)((function(){return e.local_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.local_storage_properties,t.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var e=this;this.session_storage_properties.length&&(0,x.reaction)((function(){return e.session_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.session_storage_properties,t.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(e,r){var o=JSON.stringify(this.getSnapshot(e),(function(t,e){if(null!==e)return e}));r===t.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,o):r===t.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,o)}},{key:"retrieveFromStorage",value:function(){var t=this,e=JSON.parse(localStorage.getItem(this.store_name,{})),r=JSON.parse(sessionStorage.getItem(this.store_name,{})),o=mt(mt({},e),r);Object.keys(o).forEach((function(e){return t[e]=o[e]}))}},{key:"setValidationErrorMessages",value:function(t,e){var r=this;this.validation_errors[t]&&!r.validation_errors[t].filter((function(t){return!e.includes(t)})).concat(e.filter((function(e){return!r.validation_errors[t].includes(e)}))).length||(this.validation_errors[t]=e)}},{key:"setValidationRules",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(r){t.addRule(r,e[r])}))}},{key:"addRule",value:function(t,e){var r=this;this.validation_rules[t]=e,(0,x.intercept)(this,t,(function(e){return r.validateProperty(t,e.newValue),e}))}},{key:"validateProperty",value:function(t,e){var r=this,o=this.validation_rules[t].trigger,n=vt({},t,void 0!==e?e:this[t]),i=vt({},t,this.validation_rules[t].rules||[]);o&&Object.hasOwnProperty.call(this,o)&&(n[o]=this[o],i[o]=this.validation_rules[o].rules||[]);var a=new Y(n,i,this);a.isPassed(),Object.keys(n).forEach((function(t){r.setValidationErrorMessages(t,a.errors.get(t))}))}},{key:"validateAllProperties",value:function(){var t=this,e=Object.keys(this.validation_rules),r=Object.keys(this.validation_errors);e.forEach((function(e){t.validateProperty(e,t[e])})),r.forEach((function(r){e.includes(r)||delete t.validation_errors[r]}))}},{key:"onSwitchAccount",value:function(t){var e=this;t&&(this.switch_account_listener=t,this.switchAccountDisposer=(0,x.when)((function(){return e.root_store.client.switch_broadcast}),(function(){try{var t=e.switch_account_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Switching account listeners are required to return a promise.");t.then((function(){e.root_store.client.switchEndSignal(),e.onSwitchAccount(e.switch_account_listener)}))}catch(t){(0,l.isProduction)()||console.error(t)}})))}},{key:"onPreSwitchAccount",value:function(t){var e=this;t&&(this.pre_switch_account_listener=t,this.preSwitchAccountDisposer=(0,x.when)((function(){return e.root_store.client.pre_switch_broadcast}),(function(){try{var t=e.pre_switch_account_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Pre-switch account listeners are required to return a promise.");t.then((function(){e.root_store.client.setPreSwitchAccount(!1),e.onPreSwitchAccount(e.pre_switch_account_listener)}))}catch(t){(0,l.isProduction)()||console.error(t)}})))}},{key:"onLogout",value:function(t){var e=this;this.logoutDisposer=(0,x.when)((function(){return e.root_store.client.has_logged_out}),gt(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(r=e.logout_listener())||!r.then||"function"!=typeof r.then){t.next=6;break}r.then((function(){e.root_store.client.setLogout(!1),e.onLogout(e.logout_listener)})),t.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,l.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.logout_listener=t}},{key:"onClientInit",value:function(t){var e=this;this.clientInitDisposer=(0,x.when)((function(){return e.root_store.client.initialized_broadcast}),gt(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(r=e.client_init_listener())||!r.then||"function"!=typeof r.then){t.next=6;break}r.then((function(){e.root_store.client.setInitialized(!1),e.onClientInit(e.client_init_listener)})),t.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,l.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.client_init_listener=t}},{key:"onNetworkStatusChange",value:function(t){var e=this;this.networkStatusChangeDisposer=(0,x.reaction)((function(){return e.root_store.common.is_network_online}),(function(t){try{e.network_status_change_listener(t)}catch(t){(0,l.isProduction)()||console.error(t)}})),this.network_status_change_listener=t}},{key:"onThemeChange",value:function(t){var e=this;this.themeChangeDisposer=(0,x.reaction)((function(){return e.root_store.ui.is_dark_mode_on}),(function(t){try{e.theme_change_listener(t)}catch(t){(0,l.isProduction)()||console.error(t)}})),this.theme_change_listener=t}},{key:"onRealAccountSignupEnd",value:function(t){var e=this;this.realAccountSignupEndedDisposer=(0,x.when)((function(){return e.root_store.ui.has_real_account_signup_ended}),(function(){try{var t=e.real_account_signup_ended_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Real account signup listeners are required to return a promise.");t.then((function(){e.root_store.ui.setRealAccountSignupEnd(!1),e.onRealAccountSignupEnd(e.real_account_signup_ended_listener)}))}catch(t){(0,l.isProduction)()||console.error(t)}})),this.real_account_signup_ended_listener=t}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(t){if(this.root_store.client.loginid!==t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];r.forEach((function(t){return t()})),this.partial_fetch_time=!1}}}],r&&jt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),yt.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")}),pt=St((lt=dt).prototype,"validation_errors",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ft=St(lt.prototype,"validation_rules",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ht=St(lt.prototype,"partial_fetch_time",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),St(lt.prototype,"retrieveFromStorage",[x.action],Object.getOwnPropertyDescriptor(lt.prototype,"retrieveFromStorage"),lt.prototype),St(lt.prototype,"setValidationErrorMessages",[x.action],Object.getOwnPropertyDescriptor(lt.prototype,"setValidationErrorMessages"),lt.prototype),St(lt.prototype,"setValidationRules",[x.action],Object.getOwnPropertyDescriptor(lt.prototype,"setValidationRules"),lt.prototype),St(lt.prototype,"addRule",[x.action],Object.getOwnPropertyDescriptor(lt.prototype,"addRule"),lt.prototype),St(lt.prototype,"validateProperty",[x.action],Object.getOwnPropertyDescriptor(lt.prototype,"validateProperty"),lt.prototype),St(lt.prototype,"validateAllProperties",[x.action],Object.getOwnPropertyDescriptor(lt.prototype,"validateAllProperties"),lt.prototype),St(lt.prototype,"onSwitchAccount",[$],Object.getOwnPropertyDescriptor(lt.prototype,"onSwitchAccount"),lt.prototype),St(lt.prototype,"onPreSwitchAccount",[J],Object.getOwnPropertyDescriptor(lt.prototype,"onPreSwitchAccount"),lt.prototype),St(lt.prototype,"onLogout",[K],Object.getOwnPropertyDescriptor(lt.prototype,"onLogout"),lt.prototype),St(lt.prototype,"onClientInit",[Q],Object.getOwnPropertyDescriptor(lt.prototype,"onClientInit"),lt.prototype),St(lt.prototype,"onNetworkStatusChange",[X],Object.getOwnPropertyDescriptor(lt.prototype,"onNetworkStatusChange"),lt.prototype),St(lt.prototype,"onThemeChange",[Z],Object.getOwnPropertyDescriptor(lt.prototype,"onThemeChange"),lt.prototype),St(lt.prototype,"onRealAccountSignupEnd",[tt],Object.getOwnPropertyDescriptor(lt.prototype,"onRealAccountSignupEnd"),lt.prototype),St(lt.prototype,"disposePreSwitchAccount",[et],Object.getOwnPropertyDescriptor(lt.prototype,"disposePreSwitchAccount"),lt.prototype),St(lt.prototype,"disposeSwitchAccount",[rt],Object.getOwnPropertyDescriptor(lt.prototype,"disposeSwitchAccount"),lt.prototype),St(lt.prototype,"disposeLogout",[ot],Object.getOwnPropertyDescriptor(lt.prototype,"disposeLogout"),lt.prototype),St(lt.prototype,"disposeClientInit",[nt],Object.getOwnPropertyDescriptor(lt.prototype,"disposeClientInit"),lt.prototype),St(lt.prototype,"disposeNetworkStatusChange",[it],Object.getOwnPropertyDescriptor(lt.prototype,"disposeNetworkStatusChange"),lt.prototype),St(lt.prototype,"disposeThemeChange",[at],Object.getOwnPropertyDescriptor(lt.prototype,"disposeThemeChange"),lt.prototype),St(lt.prototype,"disposeRealAccountSignupEnd",[ct],Object.getOwnPropertyDescriptor(lt.prototype,"disposeRealAccountSignupEnd"),lt.prototype),St(lt.prototype,"onUnmount",[st],Object.getOwnPropertyDescriptor(lt.prototype,"onUnmount"),lt.prototype),St(lt.prototype,"assertHasValidCache",[ut],Object.getOwnPropertyDescriptor(lt.prototype,"assertHasValidCache"),lt.prototype),lt);function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function qt(t){return function(t){if(Array.isArray(t))return Yt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Yt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function $t(t,e,r,o,n,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(o,n)}function Jt(t){return function(){var e=this,r=arguments;return new Promise((function(o,n){var i=t.apply(e,r);function a(t){$t(i,o,n,a,c,"next",t)}function c(t){$t(i,o,n,a,c,"throw",t)}a(void 0)}))}}function Kt(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Qt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xt(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Zt(t,e){return Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Zt(t,e)}function te(t,e){if(e&&("object"===Gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ee(t)}function ee(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function re(t){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},re(t)}function oe(t,e,r,o,n){var i={};return Object.keys(o).forEach((function(t){i[t]=o[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var ne,ie,ae,ce,se,ue,le,pe,fe,he,ye,de,be,ge,_e,me,ve,Oe,we,je,Se,Pe,ke,De=(Pt=x.action.bound,kt=x.action.bound,Dt=x.action.bound,Et=x.action.bound,xt=x.action.bound,At=x.action.bound,Tt=x.action.bound,Ct=x.action.bound,Rt=x.action.bound,zt=x.action.bound,Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zt(t,e)}(a,t);var e,r,o,n,i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=re(t);if(e){var n=re(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return te(this,r)}}(a);function a(){var t;Qt(this,a);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return Kt(t=i.call.apply(i,[this].concat(r)),"data",Lt,ee(t)),Kt(t,"date_from",It,ee(t)),Kt(t,"date_to",Mt,ee(t)),Kt(t,"error",Ft,ee(t)),Kt(t,"has_loaded_all",Bt,ee(t)),Kt(t,"is_loading",Ht,ee(t)),Kt(t,"filtered_date_range",Wt,ee(t)),Kt(t,"client_loginid",Vt,ee(t)),t.fetchOnScroll=T()((function(e){e<1500&&t.fetchNextBatch()}),150),t}return e=a,r=[{key:"total_profit",get:function(){return this.data.reduce((function(t,e){var r=Number(parseFloat(e.buy_price));return t+(Number(parseFloat(e.sell_price))-r)}),0)}},{key:"is_empty",get:function(){return!this.is_loading&&0===this.data.length}},{key:"has_selected_date",get:function(){return!(!this.date_from&&!this.date_to)}},{key:"shouldFetchNextBatch",value:function(){return!this.has_loaded_all&&!this.is_loading}},{key:"fetchNextBatch",value:(n=Jt(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shouldFetchNextBatch()){t.next=2;break}return t.abrupt("return");case 2:return this.is_loading=!0,t.next=5,l.WS.profitTable(50,this.data.length,M(this.date_from,this.date_to,0,!1));case 5:e=t.sent,this.profitTableResponseHandler(e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"profitTableResponseHandler",value:function(t){var e=this;if("error"in t)this.error=t.error.message;else{var r=t.profit_table.transactions.map((function(t){return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o="DD MMM YYYY HH:mm:ss",n="".concat((0,l.toMoment)(+t.purchase_time).format(o)),i=t.purchase_time,a="".concat((0,l.toMoment)(+t.sell_time).format(o)),c=parseFloat(t.payout),s=parseFloat(t.sell_price),u=parseFloat(t.buy_price),p=(0,l.formatMoney)(e,Number(s-u),!0),f=(0,l.getSymbolDisplayName)(r,(0,l.getMarketInformation)(t.shortcode).underlying);return B(B({},t),{payout:c,sell_price:s,buy_price:u,profit_loss:p,sell_time:a,purchase_time:n,display_name:f,purchase_time_unix:i})}(t,e.root_store.client.currency,e.root_store.active_symbols.active_symbols)}));this.data=[].concat(qt(this.data),qt(r)),this.has_loaded_all=r.length<50,this.is_loading=!1}}},{key:"handleScroll",value:function(t){var e=t.target,r=e.scrollTop,o=e.scrollHeight-(r+e.clientHeight);this.fetchOnScroll(o)}},{key:"networkStatusChangeListener",value:function(t){this.is_loading=!t}},{key:"onMount",value:(o=Jt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.assertHasValidCache(this.client_loginid,this.clearDateFilter,l.WS.forgetAll.bind(null,"proposal")),this.client_loginid=this.root_store.client.loginid,this.onSwitchAccount(this.accountSwitcherListener),this.onNetworkStatusChange(this.networkStatusChangeListener),t.next=6,l.WS.wait("authorize");case 6:this.clearTable(),this.fetchNextBatch();case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),l.WS.forgetAll("proposal")}},{key:"totals",get:function(){var t=0;return this.data.forEach((function(e){t+=parseFloat(e.profit_loss.replace(/,/g,""))})),{profit_loss:t.toString()}}},{key:"accountSwitcherListener",value:function(){var t=this;return new Promise((function(e){return t.clearTable(),t.clearDateFilter(),e(t.fetchNextBatch())}))}},{key:"clearTable",value:function(){this.data=[],this.has_loaded_all=!1,this.is_loading=!1}},{key:"clearDateFilter",value:function(){this.date_from=null,this.date_to=(0,l.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix()}},{key:"handleDateChange",value:function(t){var e,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.date_range;this.filtered_date_range=n,this.date_from=null!==(e=null==t?void 0:t.from)&&void 0!==e?e:t.is_batch?null:this.date_from,this.date_to=null!==(r=null==t?void 0:t.to)&&void 0!==r?r:this.date_to,this.clearTable(),this.fetchNextBatch()}}],r&&Xt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ut),Lt=oe(Nt.prototype,"data",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),It=oe(Nt.prototype,"date_from",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=oe(Nt.prototype,"date_to",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,l.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix()}}),Ft=oe(Nt.prototype,"error",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Bt=oe(Nt.prototype,"has_loaded_all",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ht=oe(Nt.prototype,"is_loading",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wt=oe(Nt.prototype,"filtered_date_range",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vt=oe(Nt.prototype,"client_loginid",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),oe(Nt.prototype,"total_profit",[x.computed],Object.getOwnPropertyDescriptor(Nt.prototype,"total_profit"),Nt.prototype),oe(Nt.prototype,"is_empty",[x.computed],Object.getOwnPropertyDescriptor(Nt.prototype,"is_empty"),Nt.prototype),oe(Nt.prototype,"has_selected_date",[x.computed],Object.getOwnPropertyDescriptor(Nt.prototype,"has_selected_date"),Nt.prototype),oe(Nt.prototype,"fetchNextBatch",[Pt],Object.getOwnPropertyDescriptor(Nt.prototype,"fetchNextBatch"),Nt.prototype),oe(Nt.prototype,"profitTableResponseHandler",[kt],Object.getOwnPropertyDescriptor(Nt.prototype,"profitTableResponseHandler"),Nt.prototype),oe(Nt.prototype,"handleScroll",[Dt],Object.getOwnPropertyDescriptor(Nt.prototype,"handleScroll"),Nt.prototype),oe(Nt.prototype,"networkStatusChangeListener",[Et],Object.getOwnPropertyDescriptor(Nt.prototype,"networkStatusChangeListener"),Nt.prototype),oe(Nt.prototype,"onMount",[xt],Object.getOwnPropertyDescriptor(Nt.prototype,"onMount"),Nt.prototype),oe(Nt.prototype,"onUnmount",[At],Object.getOwnPropertyDescriptor(Nt.prototype,"onUnmount"),Nt.prototype),oe(Nt.prototype,"totals",[x.computed],Object.getOwnPropertyDescriptor(Nt.prototype,"totals"),Nt.prototype),oe(Nt.prototype,"accountSwitcherListener",[Tt],Object.getOwnPropertyDescriptor(Nt.prototype,"accountSwitcherListener"),Nt.prototype),oe(Nt.prototype,"clearTable",[Ct],Object.getOwnPropertyDescriptor(Nt.prototype,"clearTable"),Nt.prototype),oe(Nt.prototype,"clearDateFilter",[Rt],Object.getOwnPropertyDescriptor(Nt.prototype,"clearDateFilter"),Nt.prototype),oe(Nt.prototype,"handleDateChange",[zt],Object.getOwnPropertyDescriptor(Nt.prototype,"handleDateChange"),Nt.prototype),Nt);function Ee(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function xe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(r),!0).forEach((function(e){Ae(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ae(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Te(t){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(t)}function Ce(t){return function(t){if(Array.isArray(t))return Re(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Re(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Re(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function ze(t,e,r,o,n,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(o,n)}function Ne(t){return function(){var e=this,r=arguments;return new Promise((function(o,n){var i=t.apply(e,r);function a(t){ze(i,o,n,a,c,"next",t)}function c(t){ze(i,o,n,a,c,"throw",t)}a(void 0)}))}}function Le(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Me(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Fe(t,e){return Fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Fe(t,e)}function Be(t,e){if(e&&("object"===Te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return He(t)}function He(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function We(t){return We=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},We(t)}function Ve(t,e,r,o,n){var i={};return Object.keys(o).forEach((function(t){i[t]=o[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(t,e,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}var Ue=(ne=x.action.bound,ie=x.action.bound,ae=x.action.bound,ce=x.action.bound,se=x.action.bound,ue=x.action.bound,le=x.action.bound,pe=x.action.bound,fe=x.action.bound,he=x.action.bound,ye=x.action.bound,de=x.action.bound,be=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fe(t,e)}(c,t);var e,r,o,n,i,a=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=We(t);if(e){var n=We(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Be(this,r)}}(c);function c(){var t;Ie(this,c);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return Le(t=a.call.apply(a,[this].concat(r)),"data",ge,He(t)),Le(t,"is_loading",_e,He(t)),Le(t,"has_loaded_all",me,He(t)),Le(t,"date_from",ve,He(t)),Le(t,"date_to",Oe,He(t)),Le(t,"error",we,He(t)),Le(t,"action_type",je,He(t)),Le(t,"filtered_date_range",Se,He(t)),Le(t,"client_loginid",Pe,He(t)),Le(t,"account_statistics",ke,He(t)),t.fetchOnScroll=T()((function(e){e<1500&&t.fetchNextBatch()}),150),t}return e=c,r=[{key:"is_empty",get:function(){return!this.is_loading&&0===this.data.length}},{key:"has_selected_date",get:function(){return!(!this.date_from&&!this.date_to)}},{key:"clearTable",value:function(){this.data=[],this.has_loaded_all=!1,this.is_loading=!1}},{key:"clearDateFilter",value:function(){this.date_from=null,this.date_to=(0,l.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix(),this.partial_fetch_time=0}},{key:"shouldFetchNextBatch",value:function(t){if(!t&&(this.has_loaded_all||this.is_loading))return!1;var e=(0,l.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix();return!(this.date_to<e)||!t&&this.partial_fetch_time}},{key:"fetchNextBatch",value:(i=Ne(regeneratorRuntime.mark((function t(){var e,r,o,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]&&n[0],this.shouldFetchNextBatch(e)){t.next=3;break}return t.abrupt("return");case 3:return this.is_loading=!0,r=M(this.date_from,this.date_to,this.partial_fetch_time,e),"all"!==this.action_type&&(r.action_type=this.action_type),t.next=8,l.WS.statement(100,e?void 0:this.data.length,r);case 8:o=t.sent,this.statementHandler(o,e);case 10:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"statementHandler",value:function(t,e){var r=this;if("error"in t)this.error=t.error.message;else{var o=t.statement.transactions.map((function(t){return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o="DD MMM YYYY HH:mm:ss",n=(0,l.toMoment)(t.transaction_time).format(o),i=parseFloat(t.payout),a=parseFloat(t.amount),c=parseFloat(t.balance_after),s=!0,u=["buy","sell"].includes(t.action_type)?t.shortcode:null,p=u?(0,l.getSymbolDisplayName)(r,(0,l.getMarketInformation)(u).underlying):"";return xe({action:(0,f.localize)((0,l.toTitleCase)(t.action_type)),date:n,display_name:p,refid:t.transaction_id,payout:isNaN(i)?"-":(0,l.formatMoney)(e,i,s),amount:isNaN(a)?"-":(0,l.formatMoney)(e,a,s),balance:isNaN(c)?"-":(0,l.formatMoney)(e,c,s),desc:t.longcode.replace(/\n/g,"<br />"),id:t.contract_id,app_id:t.app_id,shortcode:u,action_type:t.action_type,purchase_time:t.purchase_time,transaction_time:t.transaction_time},t.withdrawal_details&&{withdrawal_details:t.withdrawal_details,longcode:t.longcode})}(t,r.root_store.client.currency,r.root_store.active_symbols.active_symbols)}));this.data=e?[].concat(Ce(o),Ce(this.data)):[].concat(Ce(this.data),Ce(o)),this.has_loaded_all=!e&&o.length<100,this.is_loading=!1,o.length>0&&(this.partial_fetch_time=(0,l.toMoment)().unix())}}},{key:"handleDateChange",value:function(t){var e,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.date_range;this.filtered_date_range=n,this.date_from=null!==(e=null==t?void 0:t.from)&&void 0!==e?e:t.is_batch?null:this.date_from,this.date_to=null!==(r=null==t?void 0:t.to)&&void 0!==r?r:this.date_to,this.clearTable(),this.fetchNextBatch()}},{key:"handleFilterChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action_type=t,this.clearTable(),this.fetchNextBatch()}},{key:"handleScroll",value:function(t){var e=t.target,r=e.scrollTop,o=e.scrollHeight-(r+e.clientHeight);this.fetchOnScroll(o)}},{key:"loadAccountStatistics",value:(n=Ne(regeneratorRuntime.mark((function t(){var e,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.account_statistics={},!(e=this.root_store.client).standpoint.iom&&!e.standpoint.malta){t.next=8;break}return t.next=6,l.WS.accountStatistics();case 6:r=t.sent,(0,x.runInAction)((function(){r.error?o.account_statistics={}:o.account_statistics=r.account_statistics}));case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"accountSwitcherListener",value:function(){var t=this;return new Promise((function(e){return t.clearTable(),t.clearDateFilter(),t.loadAccountStatistics(),e(t.fetchNextBatch())}))}},{key:"networkStatusChangeListener",value:function(t){this.is_loading=!t}},{key:"onMount",value:(o=Ne(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.assertHasValidCache(this.client_loginid,this.clearDateFilter,this.clearTable,l.WS.forgetAll.bind(null,"proposal")),this.client_loginid=this.root_store.client.loginid,this.onSwitchAccount(this.accountSwitcherListener),this.onNetworkStatusChange(this.networkStatusChangeListener),t.next=6,l.WS.wait("authorize");case 6:this.fetchNextBatch(!0),this.loadAccountStatistics();case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),l.WS.forgetAll("proposal")}}],r&&Me(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(Ut),ge=Ve(be.prototype,"data",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_e=Ve(be.prototype,"is_loading",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),me=Ve(be.prototype,"has_loaded_all",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ve=Ve(be.prototype,"date_from",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=Ve(be.prototype,"date_to",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,l.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix()}}),we=Ve(be.prototype,"error",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),je=Ve(be.prototype,"action_type",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"all"}}),Se=Ve(be.prototype,"filtered_date_range",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=Ve(be.prototype,"client_loginid",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ke=Ve(be.prototype,"account_statistics",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ve(be.prototype,"is_empty",[x.computed],Object.getOwnPropertyDescriptor(be.prototype,"is_empty"),be.prototype),Ve(be.prototype,"has_selected_date",[x.computed],Object.getOwnPropertyDescriptor(be.prototype,"has_selected_date"),be.prototype),Ve(be.prototype,"clearTable",[ne],Object.getOwnPropertyDescriptor(be.prototype,"clearTable"),be.prototype),Ve(be.prototype,"clearDateFilter",[ie],Object.getOwnPropertyDescriptor(be.prototype,"clearDateFilter"),be.prototype),Ve(be.prototype,"fetchNextBatch",[ae],Object.getOwnPropertyDescriptor(be.prototype,"fetchNextBatch"),be.prototype),Ve(be.prototype,"statementHandler",[ce],Object.getOwnPropertyDescriptor(be.prototype,"statementHandler"),be.prototype),Ve(be.prototype,"handleDateChange",[se],Object.getOwnPropertyDescriptor(be.prototype,"handleDateChange"),be.prototype),Ve(be.prototype,"handleFilterChange",[ue],Object.getOwnPropertyDescriptor(be.prototype,"handleFilterChange"),be.prototype),Ve(be.prototype,"handleScroll",[le],Object.getOwnPropertyDescriptor(be.prototype,"handleScroll"),be.prototype),Ve(be.prototype,"loadAccountStatistics",[pe],Object.getOwnPropertyDescriptor(be.prototype,"loadAccountStatistics"),be.prototype),Ve(be.prototype,"accountSwitcherListener",[fe],Object.getOwnPropertyDescriptor(be.prototype,"accountSwitcherListener"),be.prototype),Ve(be.prototype,"networkStatusChangeListener",[he],Object.getOwnPropertyDescriptor(be.prototype,"networkStatusChangeListener"),be.prototype),Ve(be.prototype,"onMount",[ye],Object.getOwnPropertyDescriptor(be.prototype,"onMount"),be.prototype),Ve(be.prototype,"onUnmount",[de],Object.getOwnPropertyDescriptor(be.prototype,"onUnmount"),be.prototype),be);function Ge(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var qe=function(t,e,r){return e&&Ge(t.prototype,e),r&&Ge(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.profit_table=new De({root_store:e}),this.statement=new Ue({root_store:e})}));function Ye(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var $e,Je=function(t,e,r){return e&&Ye(t.prototype,e),r&&Ye(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.client=e.client,this.common=e.common,this.modules=new qe(this,e),this.ui=e.ui,this.gtm=e.gtm,this.rudderstack=e.rudderstack,this.pushwoosh=e.pushwoosh,this.notifications=e.notifications,this.contract_replay=e.contract_replay,this.contract_trade=e.contract_trade,this.portfolio=e.portfolio,this.chart_barrier_store=e.chart_barrier_store,this.active_symbols=e.active_symbols})),Ke=r("./src/_common/base/server_time.js"),Qe=r.n(Ke);(0,x.configure)({enforceActions:"observed"});function Xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}var Ze=function(t){var e=t.passthrough,r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var o,n,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(o=r.next()).done)&&(i.push(o.value),!e||i.length!==e);a=!0);}catch(t){c=!0,n=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw n}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Xe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xe(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(a.useState(function(t,e){return $e||(Qe().init(t.common),(0,l.setWebsocket)(e),$e=new Je(t))}(e.root_store,e.WS)),1)[0];return a.createElement(S.z1,{store:r},a.createElement(a.Fragment,null,a.createElement(E,null)))};Ze.propTypes={passthrough:i().shape({root_store:i().object,WS:i().object})};const tr=Ze}}]);