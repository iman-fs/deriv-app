/*! For license information please see cfd.cfd-app.65a87889f8381ea61c0d.js.LICENSE.txt */
(self.webpackChunk_deriv_cfd=self.webpackChunk_deriv_cfd||[]).push([["cfd-app"],{"./src/_common/utility.js":e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n,r=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promise=new Promise((function(e,n){t.reject=n,t.resolve=e}))}));e.exports={template:function(e,t){var n=t;return t&&!Array.isArray(t)&&(n=[t]),e.replace(/\[_(\d+)]/g,(function(e,t){return n[+t-1]}))},createElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement(e);return Object.keys(t).forEach((function(e){var r=t[e];"text"===e?n.textContent=r:"html"===e?n.html(r):n.setAttribute(e,r)})),n},getStaticHash:function(){return n=n||(document.querySelector('script[src*="main"]').getAttribute("src")||"").split(".")[1]},PromiseClass:r}},"./src/app.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>yr});var r=n("../../node_modules/prop-types/index.js"),a=n.n(r),o=n("react"),i=n("mobx-react"),c=n("react-router"),l=n("react-router-dom"),s=n("@deriv/shared"),u=n("@deriv/components"),d=n("@deriv/translations"),f=n("@deriv/account/dist/account/js/reset-trading-password-modal"),_=n.n(f);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n("@deriv/account/dist/account/css/reset-trading-password-modal.css");var g=o.createContext(null),v=function(e){var t=e.store,n=e.children;return o.createElement(g.Provider,{value:m(m({},t),{},{mobxStores:t})},n)},y=function(e){return function(t){return function(e,t){var n=function(n){var r=o.useContext(g),a=t;return function(e){return!("function"!=typeof e||!e.prototype||!e.prototype.isReactComponent)}(t)&&(a=function(e){return o.createElement(t,e)}),(0,i.useObserver)((function(){return a(m(m({},n),e(r,n)))}))};return n.displayName=t.name,n}(e,t)}};const b=function(e){var t=e.onClickSignup,n=e.platform;return o.createElement("div",{className:"cfd-dashboard__missing-real"},o.createElement("h1",{className:"cfd-dashboard__missing-real--heading"},n===s.CFD_PLATFORMS.MT5?o.createElement(d.Localize,{i18n_default_text:"You need a real account (fiat currency or cryptocurrency) in Deriv to create a real DMT5 account."}):o.createElement(d.Localize,{i18n_default_text:"To create a Deriv X real account, create a Deriv real account first."})),o.createElement(u.Button,{className:"cfd-dashboard__missing-real--button",onClick:t,type:"button",primary:!0},o.createElement("span",{className:"btn__text"},o.createElement(d.Localize,{i18n_default_text:"Create a Deriv account"}))))};var w=n("../../node_modules/classnames/index.js"),E=n.n(w);const S=function(e){var t=e.className,n=e.is_invisible,r=e.theme,a=e.id;return o.createElement("div",{id:a,"data-testid":"dt_barspinner",className:E()("barspinner","barspinner--".concat(r||"dark"),{invisible:n},t)},Array.from(new Array(5)).map((function(e,t){return o.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))},x=function(){return o.createElement("div",{className:"cfd-real-accounts-display"},o.createElement(S,null))};var z=n("../../node_modules/formik/dist/formik.esm.js"),O=n("@deriv/account/dist/account/js/file-uploader-container"),P=n.n(O),k=n("@deriv/account/dist/account/js/form-sub-header"),D=n.n(k),A=n("@deriv/account/dist/account/js/poa-expired"),T=n.n(A),F=n("@deriv/account/dist/account/js/poa-needs-review"),M=n.n(F),C=n("@deriv/account/dist/account/js/poa-verified"),L=n.n(C),N=n("@deriv/account/dist/account/js/poa-unverified"),j=n.n(N),R=n("@deriv/account/dist/account/js/poa-submitted"),I=n.n(R),W=n("@deriv/account/dist/account/js/poa-status-codes"),U=n.n(W),B=["maxLength","name","optional"],V=["citizen","tax_residence"];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}function J(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var K=function(e){var t=e.maxLength,n=e.name,r=e.optional,a=void 0!==r&&r,i=J(e,B);return o.createElement(z.gN,{name:n},(function(e){var r=e.field,c=e.form,l=c.errors,s=c.touched;return o.createElement(u.Input,H({},r,{type:"text",required:!a,name:n,autoComplete:"off",maxLength:t||"30",error:s[r.name]&&l[r.name]},i))}))};const $=function(e){var t,n,r=e.is_fully_authenticated,a=e.is_loading,i=e.landing_company,c=e.residence_list,l=e.onSubmit,f=e.value,_=e.index,p=e.form_error,m=[{text:(0,d.localize)("Hedging"),value:"Hedging"},{text:(0,d.localize)("Income Earning"),value:"Income Earning"},{text:(0,d.localize)("Speculative"),value:"Speculative"},{text:(0,d.localize)("Peer-to-peer exchange"),value:"Peer-to-peer exchange"}],h=!(null===(t=null==i||null===(n=i.config)||void 0===n?void 0:n.tax_details_required)||void 0===t||!t);return 0===c.length||a?o.createElement(u.Loading,{is_fullscreen:!1}):o.createElement(z.J9,{initialValues:{citizen:f.citizen,tax_residence:f.tax_residence,tax_identification_number:f.tax_identification_number,account_opening_reason:f.account_opening_reason},validateOnMount:!0,validateOnChange:!0,validateOnBlur:!0,validate:function(e){return function(e){var t,n=e.values,r=e.residence_list,a=e.account_opening_reason,o=e.is_tin_required,i=q(r.filter((function(e){return e.text===n.tax_residence&&e.tin_format})),1)[0],c=q(null!==(t=null==i?void 0:i.tin_format)&&void 0!==t?t:[],1)[0],l=c||"^[A-Za-z0-9./s-]{0,25}$",s={citizen:[function(e){return!!e},function(e){return r.map((function(e){return e.text})).includes(e)}],tax_residence:[function(e){return!!e},function(e){return r.map((function(e){return e.text})).includes(e)}],tax_identification_number:[function(e){return!(!n.tax_residence&&o||c)||!!e},function(e){return!l||e.match(l)}],account_opening_reason:[function(e){return!!e},function(e){return a.map((function(e){return e.value})).includes(e)}]},u={citizen:(0,d.localize)("Citizenship"),tax_residence:(0,d.localize)("Tax residence"),tax_identification_number:(0,d.localize)("Tax identification number"),account_opening_reason:(0,d.localize)("Account opening reason")},f={};return Object.entries(s).forEach((function(e){var t,r=q(e,2),a=r[0],o=r[1].findIndex((function(e){return!e(n[a])}));-1!==o&&(f[a]=(t=u[a],[(0,d.localize)("{{field_name}} is required",{field_name:t}),(0,d.localize)("{{field_name}} is not properly formatted.",{field_name:t})])[o])})),f}({values:e,residence_list:c,account_opening_reason:m,is_tin_required:h})},onSubmit:function(e,t){return function(e,t,n,r,a,o){var i=e.citizen,c=e.tax_residence,l=J(e,V),s=function(e,t,n){var r,a;return n.forEach((function(n){n.text===e&&(r=n),n.text===t&&(a=n)})),{citizen:r,tax_residence:a}}(i,c,o),u=s.citizen,d=s.tax_residence,f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({citizen:u&&u.value?u.value:"",tax_residence:d&&d.value?d.value:""},l);r(n,f,t.setSubmitting,a)}(e,t,_,l,!(0,s.isDeepEqual)(f,e),c)}},(function(e){var t=e.handleSubmit,n=e.isSubmitting,a=e.handleChange,i=e.handleBlur,l=e.errors,_=e.touched,h=e.values,g=e.setFieldValue,v=e.isValid,y=_.citizen&&l.citizen,b=_.tax_residence&&l.tax_residence,w=_.account_opening_reason&&l.account_opening_reason,E=!(!f.citizen||!r),S=!(!f.tax_residence||!r),x=function(e,t){var n=e.value?e.text:"";g(t,n,!0)};return o.createElement(u.AutoHeightWrapper,{default_height:200,height_offset:(0,s.isDesktop)()?148:null},(function(e){var r=e.height,l=e.setRef;return o.createElement("form",{className:"cfd-financial-stp-modal__form",ref:l,onSubmit:t,autoComplete:"off"},o.createElement(u.Div100vhContainer,{className:"details-form",max_autoheight_offset:"179px",is_disabled:(0,s.isDesktop)()},o.createElement(u.Text,{as:"p",size:"xxxs",align:"center",className:"details-form__description","data-testid":"dt_cfd_details_form_description"},o.createElement(d.Localize,{i18n_default_text:"Any information you provide is confidential and will be used for verification purposes only."})),o.createElement(u.ThemedScrollbars,{height:r,is_bypassed:(0,s.isMobile)()},o.createElement("div",{className:"details-form__elements"},o.createElement(D(),{title:(0,d.localize)("Details")}),o.createElement("fieldset",{className:"account-form__fieldset"},o.createElement(u.DesktopWrapper,null,o.createElement(z.gN,{name:"citizen"},(function(e){var t=e.field;return o.createElement(u.Autocomplete,H({},t,{id:"real_mt5_citizenship","data-lpignore":"true",autoComplete:"off",type:"text",label:(0,d.localize)("Citizenship"),error:y,disabled:E,list_items:c,onItemSelection:function(e){return x(e,"citizen")},list_portal_id:"modal_root",required:!0}))}))),o.createElement(u.MobileWrapper,null,o.createElement(u.SelectNative,{placeholder:(0,d.localize)("Please select"),label:(0,d.localize)("Citizenship"),value:h.citizen,list_items:c,error:y,disabled:E,use_text:!0,onChange:function(e){return g("citizen",e.target.value,!0)},required:!0,should_hide_disabled_options:!1}))),o.createElement(D(),{title:(0,d.localize)("Tax information")}),o.createElement("fieldset",{className:"account-form__fieldset"},o.createElement(u.DesktopWrapper,null,o.createElement(z.gN,{name:"tax_residence"},(function(e){var t=e.field;return o.createElement(u.Autocomplete,H({id:"real_mt5_tax_residence","data-lpignore":"true",type:"text",autoComplete:"off",label:(0,d.localize)("Tax residence"),error:b,disabled:S,list_items:c,onItemSelection:function(e){return x(e,"tax_residence")},list_portal_id:"modal_root"},t))}))),o.createElement(u.MobileWrapper,null,o.createElement(u.SelectNative,{placeholder:(0,d.localize)("Please select"),label:(0,d.localize)("Tax residence"),value:h.tax_residence,error:b,disabled:S,list_items:c,use_text:!0,onChange:function(e){return g("tax_residence",e.target.value,!0)},required:!0}))),o.createElement("fieldset",{className:"account-form__fieldset"},o.createElement(K,{id:"real_mt5_tax_identification_number",name:"tax_identification_number",label:(0,d.localize)("Tax identification number"),placeholder:(0,d.localize)("Tax identification number"),value:h.tax_identification_number,onBlur:i,optional:!0})),o.createElement(D(),{title:(0,d.localize)("Account opening reason")}),o.createElement(z.gN,{name:"account_opening_reason"},(function(e){var t=e.field;return o.createElement(o.Fragment,null,o.createElement(u.DesktopWrapper,null,o.createElement(u.Dropdown,H({},t,{placeholder:(0,d.localize)("Account opening reason"),is_align_text_left:!0,name:t.name,list:m,value:h.account_opening_reason,onChange:a,handleBlur:i,error:w,list_portal_id:"modal_root"}))),o.createElement(u.MobileWrapper,null,o.createElement(u.SelectNative,H({},t,{placeholder:(0,d.localize)("Please select"),name:t.name,label:(0,d.localize)("Account opening reason"),list_items:m,value:h.account_opening_reason,error:w,onChange:function(e){a(e),g("account_opening_reason",e.target.value,!0)}}))))}))))),o.createElement(u.Modal.Footer,{is_bypassed:(0,s.isMobile)()},p&&o.createElement(u.FormSubmitErrorMessage,{message:p}),o.createElement(u.FormSubmitButton,{is_disabled:n||!v,is_absolute:(0,s.isMobile)(),label:(0,d.localize)("Next")})))}))}))};function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}var Q,ee=["onSave","onCancel","index","onSubmit","refreshNotifications"],te=["document_file"];function ne(){ne=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),i=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=b(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function d(){}function f(){}function _(){}var p={};c(p,a,(function(){return this}));var m=Object.getPrototypeOf,h=m&&m(m(x([])));h&&h!==t&&n.call(h,a)&&(p=h);var g=_.prototype=d.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==Z(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:z}}function z(){return{value:void 0,done:!0}}return f.prototype=_,c(g,"constructor",_),c(_,"constructor",f),f.displayName=c(_,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new y(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),c(g,i,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function re(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const ue=function(e){var t=e.onSave,n=e.onCancel,r=e.index,a=e.onSubmit,i=e.refreshNotifications,c=se(e,ee),l=o.useRef(null),f=ce(o.useState(!0),2),_=f[0],p=f[1],m=ce((0,u.useStateCallback)({poa_status:"none",resubmit_poa:!1,has_poi:!1,form_error:""}),2),h=m[0],g=m[1],v=ce((0,u.useStateCallback)({files:[],error_message:null}),2),y=v[0],b=v[1],w=ce(o.useState({}),2),E=w[0],S=w[1],x=function(e){t(r,e),n()},O=function(){var e,n=(e=ne().mark((function e(n,o){var i,c,l,u,f,_,p,m,v,b,w,z,O,P,k,D;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.document_file,i=se(n,te),o.setSubmitting(!0),e.next=4,s.WS.setSettings(i);case 4:if(!(c=e.sent).error){e.next=9;break}return g(oe(oe({},h),{form_error:c.error.message})),o.setSubmitting(!1),e.abrupt("return");case 9:return e.next=11,s.WS.authorized.storage.getSettings();case 11:if(l=e.sent,u=l.error,f=l.get_settings,!u){e.next=17;break}return g(oe(oe({},h),{form_error:u.message})),e.abrupt("return");case 17:return _=f._address_line_1,p=f._address_line_2,m=f._address_city,v=f._address_state,b=f._address_postcode,S({_address_line_1:_,_address_line_2:p,_address_city:m,_address_postcode:b,_address_state:v}),g(oe(oe({},h),{form_error:""})),e.prev=20,e.next=23,null===(w=Q.current)||void 0===w?void 0:w.upload();case 23:if(!(z=e.sent)||null==z||!z.warning){e.next=28;break}return g(oe(oe({},h),{form_error:z.warning})),o.setSubmitting(!1),e.abrupt("return");case 28:return e.next=30,s.WS.authorized.storage.getAccountStatus();case 30:if(O=e.sent,P=O.error,k=O.get_account_status,!P){e.next=37;break}return g(oe(oe({},h),{form_error:u.message})),o.setSubmitting(!1),e.abrupt("return");case 37:(D=k.authentication.identity)&&"none"===D.status?(g(oe(oe({},h),{form_error:(0,d.localize)("Identity confirmation failed. You will be redirected to the previous step.")})),setTimeout((function(){x(f)}),3e3)):(void 0,void 0,A=y.files,T=y.error_message,a(r,oe(oe(oe({},E),h),{document_file:A,file_error_message:T}))),e.next=45;break;case 42:e.prev=42,e.t0=e.catch(20),g(oe(oe({},h),{form_error:e.t0.message}));case 45:o.setSubmitting(!1),t(r,n),a(r,n,o.setSubmitting);case 48:case"end":return e.stop()}var A,T}),e,null,[[20,42]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){re(o,r,a,i,c,"next",e)}function c(e){re(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}();o.useEffect((function(){s.WS.authorized.getAccountStatus().then((function(e){s.WS.wait("states_list").then((function(){var t=e.get_account_status,n=null==t?void 0:t.authentication,r=n.document,a=n.identity,o=!(!a||"none"!==a.status);g(oe(oe({},h),{poa_status:null==r?void 0:r.status,__has_poi:o}),(function(){p(!1),i()}))}))}))}),[i,g]);var k=function(e,t){return h.poa_status!==U().verified&&0!==Object.keys(t).length},A=function(){g(oe(oe({},h),{resubmit_poa:!0}))},F=c.states_list,C=c.value,N=C.address_line_1,R=C.address_line_2,W=C.address_city,B=C.address_state,V=C.address_postcode,G=h.form_error,X=h.has_poi,q=h.poa_status,Y=h.resubmit_poa,H=h.submitted_poa,J=!_&&(Y||q===U().none);return o.createElement(z.J9,{initialValues:{address_line_1:N,address_line_2:R,address_city:W,address_state:B,address_postcode:V,document_file:y.files},validateOnMount:!0,validate:function(e){if([U().verified,U().pending].includes(h.poa_status))return{};var t={address_line_1:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return(0,s.validAddress)(e)},function(e){return(0,s.validLength)(e,{max:70})}],address_line_2:[function(e){return!e||(0,s.validAddress)(e)},function(e){return(0,s.validLength)(e,{max:70})}],address_city:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return(0,s.validLength)(e,{min:1,max:35})},function(e){return(0,s.validLetterSymbol)(e)}],address_state:[function(e){return(0,s.validLength)(e,{max:35})}],address_postcode:[function(e){return(0,s.validLength)(e,{max:20})},function(e){return!e||(0,s.validPostCode)(e)}]},n={address_line_1:[(0,d.localize)("First line of address is required"),(0,d.localize)("First line of address is not in a proper format."),(0,d.localize)("This should not exceed {{max}} characters.",{max:70})],address_line_2:[(0,d.localize)("Second line of address is not in a proper format."),(0,d.localize)("This should not exceed {{max}} characters.",{max:70})],address_city:[(0,d.localize)("Town/City is required."),(0,d.localize)("This should not exceed {{max_number}} characters.",{max_number:35}),(0,d.localize)("Town/City is not in a proper format.")],address_state:[(0,d.localize)("State/Province is not in a proper format.")],address_postcode:[(0,d.localize)("This should not exceed {{max_number}} characters.",{max_number:20}),(0,d.localize)("Only letters, numbers, space, and hyphen are allowed.")]},r={};return Object.entries(t).forEach((function(t){var a=ce(t,2),o=a[0],i=a[1].findIndex((function(t){return!t(e[o])}));-1!==i&&(r[o]=n[o][i])})),r},enableReinitialize:!0,onSubmit:O,innerRef:l},(function(e){e.dirty;var n=e.errors,a=e.handleSubmit,i=e.isSubmitting,c=e.handleBlur,l=e.handleChange,f=e.setFieldTouched,p=e.setFieldValue,m=e.values,h=e.touched;return o.createElement(u.AutoHeightWrapper,{default_height:200},(function(e){var g=e.setRef,v=e.height;return o.createElement("form",{ref:g,onSubmit:a,className:"cfd-proof-of-address"},o.createElement(u.Div100vhContainer,{className:"details-form",height_offset:"100px",is_disabled:(0,s.isDesktop)()},_&&o.createElement(u.Loading,{is_fullscreen:!1}),J&&o.createElement(u.ThemedScrollbars,{autohide:!1,height:"".concat(v-77,"px"),is_bypassed:(0,s.isMobile)()},o.createElement("div",{className:"cfd-proof-of-address__field-area"},o.createElement(D(),{title:(0,d.localize)("Address information")}),o.createElement(K,{name:"address_line_1",maxLength:255,required:!0,label:(0,d.localize)("First line of address*"),placeholder:(0,d.localize)("First line of address*"),onBlur:c}),o.createElement(K,{name:"address_line_2",maxLength:255,label:(0,d.localize)("Second line of address (optional)"),optional:!0,placeholder:(0,d.localize)("Second line of address"),onBlur:c}),o.createElement("div",{className:"cfd-proof-of-address__inline-fields"},o.createElement(K,{maxLength:255,name:"address_city",required:!0,label:(0,d.localize)("Town/City*"),placeholder:(0,d.localize)("Town/City*"),onBlur:c}),o.createElement("fieldset",{className:"address-state__fieldset"},(null==F?void 0:F.length)>0?o.createElement(o.Fragment,null,o.createElement(u.DesktopWrapper,null,o.createElement(z.gN,{name:"address_state"},(function(e){var t=e.field;return o.createElement(u.Dropdown,{id:"address_state",className:"address_state-dropdown",is_align_text_left:!0,list:F,error:h[t.name]&&n[t.name],name:"address_state",value:m.address_state,onChange:l,placeholder:(0,d.localize)("State/Province"),list_portal_id:"modal_root"})}))),o.createElement(u.MobileWrapper,null,o.createElement(u.SelectNative,{label:(0,d.localize)("State/Province"),value:m.address_state,list_items:F,error:h.address_state&&n.address_state,onChange:function(e){l(e),p("address_state",e.target.value,!0)}}))):o.createElement(K,{name:"address_state",label:(0,d.localize)("State/Province"),placeholder:(0,d.localize)("State/Province"),value:m.address_state,onBlur:c})),o.createElement(K,{maxLength:255,name:"address_postcode",label:(0,d.localize)("Postal/ZIP code"),placeholder:(0,d.localize)("Postal/ZIP code"),onBlur:c,optional:!0})),o.createElement("div",{className:"cfd-proof-of-address__file-upload"},o.createElement(P(),{onRef:function(e){return Q=e},getSocket:s.WS.getSocket,onFileDrop:function(e){return function(e,n,a,o,i){a("document_file",!0),o("document_file",e),b({files:e,error_message:n},(function(){"function"==typeof t&&t(r,oe(oe({},i),{document_file:e}))}))}(e.files,e.error_message,f,p,m)}})))),q!==U().none&&!Y&&o.createElement(u.ThemedScrollbars,{height:v,is_bypassed:(0,s.isMobile)()},H&&o.createElement(I(),{is_description_enabled:!1,has_poi:X}),q===U().pending&&o.createElement(M(),{is_description_enabled:!1}),q===U().verified&&o.createElement(L(),{is_description_enabled:!1,has_poi:X}),q===U().expired&&o.createElement(T(),{onClick:A}),(q===U().rejected||q===U().suspected)&&o.createElement(j(),null)),o.createElement(u.Modal.Footer,{is_bypassed:(0,s.isMobile)()},(q===U().verified||J)&&o.createElement(u.FormSubmitButton,{has_cancel:!0,cancel_label:(0,d.localize)("Previous"),is_disabled:k(0,n)||q!==U().verified&&y.files&&y.files.length<1||!!y.error_message,label:q===U().verified?(0,d.localize)("Submit"):(0,d.localize)("Next"),is_absolute:(0,s.isMobile)(),is_loading:i,form_error:G,onCancel:function(){return x(m)}}))))}))}))};var de=n("@deriv/account/dist/account/js/proof-of-identity-container"),fe=n.n(de),_e=["authentication_status","form_error","index","onCancel","onSubmit","value"];function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const he=y((function(e){var t=e.client,n=e.common,r=e.notifications;return{account_status:t.account_status,app_routing_history:n.app_routing_history,fetchResidenceList:t.fetchResidenceList,is_switching:t.is_switching,is_virtual:t.is_virtual,refreshNotifications:r.refreshNotifications,routeBackInApp:n.routeBackInApp,should_allow_authentication:t.should_allow_authentication}}))((function(e){var t=e.authentication_status,n=e.form_error,r=e.index,a=e.onCancel,i=e.onSubmit,c=e.value,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,_e),f=t.identity_status,_=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o.useState("none"),2),p=_[0],m=_[1],h=o.useCallback((function(){var e={};return["pending"].includes(p)&&["pending","verified"].includes(f)||(e.poi_state=!0),e}),[p,f]),g=!(["pending"].includes(p)||["pending","verified"].includes(f));return o.createElement(z.J9,{initialValues:{poi_state:c.poi_state},validate:h,onSubmit:function(e,t){return i(r,{poi_state:p},t.setSubmitting)}},(function(e){var t=e.handleSubmit;return o.createElement(u.AutoHeightWrapper,{default_height:200},(function(e){var c=e.setRef,f=e.height;return o.createElement("form",{ref:c,className:"cfd-proof-of-identity",onSubmit:t,"data-testid":"dt_cfd_proof_of_identity"},o.createElement("div",{className:"details-form"},o.createElement("input",{type:"hidden",name:"poi_state",value:p,readOnly:!0}),o.createElement(u.Div100vhContainer,{className:"cfd-proof-of-identity__fields",height_offset:"180px",is_disabled:(0,s.isDesktop)()},o.createElement(fe(),pe({},l,{height:f,is_from_external:!0,onStateChange:function(e){return m(e)}}))),o.createElement(u.Modal.Footer,{is_bypassed:(0,s.isMobile)()},o.createElement(u.FormSubmitButton,{has_cancel:!0,cancel_label:(0,d.localize)("Previous"),is_disabled:g,is_absolute:(0,s.isMobile)(),label:(0,d.localize)("Next"),onCancel:a,form_error:n,onClick:function(){g||i(r,{poi_state:p},!1)}}))))}))}))}));function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}function ye(){ye=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),i=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=b(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function d(){}function f(){}function _(){}var p={};c(p,a,(function(){return this}));var m=Object.getPrototypeOf,h=m&&m(m(x([])));h&&h!==t&&n.call(h,a)&&(p=h);var g=_.prototype=d.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==ge(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:z}}function z(){return{value:void 0,done:!0}}return f.prototype=_,c(g,"constructor",_),c(_,"constructor",f),f.displayName=c(_,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new y(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),c(g,i,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function be(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){be(o,r,a,i,c,"next",e)}function c(e){be(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const xe=y((function(e){var t=e.client,n=e.modules.cfd,r=e.notifications;return{addNotificationByKey:r.addNotificationMessageByKey,authentication_status:t.authentication_status,get_settings:t.account_settings,client_email:t.email,is_fully_authenticated:t.is_fully_authenticated,landing_company:t.landing_company,openPendingDialog:n.openPendingDialog,refreshNotifications:r.refreshNotifications,removeNotificationMessage:r.removeNotificationMessage,removeNotificationByKey:r.removeNotificationByKey,residence_list:t.residence_list,states_list:t.states_list,storeProofOfAddress:n.storeProofOfAddress}}))((function(e){var t=e.refreshNotifications,n=Ee(o.useState(0),2),r=n[0],a=n[1],i=Ee(o.useState(""),2),c=i[0],l=i[1],f=Ee(o.useState(!1),2),_=f[0],p=f[1],m=Ee(o.useState([{header:{active_title:(0,d.localize)("Complete your personal details"),title:(0,d.localize)("Personal details")},body:$,form_value:{citizen:"",tax_residence:"",tax_identification_number:"",account_opening_reason:""},props:["residence_list","is_fully_authenticated","landing_company"]},{header:{active_title:(0,d.localize)("Complete your proof of identity"),title:(0,d.localize)("Proof of identity")},body:he,form_value:{poi_state:"unknown"},props:["addNotificationByKey","authentication_status","refreshNotifications","removeNotificationMessage","removeNotificationByKey"]},{header:{active_title:(0,d.localize)("Complete your proof of address"),title:(0,d.localize)("Proof of address")},body:ue,form_value:{address_line_1:e.get_settings.address_line_1,address_line_2:e.get_settings.address_line_2,address_city:e.get_settings.address_city,address_state:e.get_settings.address_state,address_postcode:e.get_settings.address_postcode,upload_file:""},props:["states_list","get_settings","storeProofOfAddress","refreshNotifications"]}]),2),h=m[0],g=m[1],v=r,y=function(){l(""),r+1<h.length?a(r+1):(e.openPendingDialog(),e.toggleModal())},b=function(){var t=we(ye().mark((function t(n,r,a){var o,i=arguments;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.length>3&&void 0!==i[3]&&!i[3]||0!==n){t.next=10;break}return t.next=4,s.WS.setSettings(r);case 4:if(!(o=t.sent).error){t.next=9;break}return l(o.error.message),a(!1),t.abrupt("return");case 9:w(a);case 10:if(0!==n){t.next=13;break}return t.next=13,s.WS.triggerMt5DryRun({email:e.client_email});case 13:x(n,r),y();case 15:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),w=function(){var e=we(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.WS.authorized.storage.getSettings();case 2:if(!(n=e.sent).error){e.next=7;break}return l(n.error.message),"function"==typeof t&&t(!1),e.abrupt("return");case 7:r=Object.assign([],h),n.get_settings.citizen&&(r[0].form_value.citizen=E(n.get_settings.citizen)),n.get_settings.tax_residence&&(r[0].form_value.tax_residence=E(n.get_settings.tax_residence)),n.get_settings.tax_identification_number&&(r[0].form_value.tax_identification_number=n.get_settings.tax_identification_number),n.get_settings.account_opening_reason&&(r[0].form_value.account_opening_reason=n.get_settings.account_opening_reason),g(r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();o.useEffect((function(){t()}),[h,t]);var E=function(t){var n=Ee(e.residence_list.filter((function(e){return e.value===t})),1)[0];return(0,s.getPropertyValue)(n,["text"])||t};o.useEffect((function(){0===v&&(p(!0),w().then((function(){p(!1)})))}),[]);var S=function(e){return e?h[v][e]:h[v]},x=function(e,t){var n=Object.assign([],h);n[e].form_value=t,0===v&&(n[0].form_value.citizen=E(t.citizen),n[0].form_value.tax_residence=E(t.tax_residence)),g(n)},z=S("body"),O=S("form_value"),P=(S("props")||[]).reduce((function(t,n){return Object.assign(t,(r={},a=n,o=e[n],a in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,r));var r,a,o}),{});return o.createElement(u.Div100vhContainer,{className:"cfd-financial-stp-modal",id:"real_mt5_financial_stp_account_opening",is_disabled:(0,s.isDesktop)(),height_offset:"40px"},o.createElement("div",{className:"cfd-financial-stp-modal__heading"},S()&&o.createElement(o.Fragment,null,o.createElement(u.DesktopWrapper,null,o.createElement(u.FormProgress,{steps:h,current_step:r})),o.createElement(u.MobileWrapper,null,o.createElement("div",{className:"cfd-financial-stp-modal__header-steps"},o.createElement("h4",{className:"cfd-financial-stp-modal__header-steps-title"},o.createElement(d.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:r+1,steps:h.length,step_title:h[r].header.title}})),h[r].header.active_title&&o.createElement("h4",{className:"cfd-financial-stp-modal__header-steps-subtitle"},h[r].header.active_title))))),o.createElement("div",{className:"cfd-financial-stp-modal__body"},o.createElement(z,ve({value:O,index:v,onSubmit:b,height:"auto",is_loading:_,onCancel:function(){a(r-1),l("")},onSave:x,form_error:c},P))))})),ze=y((function(e){var t=e.ui,n=e.modules;return{disableApp:t.disableApp,disableMt5FinancialStpModal:n.cfd.disableMt5FinancialStpModal,enableApp:t.enableApp,is_mt5_financial_stp_modal_open:n.cfd.is_mt5_financial_stp_modal_open}}))((function(e){var t=e.disableApp,n=e.disableMt5FinancialStpModal,r=e.enableApp,a=e.is_mt5_financial_stp_modal_open;return o.createElement(o.Fragment,null,o.createElement(u.DesktopWrapper,null,o.createElement(u.Modal,{id:"mt5_financial_stp_signup_modal",className:"mt5-financial-stp-signup-modal",disableApp:t,width:"904px",title:(0,d.localize)("Create a DMT5 real Financial STP account"),enableApp:r,is_open:a,has_close_icon:!0,height:"740px",toggleModal:n},o.createElement(xe,{toggleModal:n}))),o.createElement(u.MobileWrapper,null,o.createElement(u.MobileDialog,{portal_element_id:"modal_root",title:(0,d.localize)("Create a DMT5 real Financial STP account"),wrapper_classname:"mt5-financial-stp-signup-modal",visible:a,onClose:n},o.createElement(xe,{toggleModal:n}))))}));function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Te=function(e){var t,n,r,a=e.landing_companies,i=e.platform,c=e.is_logged_in,l=e.is_uk,f=c?(i===s.CFD_PLATFORMS.MT5?[null==a||null===(t=a.mt_gaming_company)||void 0===t?void 0:t.financial,null==a||null===(n=a.mt_financial_company)||void 0===n?void 0:n.financial,(null==a||null===(r=a.mt_financial_company)||void 0===r?void 0:r.financial_stp)&&i===s.CFD_PLATFORMS.MT5]:[null==a?void 0:a.dxtrade_gaming_company,null==a?void 0:a.dxtrade_financial_company]).filter(Boolean).length:i===s.CFD_PLATFORMS.MT5?3:2,_=l?o.createElement("div",null,(0,d.localize)("Forex, stocks, stock indices, cryptocurrencies"),o.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"**"),(0,d.localize)(", synthetic indices")):(0,d.localize)("Forex, stocks, stock indices, cryptocurrencies, synthetic indices");return[{attribute:(0,d.localize)("Account currency"),mt5:{synthetic:(0,d.localize)("USD"),synthetic_eu:(0,d.localize)("EUR"),financial:(0,d.localize)("USD"),financial_au:(0,d.localize)("USD"),financial_eu:(0,d.localize)("EUR/GBP/USD"),financial_stp:(0,d.localize)("USD"),footnote:null},dxtrade:{synthetic:(0,d.localize)("USD"),synthetic_eu:(0,d.localize)("EUR"),financial:(0,d.localize)("USD"),financial_au:(0,d.localize)("USD"),financial_eu:(0,d.localize)("EUR/GBP"),footnote:null}},{attribute:(0,d.localize)("Maximum leverage"),mt5:{synthetic:(0,d.localize)("Up to 1:1000"),synthetic_eu:(0,d.localize)("Up to 1:1000"),financial:(0,d.localize)("Up to 1:1000"),financial_au:(0,d.localize)("Up to 1:30"),financial_eu:(0,d.localize)("Up to 1:30"),financial_stp:(0,d.localize)("Up to 1:100"),footnote:(0,d.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")},dxtrade:{synthetic:(0,d.localize)("Up to 1:1000"),synthetic_eu:(0,d.localize)("Up to 1:1000"),financial:(0,d.localize)("Up to 1:1000"),financial_au:(0,d.localize)("Up to 1:30"),financial_eu:(0,d.localize)("Up to 1:30"),footnote:(0,d.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")}},{attribute:(0,d.localize)("Order execution"),mt5:{synthetic:(0,d.localize)("Market"),synthetic_eu:(0,d.localize)("Market"),financial:(0,d.localize)("Market"),financial_au:(0,d.localize)("Market"),financial_eu:(0,d.localize)("Market"),financial_stp:(0,d.localize)("Market"),footnote:(0,d.localize)("All {{count}} account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.",{count:f})},dxtrade:{synthetic:(0,d.localize)("Market"),synthetic_eu:(0,d.localize)("Market"),financial:(0,d.localize)("Market"),financial_au:(0,d.localize)("Market"),financial_eu:(0,d.localize)("Market"),footnote:(0,d.localize)("All {{count}} account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.",{count:f})}},{attribute:(0,d.localize)("Spread"),mt5:{synthetic:(0,d.localize)("Fixed/Variable"),synthetic_eu:(0,d.localize)("Fixed/Variable"),financial:(0,d.localize)("Variable"),financial_au:(0,d.localize)("Variable"),financial_eu:(0,d.localize)("Fixed/Variable"),financial_stp:(0,d.localize)("Variable"),footnote:(0,d.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")},dxtrade:{synthetic:(0,d.localize)("Fixed/Variable"),synthetic_eu:(0,d.localize)("Fixed/Variable"),financial:(0,d.localize)("Variable"),financial_au:(0,d.localize)("Variable"),financial_eu:(0,d.localize)("Variable"),footnote:(0,d.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")}},{attribute:(0,d.localize)("Commission"),mt5:{synthetic:(0,d.localize)("No"),synthetic_eu:(0,d.localize)("No"),financial:(0,d.localize)("No"),financial_au:(0,d.localize)("No"),financial_eu:(0,d.localize)("No"),financial_stp:(0,d.localize)("No"),footnote:(0,d.localize)("Deriv charges no commission across all account types.")},dxtrade:{synthetic:(0,d.localize)("No"),synthetic_eu:(0,d.localize)("No"),financial:(0,d.localize)("No"),financial_au:(0,d.localize)("No"),financial_eu:(0,d.localize)("No"),footnote:(0,d.localize)("Deriv charges no commission across all account types.")}},{attribute:(0,d.localize)("Minimum deposit"),mt5:{synthetic:(0,d.localize)("No"),synthetic_eu:(0,d.localize)("No"),financial:(0,d.localize)("No"),financial_au:(0,d.localize)("No"),financial_eu:(0,d.localize)("No"),financial_stp:(0,d.localize)("No"),footnote:null},dxtrade:{synthetic:(0,d.localize)("No"),synthetic_eu:(0,d.localize)("No"),financial:(0,d.localize)("No"),financial_au:(0,d.localize)("No"),financial_eu:(0,d.localize)("No"),footnote:null}},{attribute:(0,d.localize)("Margin call"),mt5:{synthetic:(0,d.localize)("100%"),synthetic_eu:(0,d.localize)("100%"),financial:(0,d.localize)("100%"),financial_au:(0,d.localize)("100%"),financial_eu:(0,d.localize)("100%"),financial_stp:(0,d.localize)("100%"),footnote:(0,d.localize)("Youll get a warning, known as margin call, if your account balance drops down close to the stop out level.")},dxtrade:{synthetic:(0,d.localize)("100%"),synthetic_eu:(0,d.localize)("100%"),financial:(0,d.localize)("100%"),financial_au:(0,d.localize)("100%"),financial_eu:(0,d.localize)("100%"),footnote:(0,d.localize)("Youll get a warning, known as margin call, if your account balance drops down close to the stop out level.")}},{attribute:(0,d.localize)("Stop out level"),mt5:{synthetic:(0,d.localize)("50%"),synthetic_eu:(0,d.localize)("50%"),financial:(0,d.localize)("50%"),financial_au:(0,d.localize)("50%"),financial_eu:(0,d.localize)("50%"),financial_stp:(0,d.localize)("50%"),footnote:(0,d.localize)("To understand stop out, first you need to learn about margin level, which is  the ratio of your equity (the total balance you would have if you close all your positions at that point) to the margin you're using at the moment. If your margin level drops below our stop out level, your positions may be closed automatically to protect you from further losses.")},dxtrade:{synthetic:(0,d.localize)("50%"),synthetic_eu:(0,d.localize)("50%"),financial:(0,d.localize)("50%"),financial_au:(0,d.localize)("50%"),financial_eu:(0,d.localize)("50%"),footnote:(0,d.localize)("To understand stop out, first you need to learn about margin level, which is  the ratio of your equity (the total balance you would have if you close all your positions at that point) to the margin you're using at the moment. If your margin level drops below our stop out level, your positions may be closed automatically to protect you from further losses.")}},{attribute:(0,d.localize)("Number of assets"),mt5:{synthetic:(0,d.localize)("20+"),synthetic_eu:(0,d.localize)("20+"),financial:(0,d.localize)("150+"),financial_au:(0,d.localize)("100+"),financial_eu:(0,d.localize)("50+"),financial_stp:(0,d.localize)("70+"),footnote:null},dxtrade:{synthetic:(0,d.localize)("20+"),synthetic_eu:(0,d.localize)("20+"),financial:(0,d.localize)("90+"),financial_au:(0,d.localize)("90+"),financial_eu:(0,d.localize)("90+"),footnote:null}},{attribute:(0,d.localize)("Cryptocurrency trading"),mt5:{synthetic:(0,d.localize)("N/A"),synthetic_eu:(0,d.localize)("N/A"),financial:(0,d.localize)("24/7"),financial_au:(0,d.localize)("24/7"),financial_eu:(0,d.localize)("24/7"),financial_stp:(0,d.localize)("24/7"),footnote:(0,d.localize)("Indicates the availability of cryptocurrency trading on a particular account.")},dxtrade:{synthetic:(0,d.localize)("N/A"),synthetic_eu:(0,d.localize)("N/A"),financial:(0,d.localize)("24/7"),financial_au:(0,d.localize)("24/7"),financial_eu:(0,d.localize)("24/7"),footnote:(0,d.localize)("Indicates the availability of cryptocurrency trading on a particular account.")}},{attribute:(0,d.localize)("Trading instruments"),mt5:{synthetic:(0,d.localize)("Synthetics"),synthetic_eu:(0,d.localize)("Synthetics"),financial:(0,d.localize)("FX-majors (standard/micro lots), FX-minors, basket indices, commodities, cryptocurrencies, and stocks and stock indices"),financial_au:(0,d.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies, Stocks, and Stock Indices"),financial_eu:_,financial_stp:(0,d.localize)("FX-majors, FX-minors, FX-exotics, and cryptocurrencies"),footnote:null},dxtrade:{synthetic:(0,d.localize)("Synthetics"),synthetic_eu:(0,d.localize)("Synthetics"),financial:(0,d.localize)("FX majors (standard/micro lots), FX minors, basket indices, commodities, and cryptocurrencies"),financial_au:(0,d.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies"),financial_eu:(0,d.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies (except UK)"),footnote:null}}]},Fe=function(e){var t=e.name,n=e.counter,r=De(o.useState(!1),2),a=r[0],i=r[1];return n?o.createElement(o.Fragment,null,o.createElement(u.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer",onClick:function(){return i(!a)}},t,o.createElement(u.Text,{weight:"bold",as:"span",line_height:"x",size:"xxxs",className:"counter"},n))):o.createElement(u.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer"},t)},Me=function(e){var t=e.landing_companies,n=e.is_logged_in,r=e.show_eu_related,a=e.platform,i=e.residence,c=e.is_uk,l="au"===i;return function(e,t,n,r,a,i){var c=function(e,t,n){return i?t:r?n:e},l=0;return t.filter((function(e){return e[a]})).map((function(t){var i,u,d,f=t.attribute,_=t.mt5,p=void 0===_?{}:_,m=t.dxtrade,h=void 0===m?{}:m,g=a===s.CFD_PLATFORMS.MT5?p:h,v=g.synthetic,y=g.synthetic_eu,b=g.financial,w=g.financial_au,E=g.financial_eu,S=g.footnote,x={synthetic:r?y:v},z={financial:c(b,w,E)},O=S?++l:null;return n?Pe(Pe(Pe({attribute:o.createElement(Fe,{name:f,counter:O})},null!=e&&null!==(i=e.mt_gaming_company)&&void 0!==i&&i.financial?x:{}),null!=e&&null!==(u=e.mt_financial_company)&&void 0!==u&&u.financial?z:{}),null!=e&&null!==(d=e.mt_financial_company)&&void 0!==d&&d.financial_stp&&a===s.CFD_PLATFORMS.MT5?{financial_stp:null==p?void 0:p.financial_stp}:{}):a===s.CFD_PLATFORMS.DXTRADE?Pe(Pe({attribute:o.createElement(Fe,{name:f,counter:O})},x),z):Pe(Pe(Pe({attribute:o.createElement(Fe,{name:f,counter:O})},x),z),{financial_stp:null==p?void 0:p.financial_stp})}))}(t,Te({landing_companies:t,platform:a,is_logged_in:n,is_uk:c}),n,r,a,l)},Ce=function(e){var t=e.platform,n=e.show_risk_message,r=e.landing_companies,a=e.is_logged_in,i=e.is_uk;return o.createElement("div",{className:"cfd-compare-account--hint"},o.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},o.createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),o.createElement(d.Localize,{i18n_default_text:"At bank rollover, liquidity in the forex markets is reduced and may increase the spread and processing time for client orders. This happens around 21:00 GMT during daylight saving time, and 22:00 GMT non-daylight saving time."})),n&&o.createElement(o.Fragment,null,o.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},o.createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),o.createElement(d.Localize,{i18n_default_text:"Margin call and stop out level will change from time to time based on market condition."})),o.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},o.createElement(u.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"*"),o.createElement(d.Localize,{i18n_default_text:"To protect your portfolio from adverse market movements due to the market opening gap, we reserve the right to decrease leverage on all offered symbols for financial accounts before market close and increase it again after market open. Please make sure that you have enough funds available in your {{platform}} account to support your positions at all times.",values:{platform:t===s.CFD_PLATFORMS.MT5?(0,d.localize)("MT5"):(0,d.localize)("Deriv X")}})),i&&o.createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},o.createElement(u.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"**"),o.createElement(d.Localize,{i18n_default_text:"Cryptocurrency trading is not available for clients residing in the United Kingdom.",values:{platform:t===s.CFD_PLATFORMS.MT5?(0,d.localize)("MT5"):(0,d.localize)("Deriv X")}}))),Te({landing_companies:r,platform:t,is_logged_in:a,is_uk:i}).filter((function(e){var n;return!(null===(n=e[t])||void 0===n||!n.footnote)})).map((function(e,n){return o.createElement("div",{key:n,className:"cfd-compare-accounts__bullet-wrapper"},o.createElement(u.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},n+1),o.createElement("div",{className:"cfd-compare-accounts__footnote"},o.createElement(u.Text,{as:"p",size:"xs",weight:"bold",color:"prominent",className:"cfd-compare-accounts__footnote-title"},e.attribute),o.createElement(u.Text,{size:"xs",color:"prominent"},e[t].footnote)))})))};const Le=function(e){var t=e.landing_companies,n=e.is_logged_in,r=e.platform,a=e.show_eu_related,i=e.residence,c=e.is_eu,l=e.is_uk,f=De(o.useState([]),2),_=f[0],p=f[1],m=De(o.useState(r===s.CFD_PLATFORMS.DXTRADE?"1.5fr 1fr 2fr":"1.5fr 1fr 2fr 1fr"),2),h=m[0],g=m[1];o.useEffect((function(){var e,o,c;p(Me({landing_companies:t,is_logged_in:n,platform:r,show_eu_related:a,residence:i,is_uk:l})),n&&r===s.CFD_PLATFORMS.MT5?g("1.5fr ".concat(null!=t&&null!==(e=t.mt_gaming_company)&&void 0!==e&&e.financial?"1fr":""," ").concat(null!=t&&null!==(o=t.mt_financial_company)&&void 0!==o&&o.financial?"2fr":""," ").concat(null!=t&&null!==(c=t.mt_financial_company)&&void 0!==c&&c.financial_stp?" 1fr ":"")):n&&r===s.CFD_PLATFORMS.DXTRADE&&g("1.5fr ".concat(null!=t&&t.dxtrade_gaming_company?"1fr":""," ").concat(null!=t&&t.dxtrade_financial_company?"2fr":""))}),[null==t?void 0:t.mt_financial_company,null==t?void 0:t.mt_gaming_company,n,l,t,r,a,i,l]);var v=r===s.CFD_PLATFORMS.MT5||!a,y=c?(0,d.localize)("CFDs"):(0,d.localize)("Financial");return o.createElement(u.Div100vhContainer,{height_offset:"40px",is_bypassed:(0,s.isDesktop)()},o.createElement(u.ThemedScrollbars,{className:"cfd-compare-accounts",style:{"--cfd-compare-accounts-template-columns":h}},o.createElement("div",{className:"cfd-compare-accounts__table-wrapper"},o.createElement(u.Table,{className:"cfd-compare-accounts__table"},o.createElement(u.Table.Header,null,o.createElement(u.Table.Row,{className:"cfd-compare-accounts__table-row"},o.createElement(u.Table.Head,{fixed:!0}),n?o.createElement(o.Fragment,null,(0,s.isLandingCompanyEnabled)({landing_companies:t,platform:r,type:"gaming"})&&o.createElement(u.Table.Head,null,(0,d.localize)("Synthetic")),(0,s.isLandingCompanyEnabled)({landing_companies:t,platform:r,type:"financial"})&&o.createElement(u.Table.Head,null,y,o.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*")),(0,s.isLandingCompanyEnabled)({landing_companies:t,platform:r,type:"financial_stp"})&&o.createElement(u.Table.Head,null,(0,d.localize)("Financial STP"),o.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*"))):o.createElement(o.Fragment,null,o.createElement(u.Table.Head,null,(0,d.localize)("Synthetic")),o.createElement(u.Table.Head,null,(0,d.localize)("Financial"),o.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*")),r===s.CFD_PLATFORMS.MT5&&o.createElement(u.Table.Head,null,(0,d.localize)("Financial STP"),o.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*"))))),o.createElement(u.Table.Body,null,_.map((function(e,t){return o.createElement(u.Table.Row,{key:t,className:"cfd-compare-accounts__table-row"},Object.keys(e).map((function(t,n){return o.createElement(u.Table.Cell,{key:n,fixed:0===n},e[t])})))}))))),o.createElement(Ce,{platform:r,show_risk_message:v,landing_companies:t,is_logged_in:n,is_uk:l})))},Ne=y((function(e){var t=e.modules,n=e.ui,r=e.client;return{disableApp:n.disableApp,enableApp:n.enableApp,is_compare_accounts_visible:t.cfd.is_compare_accounts_visible,is_loading:r.is_populating_mt5_account_list,is_eu:r.is_eu,is_uk:r.is_uk,is_eu_country:r.is_eu_country,is_logged_in:r.is_logged_in,landing_companies:r.landing_companies,residence:r.residence,toggleCompareAccounts:t.cfd.toggleCompareAccountsModal}}))((function(e){var t,n,r,a=e.disableApp,i=e.enableApp,c=e.is_compare_accounts_visible,l=e.landing_companies,f=e.is_loading,_=e.is_logged_in,p=e.is_eu,m=e.is_uk,h=e.is_eu_country,g=e.platform,v=e.residence,y=e.toggleCompareAccounts,b=_&&p||!_&&h,w=1===[null==l||null===(t=l.mt_gaming_company)||void 0===t?void 0:t.financial,null==l||null===(n=l.mt_financial_company)||void 0===n?void 0:n.financial,null==l||null===(r=l.mt_financial_company)||void 0===r?void 0:r.financial_stp].filter(Boolean).length?(0,d.localize)("Account Information"):(0,d.localize)("Compare accounts");return o.createElement(o.Fragment,null,o.createElement("div",{className:"cfd-compare-accounts-modal__wrapper",style:{marginTop:g===s.CFD_PLATFORMS.DXTRADE?"5rem":"2.4rem"}},o.createElement(u.Button,{className:"cfd-dashboard__welcome-message--button",has_effect:!0,text:w,onClick:y,secondary:!0,disabled:f}),o.createElement(o.Suspense,{fallback:o.createElement(u.UILoader,null)},o.createElement(u.DesktopWrapper,null,o.createElement(u.Modal,{className:"cfd-dashboard__compare-accounts",disableApp:a,enableApp:i,is_open:c,title:w,toggleModal:y,type:"button",height:"696px",width:"903px"},o.createElement(Le,{is_logged_in:_,landing_companies:l,platform:g,show_eu_related:b,residence:v,is_eu:p,is_uk:m}))),o.createElement(u.MobileWrapper,null,o.createElement(u.MobileDialog,{portal_element_id:"deriv_app",title:(0,d.localize)("Compare accounts"),wrapper_classname:"cfd-dashboard__compare-accounts",visible:c,onClose:y},o.createElement(Le,{is_logged_in:_,landing_companies:l,platform:g,show_eu_related:b,residence:v,is_eu:p,is_uk:m}))))))}));var je=function(e,t){return e===s.CFD_PLATFORMS.DXTRADE?(0,d.localize)("Trade forex, basket indices, commodities, and cryptocurrencies with high leverage."):e===s.CFD_PLATFORMS.MT5?t?(0,d.localize)("Trade CFDs on forex, stocks, stock indices, synthetic indices, and commodities with leverage."):(0,d.localize)("Trade major (standard & micro-lots) and minor forex, stocks & stock indices, commodities, basket indices, and crypto with high leverage."):""},Re="https://apps.apple.com/us/app/deriv-x/id1563337503",Ie="https://play.google.com/store/apps/details?id=com.deriv.dx",We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||(0,s.OSDetect)()){case"ios":return Re;case"android":return Ie;default:return Be()}},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||(0,s.OSDetect)()){case"windows":return"https://download.mql5.com/cdn/web/deriv.limited/mt5/deriv5setup.exe";case"linux":return"https://www.metatrader5.com/en/terminal/help/start_advanced/install_linux";case"macos":return"https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/MetaTrader5.dmg";case"ios":return"https://download.mql5.com/cdn/mobile/mt5/ios?server=Deriv-Demo,Deriv-Server";case"android":return"https://download.mql5.com/cdn/mobile/mt5/android?server=Deriv-Demo,Deriv-Server";default:return Ve({category:"real"})}},Be=function(e){return"real"===e?"https://dx.deriv.com":"https://dx-demo.deriv.com/"},Ve=function(e){var t=e.category,n=e.loginid,r=e.server_name,a="demo"===t?"Deriv-Demo":void 0===r?"Deriv-Server":r,o=null!=n?n:"";return"https://trade.mql5.com/trade?servers=".concat(a,"&trade_server=").concat(a).concat(o&&"&login=".concat(o))};const Ge=function(e){var t=e.platform,n=e.active_index,r=e.is_dark_mode_on;return o.createElement("div",{className:"cfd-dashboard__download-center"},o.createElement("h1",{className:"cfd-dashboard__download-center--heading"},function(e){return e===s.CFD_PLATFORMS.DXTRADE?(0,d.localize)("Run Deriv X on your browser or download the mobile app"):e===s.CFD_PLATFORMS.MT5?(0,d.localize)("Run MT5 from your browser or download the MT5 app for your devices"):""}(t)),o.createElement("div",{className:"cfd-dashboard__download-center-options",style:{justifyContent:t===s.CFD_PLATFORMS.DXTRADE?"space-evenly":void 0}},o.createElement("div",{className:"cfd-dashboard__download-center-options--desktop"},o.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-links"},o.createElement("div",null,o.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-row"},t===s.CFD_PLATFORMS.MT5&&o.createElement(o.Fragment,null,o.createElement(u.Icon,{icon:"IcMt5DeviceDesktop",width:118,height:85}),o.createElement(u.Icon,{icon:"IcMt5DeviceLaptop",width:75,height:51})),t===s.CFD_PLATFORMS.DXTRADE&&o.createElement(o.Fragment,null,o.createElement(u.Icon,{icon:r?"IcDxtradeDeviceDesktopLight":"IcDxtradeDeviceDesktop",width:128,height:83}),o.createElement(u.Icon,{icon:r?"IcDxtradeDeviceLaptopLight":"IcDxtradeDeviceLaptop",width:81,height:54}))),t===s.CFD_PLATFORMS.DXTRADE&&o.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-download"},o.createElement("a",{className:"cfd-dashboard__dxtrade-download",href:Be(0===n?"real":"demo"),target:"_blank",rel:"noopener noreferrer"},o.createElement(u.Icon,{className:"cfd-dashboard__dxtrade-download--icon",icon:"IcBrandDxtrade",width:32,height:32}),o.createElement("div",{className:"cfd-dashboard__dxtrade-download-text"},o.createElement(u.Text,{className:"cfd-dashboard__dxtrade-download--title",color:"colored-background",size:"xxs",weight:"bold"},o.createElement(d.Localize,{i18n_default_text:"Web terminal"})))))),t===s.CFD_PLATFORMS.MT5&&o.createElement("div",{className:"cfd-dashboard__download-center-options--desktop-download"},o.createElement("a",{href:Ue("windows"),target:"_blank",rel:"noopener noreferrer"},o.createElement(u.Icon,{icon:"IcInstallationWindows",width:138,height:40})),o.createElement("a",{href:Ue("macos"),target:"_blank",rel:"noopener noreferrer"},o.createElement(u.Icon,{icon:"IcInstallationMacos",width:138,height:40})),o.createElement("a",{href:Ue("linux"),target:"_blank",rel:"noopener noreferrer"},o.createElement(u.Icon,{icon:"IcInstallationLinux",width:138,height:40})))),t===s.CFD_PLATFORMS.MT5&&o.createElement(u.Text,{as:"p",align:"center",size:"xxxs",className:"cfd-dashboard__download-center--hint"},o.createElement(d.Localize,{i18n_default_text:"The MT5 desktop app is not supported by Windows XP, Windows 2003, and Windows Vista."}))),o.createElement("div",{className:"cfd-dashboard__download-center-options--mobile"},o.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-devices"},t===s.CFD_PLATFORMS.MT5&&o.createElement(o.Fragment,null,o.createElement(u.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),o.createElement(u.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),t===s.CFD_PLATFORMS.DXTRADE&&o.createElement(o.Fragment,null,o.createElement(u.Icon,{icon:r?"IcDxtradeDeviceTabletLight":"IcDxtradeDeviceTablet",width:133,height:106}),o.createElement(u.Icon,{icon:r?"IcDxtradeDevicePhoneLight":"IcDxtradeDevicePhone",width:48,height:74}))),o.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-links"},o.createElement("a",{className:"cfd-dashboard__download-center-options--mobile-link",href:t===s.CFD_PLATFORMS.DXTRADE?We("android"):Ue("android"),target:"_blank",rel:"noopener noreferrer"},o.createElement(u.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),o.createElement("a",{className:"cfd-dashboard__download-center-options--mobile-link",href:t===s.CFD_PLATFORMS.DXTRADE?We("ios"):Ue("ios"),target:"_blank",rel:"noopener noreferrer"},o.createElement(u.Icon,{icon:"IcInstallationApple",width:120,height:40}))))))};var Xe=n("mobx"),qe=n("./src/_common/utility.js");function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const He=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,n;return t=e,(n=[{key:"add",value:function(e,t){this.has(e)||(this.errors[e]=[]),-1===this.errors[e].indexOf(t)&&this.errors[e].push(t)}},{key:"all",value:function(){return this.errors}},{key:"first",value:function(e){return this.has(e)?this.errors[e][0]:null}},{key:"get",value:function(e){return this.has(e)?this.errors[e]:[]}},{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.errors,e)}}])&&Ye(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const $e=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Je(this,e),this.input=t,this.rules=n,this.store=r,this.errors=new He,this.error_count=0}var t,n,r;return t=e,r=[{key:"getRuleObject",value:function(e){var t="string"==typeof e,n={name:t?e:e[0],options:t?{}:e[1]||{}};return n.validator="custom"===n.name?e[1].func:(0,s.getPreBuildDVRs)()[n.name].func,n}}],(n=[{key:"addFailure",value:function(e,t,n){var r=n||t.options.message||(0,s.getPreBuildDVRs)()[t.name].message();"length"===t.name?r=(0,qe.template)(r,[t.options.min===t.options.max?t.options.min:"".concat(t.options.min,"-").concat(t.options.max)]):"min"===t.name?r=(0,qe.template)(r,[t.options.min]):"not_equal"===t.name&&(r=(0,qe.template)(r,[t.options.name1,t.options.name2])),this.errors.add(e,r),this.error_count++}},{key:"check",value:function(){var t=this;return Object.keys(this.input).forEach((function(n){Object.prototype.hasOwnProperty.call(t.rules,n)&&t.rules[n].forEach((function(r){var a=e.getRuleObject(r);if((a.validator||"function"==typeof a.validator)&&(!a.options.condition||a.options.condition(t.store))&&(""!==t.input[n]||"req"===a.name)){var o,i;if("number"===a.name){var c=a.validator(t.input[n],a.options,t.store,t.input);o=c.is_ok,i=c.message}else o=a.validator(t.input[n],a.options,t.store,t.input);o||t.addFailure(n,a,i)}}))})),!this.error_count}},{key:"isPassed",value:function(){return this.check()}}])&&Ke(t.prototype,n),r&&Ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function Qe(){Qe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),i=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=b(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function d(){}function f(){}function _(){}var p={};c(p,a,(function(){return this}));var m=Object.getPrototypeOf,h=m&&m(m(x([])));h&&h!==t&&n.call(h,a)&&(p=h);var g=_.prototype=d.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==Ze(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:z}}function z(){return{value:void 0,done:!0}}return f.prototype=_,c(g,"constructor",_),c(_,"constructor",f),f.displayName=c(_,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new y(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),c(g,i,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function et(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function tt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){et(o,r,a,i,c,"next",e)}function c(e){et(o,r,a,i,c,"throw",e)}i(void 0)}))}}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ct=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ot(this,e),this.validation_errors={},this.validation_rules={},this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.partial_fetch_time=0,(0,Xe.makeObservable)(this,{validation_errors:Xe.observable,validation_rules:Xe.observable,partial_fetch_time:Xe.observable,retrieveFromStorage:Xe.action,setValidationErrorMessages:Xe.action,setValidationRules:Xe.action,addRule:Xe.action,validateProperty:Xe.action,validateAllProperties:Xe.action,onSwitchAccount:Xe.action.bound,onPreSwitchAccount:Xe.action.bound,onLogout:Xe.action.bound,onClientInit:Xe.action.bound,onNetworkStatusChange:Xe.action.bound,onThemeChange:Xe.action.bound,onRealAccountSignupEnd:Xe.action.bound,disposePreSwitchAccount:Xe.action.bound,disposeSwitchAccount:Xe.action.bound,disposeLogout:Xe.action.bound,disposeClientInit:Xe.action.bound,disposeNetworkStatusChange:Xe.action.bound,disposeThemeChange:Xe.action.bound,disposeRealAccountSignupEnd:Xe.action.bound,onUnmount:Xe.action.bound,assertHasValidCache:Xe.action.bound});var n=t.root_store,r=t.local_storage_properties,a=t.session_storage_properties,o=t.validation_rules,i=t.store_name;Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0});var c=r&&r.length||a&&a.length;if(c){if(!i)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:i,enumerable:!1,writable:!1})}this.root_store=n,this.local_storage_properties=r||[],this.session_storage_properties=a||[],this.setValidationRules(o),this.setupReactionForLocalStorage(),this.setupReactionForSessionStorage(),this.retrieveFromStorage()}var t,n;return t=e,n=[{key:"getSnapshot",value:function(e){var t=(0,Xe.toJS)(this);return(0,s.isEmptyObject)(this.root_store)||(t.root_store=this.root_store),e&&e.length&&(t=e.reduce((function(e,n){return Object.assign(e,at({},n,t[n]))}),{})),t}},{key:"setupReactionForLocalStorage",value:function(){var t=this;this.local_storage_properties.length&&(0,Xe.reaction)((function(){return t.local_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.local_storage_properties,e.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var t=this;this.session_storage_properties.length&&(0,Xe.reaction)((function(){return t.session_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.session_storage_properties,e.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(t,n){var r=JSON.stringify(this.getSnapshot(t),(function(e,t){if(null!==t)return t}));n===e.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,r):n===e.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,r)}},{key:"retrieveFromStorage",value:function(){var e=this,t=JSON.parse(localStorage.getItem(this.store_name,{})),n=JSON.parse(sessionStorage.getItem(this.store_name,{})),r=rt(rt({},t),n);Object.keys(r).forEach((function(t){return e[t]=r[t]}))}},{key:"setValidationErrorMessages",value:function(e,t){var n=this;this.validation_errors[e]&&!n.validation_errors[e].filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!n.validation_errors[e].includes(t)}))).length||(this.validation_errors[e]=t)}},{key:"setValidationRules",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(n){e.addRule(n,t[n])}))}},{key:"addRule",value:function(e,t){var n=this;this.validation_rules[e]=t,(0,Xe.intercept)(this,e,(function(t){return n.validateProperty(e,t.newValue),t}))}},{key:"validateProperty",value:function(e,t){var n=this,r=this.validation_rules[e].trigger,a=at({},e,void 0!==t?t:this[e]),o=at({},e,this.validation_rules[e].rules||[]);r&&Object.hasOwnProperty.call(this,r)&&(a[r]=this[r],o[r]=this.validation_rules[r].rules||[]);var i=new $e(a,o,this);i.isPassed(),Object.keys(a).forEach((function(e){n.setValidationErrorMessages(e,i.errors.get(e))}))}},{key:"validateAllProperties",value:function(){var e=this,t=Object.keys(this.validation_rules),n=Object.keys(this.validation_errors);t.forEach((function(t){e.validateProperty(t,e[t])})),n.forEach((function(n){t.includes(n)||delete e.validation_errors[n]}))}},{key:"onSwitchAccount",value:function(e){var t=this;e&&(this.switch_account_listener=e,this.switchAccountDisposer=(0,Xe.when)((function(){return t.root_store.client.switch_broadcast}),(function(){try{var e=t.switch_account_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Switching account listeners are required to return a promise.");e.then((function(){t.root_store.client.switchEndSignal(),t.onSwitchAccount(t.switch_account_listener)}))}catch(e){(0,s.isProduction)()||console.error(e)}})))}},{key:"onPreSwitchAccount",value:function(e){var t=this;e&&(this.pre_switch_account_listener=e,this.preSwitchAccountDisposer=(0,Xe.when)((function(){return t.root_store.client.pre_switch_broadcast}),(function(){try{var e=t.pre_switch_account_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Pre-switch account listeners are required to return a promise.");e.then((function(){t.root_store.client.setPreSwitchAccount(!1),t.onPreSwitchAccount(t.pre_switch_account_listener)}))}catch(e){(0,s.isProduction)()||console.error(e)}})))}},{key:"onLogout",value:function(e){var t=this;this.logoutDisposer=(0,Xe.when)((function(){return t.root_store.client.has_logged_out}),tt(Qe().mark((function e(){var n;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=t.logout_listener())||!n.then||"function"!=typeof n.then){e.next=6;break}n.then((function(){t.root_store.client.setLogout(!1),t.onLogout(t.logout_listener)})),e.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,s.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.logout_listener=e}},{key:"onClientInit",value:function(e){var t=this;this.clientInitDisposer=(0,Xe.when)((function(){return t.root_store.client.initialized_broadcast}),tt(Qe().mark((function e(){var n;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=t.client_init_listener())||!n.then||"function"!=typeof n.then){e.next=6;break}n.then((function(){t.root_store.client.setInitialized(!1),t.onClientInit(t.client_init_listener)})),e.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,s.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.client_init_listener=e}},{key:"onNetworkStatusChange",value:function(e){var t=this;this.networkStatusChangeDisposer=(0,Xe.reaction)((function(){return t.root_store.common.is_network_online}),(function(e){try{t.network_status_change_listener(e)}catch(e){(0,s.isProduction)()||console.error(e)}})),this.network_status_change_listener=e}},{key:"onThemeChange",value:function(e){var t=this;this.themeChangeDisposer=(0,Xe.reaction)((function(){return t.root_store.ui.is_dark_mode_on}),(function(e){try{t.theme_change_listener(e)}catch(e){(0,s.isProduction)()||console.error(e)}})),this.theme_change_listener=e}},{key:"onRealAccountSignupEnd",value:function(e){var t=this;this.realAccountSignupEndedDisposer=(0,Xe.when)((function(){return t.root_store.ui.has_real_account_signup_ended}),(function(){try{var e=t.real_account_signup_ended_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Real account signup listeners are required to return a promise.");e.then((function(){t.root_store.ui.setRealAccountSignupEnd(!1),t.onRealAccountSignupEnd(t.real_account_signup_ended_listener)}))}catch(e){(0,s.isProduction)()||console.error(e)}})),this.real_account_signup_ended_listener=e}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(e){if(this.root_store.client.loginid!==e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(e){return e()})),this.partial_fetch_time=!1}}}],n&&it(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();ct.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")});var lt=function(e){var t={account_type:"",leverage:500,short_title:(0,d.localize)("Synthetic")},n={account_type:"financial",leverage:1e3,short_title:e?(0,d.localize)("CFDs"):(0,d.localize)("Financial")},r={account_type:"financial_stp",leverage:100,short_title:(0,d.localize)("Financial STP")};return{demo:{synthetic:{mt5_account_type:t.account_type,leverage:t.leverage,title:(0,d.localize)("Demo Synthetic"),short_title:t.short_title},financial:{mt5_account_type:n.account_type,leverage:n.leverage,title:e?(0,d.localize)("Demo CFDs"):(0,d.localize)("Demo Financial"),short_title:n.short_title},financial_stp:{mt5_account_type:r.account_type,leverage:r.leverage,title:(0,d.localize)("Demo Financial STP"),short_title:r.short_title}},real:{synthetic:{mt5_account_type:t.account_type,leverage:t.leverage,title:(0,d.localize)("Synthetic"),short_title:t.short_title},financial:{mt5_account_type:n.account_type,leverage:n.leverage,title:e?(0,d.localize)("CFDs"):(0,d.localize)("Financial"),short_title:n.short_title},financial_stp:{mt5_account_type:r.account_type,leverage:r.leverage,title:(0,d.localize)("Financial STP"),short_title:r.short_title}}}};function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ut(){ut=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),i=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=b(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function d(){}function f(){}function _(){}var p={};c(p,a,(function(){return this}));var m=Object.getPrototypeOf,h=m&&m(m(x([])));h&&h!==t&&n.call(h,a)&&(p=h);var g=_.prototype=d.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==st(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:z}}function z(){return{value:void 0,done:!0}}return f.prototype=_,c(g,"constructor",_),c(_,"constructor",f),f.displayName=c(_,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new y(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),c(g,i,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function dt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function ft(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){dt(o,r,a,i,c,"next",e)}function c(e){dt(o,r,a,i,c,"throw",e)}i(void 0)}))}}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}function yt(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bt(e)}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(e)}var Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(p,e);var t,n,r,a,o,i,c,l,u,f,_=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wt(e);if(t){var a=wt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return yt(this,n)}}(p);function p(e){var t,n=e.root_store;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=_.call(this,{root_store:n})).is_compare_accounts_visible=!1,t.account_type={category:void 0,type:void 0},t.new_account_response={},t.map_type={},t.has_cfd_error=!1,t.error_message="",t.is_cfd_success_dialog_enabled=!1,t.is_mt5_financial_stp_modal_open=!1,t.is_cfd_password_modal_enabled=!1,t.is_cfd_reset_password_modal_enabled=!1,t.is_cfd_pending_dialog_open=!1,t.current_account=void 0,t.error_type=void 0,(0,Xe.makeObservable)(bt(t),{is_compare_accounts_visible:Xe.observable,account_type:Xe.observable,new_account_response:Xe.observable,map_type:Xe.observable,has_cfd_error:Xe.observable,error_message:Xe.observable,is_cfd_success_dialog_enabled:Xe.observable,is_mt5_financial_stp_modal_open:Xe.observable,is_cfd_password_modal_enabled:Xe.observable,is_cfd_reset_password_modal_enabled:Xe.observable,is_cfd_pending_dialog_open:Xe.observable,current_account:Xe.observable,error_type:Xe.observable,has_cfd_account:Xe.computed,account_title:Xe.computed,current_list:Xe.computed,onMount:Xe.action.bound,onUnmount:Xe.override,checkShouldOpenAccount:Xe.action.bound,realAccountSignupEndListener:Xe.action.bound,resetFormErrors:Xe.action.bound,clearCFDError:Xe.action.bound,createCFDAccount:Xe.action.bound,disableCFDPasswordModal:Xe.action.bound,enableCFDPasswordModal:Xe.action.bound,getName:Xe.action.bound,openMT5Account:Xe.action.bound,openCFDAccount:Xe.action.bound,beginRealSignupForMt5:Xe.action.bound,enableMt5FinancialStpModal:Xe.action.bound,setAccountType:Xe.action.bound,setCurrentAccount:Xe.action.bound,setError:Xe.action.bound,setCFDNewAccount:Xe.action.bound,setCFDSuccessDialog:Xe.action.bound,storeProofOfAddress:Xe.action.bound,getAccountStatus:Xe.action.bound,creatMT5Password:Xe.action.bound,submitMt5Password:Xe.action.bound,createCFDPassword:Xe.action.bound,submitCFDPassword:Xe.action.bound,toggleCompareAccountsModal:Xe.action.bound,disableMt5FinancialStpModal:Xe.action.bound,topUpVirtual:Xe.action.bound,closeCFDPendingDialog:Xe.action.bound,openPendingDialog:Xe.action.bound,sendVerifyEmail:Xe.action.bound,setCFDPasswordResetModal:Xe.action.bound}),t}return t=p,n=[{key:"has_cfd_account",get:function(){return this.current_list.length>0}},{key:"account_title",get:function(){return this.account_type.category?lt(this.root_store.client.is_eu)[this.account_type.category][this.account_type.type].title:""}},{key:"current_list",get:function(){var e=[];return this.root_store.client.mt5_login_list.forEach((function(t){e[(0,s.getAccountListKey)(t,s.CFD_PLATFORMS.MT5)]=mt({},t)})),this.root_store.client.dxtrade_accounts_list.forEach((function(t){e[(0,s.getAccountListKey)(t,s.CFD_PLATFORMS.DXTRADE)]=mt({},t)})),e}},{key:"mt5_companies",get:function(){return lt(this.root_store.client.is_eu)}},{key:"dxtrade_companies",get:function(){return e={account_type:"",leverage:500,short_title:(0,d.localize)("Synthetic")},t={account_type:"financial",leverage:1e3,short_title:(0,d.localize)("Financial")},{demo:{synthetic:{dxtrade_account_type:e.account_type,leverage:e.leverage,title:(0,d.localize)("Demo Synthetic"),short_title:e.short_title},financial:{dxtrade_account_type:t.account_type,leverage:t.leverage,title:(0,d.localize)("Demo Financial"),short_title:t.short_title}},real:{synthetic:{dxtrade_account_type:e.account_type,leverage:e.leverage,title:(0,d.localize)("Synthetic"),short_title:e.short_title},financial:{dxtrade_account_type:t.account_type,leverage:t.leverage,title:(0,d.localize)("Financial"),short_title:t.short_title}}};var e,t}},{key:"onMount",value:function(){this.checkShouldOpenAccount(),this.onRealAccountSignupEnd(this.realAccountSignupEndListener),this.root_store.ui.is_cfd_page=!0}},{key:"onUnmount",value:function(){this.disposeRealAccountSignupEnd(),this.root_store.ui.is_cfd_page=!1}},{key:"checkShouldOpenAccount",value:function(){var e=sessionStorage.getItem("open_cfd_account_type");if(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("."),3),n=t[0],r=t[1],a=t[2];this.createCFDAccount({category:n,type:r,set_password:a}),sessionStorage.removeItem("open_cfd_account_type")}}},{key:"realAccountSignupEndListener",value:function(){var e=JSON.parse(sessionStorage.getItem("post_real_account_signup"));return e&&e.category&&e.type&&(sessionStorage.removeItem("post_real_account_signup"),this.enableCFDPasswordModal()),Promise.resolve()}},{key:"resetFormErrors",value:function(){this.error_message="",this.error_type=void 0,this.has_cfd_error=!1}},{key:"clearCFDError",value:function(){this.resetFormErrors(),this.is_cfd_password_modal_enabled=!1}},{key:"createCFDAccount",value:function(e){var t=e.category,n=e.type,r=e.set_password;this.clearCFDError(),this.setAccountType({category:t,type:n}),"real"===t?this.realCFDSignup(r):this.demoCFDSignup()}},{key:"demoCFDSignup",value:function(){this.enableCFDPasswordModal()}},{key:"disableCFDPasswordModal",value:function(){this.is_cfd_password_modal_enabled=!1}},{key:"enableCFDPasswordModal",value:function(){this.is_cfd_password_modal_enabled=!0}},{key:"getName",value:function(){var e=(this.root_store.client.account_settings&&this.root_store.client.account_settings).first_name,t=this.mt5_companies[this.account_type.category][this.account_type.type].title;return e?[e,t].join(" "):t}},{key:"openMT5Account",value:function(e){var t=this.getName(),n=this.mt5_companies[this.account_type.category][this.account_type.type].leverage,r=(0,s.getAccountTypeFields)(this.account_type);return s.WS.mt5NewAccount(mt(mt({mainPassword:e.password,email:this.root_store.client.email_address,leverage:n,name:t},e.server?{server:e.server}:{}),r))}},{key:"openCFDAccount",value:function(e){return s.WS.tradingPlatformNewAccount({password:e.password,platform:e.platform,account_type:this.account_type.category,market_type:this.account_type.type})}},{key:"beginRealSignupForMt5",value:function(){sessionStorage.setItem("post_real_account_signup",JSON.stringify(this.account_type)),this.root_store.ui.openRealAccountSignup()}},{key:"realCFDSignup",value:function(e){switch(this.account_type.type){case"financial":case"synthetic":this.enableCFDPasswordModal();break;case"financial_stp":this.root_store.client.fetchResidenceList(),this.root_store.client.fetchStatesList(),this.root_store.client.fetchAccountSettings(),e?this.enableCFDPasswordModal():this.enableMt5FinancialStpModal();break;default:throw new Error("Cannot determine mt5 account signup.")}}},{key:"enableMt5FinancialStpModal",value:function(){"real"===this.account_type.category&&"financial_stp"===this.account_type.type&&(this.is_mt5_financial_stp_modal_open=!0)}},{key:"setAccountType",value:function(e){this.account_type=e}},{key:"setCurrentAccount",value:function(e,t){this.current_account=mt(mt({},t),e)}},{key:"setError",value:function(e,t){var n;this.has_cfd_error=e,this.error_message=t?t.message:"",this.error_type=null!==(n=null==t?void 0:t.code)&&void 0!==n?n:void 0}},{key:"setCFDNewAccount",value:function(e){this.new_account_response=e}},{key:"setCFDSuccessDialog",value:function(e){this.is_cfd_success_dialog_enabled=!!e}},{key:"storeProofOfAddress",value:function(e,t,n){var r=this,a=n.setStatus;return new Promise((function(n,o){a({msg:""}),r.setState({is_btn_loading:!0}),s.WS.setSettings(t).then((function(t){t.error?(a({msg:t.error.message}),o(t)):(r.root_store.fetchAccountSettings(),e.current.upload().then((function(e){e.warning?(a({msg:e.message}),o(e)):s.WS.authorized.storage.getAccountStatus().then((function(e){var t=e.error,r=e.get_account_status;t&&o(t);var a=r.authentication.identity,i=!(a&&"none"===a.status);n({identity:a,has_poi:i})}))})))}))}))}},{key:"getAccountStatus",value:(f=ft(ut().mark((function e(t){return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t===s.CFD_PLATFORMS.MT5&&this.root_store.client.is_mt5_password_not_set||t===s.CFD_PLATFORMS.DXTRADE&&this.root_store.client.is_dxtrade_password_not_set)){e.next=4;break}return e.next=4,s.WS.getAccountStatus();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"creatMT5Password",value:(u=ft(ut().mark((function e(t,n){var r;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.WS.tradingPlatformPasswordChange({new_password:t.password,platform:s.CFD_PLATFORMS.MT5});case 2:if(!(r=e.sent).error){e.next=9;break}return this.setError(!0,r.error),n.resetForm({}),n.setSubmitting(!1),n.setStatus({success:!1}),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"submitMt5Password",value:(l=ft(ut().mark((function e(t,n){var r,a;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.root_store.client.is_mt5_password_not_set){e.next=6;break}return e.next=3,this.creatMT5Password(t,n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:return this.resetFormErrors(),e.next=9,this.openMT5Account(t);case 9:if((r=e.sent).error){e.next=30;break}return n.setStatus({success:!0}),n.setSubmitting(!1),this.setError(!1),this.setCFDSuccessDialog(!0),e.next=17,this.getAccountStatus(s.CFD_PLATFORMS.MT5);case 17:return e.next=19,s.WS.authorized.mt5LoginList();case 19:return a=e.sent,this.root_store.client.responseMt5LoginList(a),s.WS.transferBetweenAccounts(),e.t0=this.root_store.client,e.next=25,s.WS.tradingServers(s.CFD_PLATFORMS.MT5);case 25:e.t1=e.sent,e.t0.responseMT5TradingServers.call(e.t0,e.t1),this.setCFDNewAccount(r.mt5_new_account),e.next=36;break;case 30:return e.next=32,this.getAccountStatus(s.CFD_PLATFORMS.MT5);case 32:this.setError(!0,r.error),n.resetForm({}),n.setSubmitting(!1),n.setStatus({success:!1});case 36:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"createCFDPassword",value:(c=ft(ut().mark((function e(t,n){var r;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.WS.tradingPlatformPasswordChange({new_password:t.password,platform:s.CFD_PLATFORMS.DXTRADE});case 2:if(!(r=e.sent).error){e.next=9;break}return this.setError(!0,r.error),n.resetForm({}),n.setSubmitting(!1),n.setStatus({success:!1}),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"submitCFDPassword",value:(i=ft(ut().mark((function e(t,n){var r,a;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.root_store.client.is_dxtrade_password_not_set){e.next=6;break}return e.next=3,this.createCFDPassword(t,n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.openCFDAccount(t);case 8:if((r=e.sent).error){e.next=24;break}return n.setStatus({success:!0}),n.setSubmitting(!1),this.setError(!1),this.setCFDSuccessDialog(!0),e.next=16,this.getAccountStatus(s.CFD_PLATFORMS.DXTRADE);case 16:return e.next=18,s.WS.tradingPlatformAccountsList(t.platform);case 18:a=e.sent,this.root_store.client.responseTradingPlatformAccountsList(a),s.WS.transferBetweenAccounts(),this.setCFDNewAccount(r.trading_platform_new_account),e.next=30;break;case 24:return e.next=26,this.getAccountStatus(s.CFD_PLATFORMS.DXTRADE);case 26:this.setError(!0,r.error),n.resetForm({}),n.setSubmitting(!1),n.setStatus({success:!1});case 30:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"toggleCompareAccountsModal",value:function(){this.is_compare_accounts_visible=!this.is_compare_accounts_visible}},{key:"disableMt5FinancialStpModal",value:function(){this.is_mt5_financial_stp_modal_open=!1}},{key:"topUpVirtual",value:(o=ft(ut().mark((function e(t){var n,r,a,o,i=this;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.root_store.ui.setTopUpInProgress(!0),e.t0=t,e.next=e.t0===s.CFD_PLATFORMS.DXTRADE?4:e.t0===s.CFD_PLATFORMS.MT5?8:12;break;case 4:return e.next=6,s.WS.authorized.send({trading_platform_deposit:1,platform:s.CFD_PLATFORMS.DXTRADE,to_account:this.current_account.account_id});case 6:return n=e.sent,e.abrupt("break",14);case 8:return e.next=10,s.WS.authorized.mt5Deposit({to_mt5:this.current_account.login});case 10:return n=e.sent,e.abrupt("break",14);case 12:return n.error="Invalid platform",e.abrupt("break",14);case 14:if(n.error){e.next=31;break}e.t1=t,e.next=e.t1===s.CFD_PLATFORMS.DXTRADE?18:e.t1===s.CFD_PLATFORMS.MT5?22:26;break;case 18:return e.next=20,s.WS.authorized.tradingPlatformAccountsList(s.CFD_PLATFORMS.DXTRADE).then(this.root_store.client.responseTradingPlatformAccountsList);case 20:return r=null===(a=this.root_store.client.dxtrade_accounts_list.find((function(e){return e.account_id===i.current_account.account_id})))||void 0===a?void 0:a.balance,e.abrupt("break",27);case 22:return e.next=24,s.WS.authorized.mt5LoginList().then(this.root_store.client.responseMt5LoginList);case 24:return r=null===(o=this.root_store.client.mt5_login_list.find((function(e){return e.login===i.current_account.login})))||void 0===o?void 0:o.balance,e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:(0,Xe.runInAction)((function(){i.root_store.ui.is_top_up_virtual_open=!1,i.current_account.balance=r})),setTimeout((function(){(0,Xe.runInAction)((function(){i.root_store.ui.is_top_up_virtual_success=!0}))}),250),e.next=32;break;case 31:console.error(n);case 32:this.root_store.ui.setTopUpInProgress(!1);case 33:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"closeCFDPendingDialog",value:function(){this.is_cfd_pending_dialog_open=!1}},{key:"openPendingDialog",value:function(){var e=this;setTimeout((0,Xe.runInAction)((function(){e.is_cfd_pending_dialog_open=!0})),300)}},{key:"sendVerifyEmail",value:function(){return s.WS.verifyEmail(this.root_store.client.email,"trading_platform_investor_password_reset")}},{key:"setCFDPasswordResetModal",value:function(e){this.is_cfd_reset_password_modal_enabled=!!e}}],r=[{key:"changePassword",value:(a=ft(ut().mark((function e(t){var n,r,a,o,i,c;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.login,o=t.old_password,i=t.new_password,"investor"!==t.password_type){e.next=7;break}return e.next=4,s.WS.authorized.tradingPlatformInvestorPasswordChange({account_id:a,old_password:o,new_password:i,platform:s.CFD_PLATFORMS.MT5});case 4:c=e.sent,e.next=10;break;case 7:return e.next=9,s.WS.authorized.tradingPlatformPasswordChange({account_id:a,old_password:o,new_password:i,platform:s.CFD_PLATFORMS.MT5});case 9:c=e.sent;case 10:return e.abrupt("return",null===(n=c)||void 0===n||null===(r=n.error)||void 0===r?void 0:r.message);case 11:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})}],n&&gt(t.prototype,n),r&&gt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(ct);const St=function(e){var t=e.confirm_label,n=e.className,r=e.platform,a=e.onConfirm,i=e.onCancel;return o.createElement(z.J9,{initialValues:{password:""},onSubmit:a},(function(e){var a,c,l,f=e.isSubmitting,_=e.handleSubmit;return o.createElement("form",{onSubmit:_},o.createElement("div",{className:E()("cfd-change-password-confirmation__wrapper",(a={},c="".concat(n,"-wrapper"),l=n,c in a?Object.defineProperty(a,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[c]=l,a))},o.createElement("div",{className:E()("cfd-change-password-confirmation",n)},o.createElement(u.Icon,{className:"cfd-change-password__icon",icon:r===s.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),o.createElement(u.Text,{as:"p",align:"center",size:"s",weight:"bold"},o.createElement(d.Localize,{i18n_default_text:"Confirm to change your {{platform}} password",values:{platform:(0,s.getCFDPlatformLabel)(r)}})),o.createElement(u.Text,{className:"cfd-change-password-confirmation__description",as:"p",align:"center",color:"loss-danger",size:"xs"},o.createElement(d.Localize,{i18n_default_text:"This will change the password to all of your {{platform}} accounts.",values:{platform:(0,s.getCFDPlatformLabel)(r)}})),o.createElement(u.FormSubmitButton,{is_center:!0,label:t||(0,d.localize)("Create"),cancel_label:(0,d.localize)("Cancel"),is_loading:f,has_cancel:!0,onCancel:i}))))}))};var xt=function(e){var t=e.platform,n=e.onConfirm;return o.createElement("div",{className:"cfd-change-password"},o.createElement(u.Icon,{className:"cfd-change-password__icon",icon:t===s.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),o.createElement(u.Text,{as:"p",align:"center",size:"s",weight:"bold"},o.createElement(d.Localize,{i18n_default_text:"{{platform}} password",values:{platform:(0,s.getCFDPlatformLabel)(t)}})),o.createElement(u.Text,{as:"p",align:"center",className:"cfd-change-password__description",size:"xs"},t===s.CFD_PLATFORMS.MT5?o.createElement(d.Localize,{i18n_default_text:"Use this password to log in to your DMT5 accounts on the desktop, web, and mobile apps."}):o.createElement(d.Localize,{i18n_default_text:"Use this password to log in to your Deriv X accounts on the web and mobile apps."})),o.createElement(u.Button,{className:"dc-btn dc-btn--primary dc-btn__large dc-modal__container_cfd-reset-password-modal__button",onClick:n},o.createElement(u.Text,{size:"xs",weight:"bold",color:"colored-background"},o.createElement(d.Localize,{i18n_default_text:"Change {{platform}} password",values:{platform:(0,s.getCFDPlatformLabel)(t)}}))))},zt=function(e){var t=e.email,n=e.platform,r=e.account_group,a=o.useCallback((function(){var e=n===s.CFD_PLATFORMS.MT5?1:2;"real"===r?e=Number("".concat(e,"0")):"demo"===r&&(e=Number("".concat(e,"1")));var a=n===s.CFD_PLATFORMS.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";s.WS.verifyEmail(t,a,{url_parameters:{redirect_to:e}})}),[t,n,r]);return o.useEffect((function(){a()}),[a]),o.createElement(u.SendEmailTemplate,{title:(0,d.localize)("We've sent you an email"),subtitle:(0,d.localize)("Please click on the link in the email to change your {{platform}} password.",{platform:(0,s.getCFDPlatformLabel)(n)}),lbl_no_receive:(0,d.localize)("Didn't receive the email?"),txt_resend:(0,d.localize)("Resend email"),txt_resend_in:(0,d.localize)("Resend email in"),onClickSendEmail:a})};const Ot=function(e){var t=e.platform,n=e.email,r=e.account_group,a=o.useRef(),i=[{component:o.createElement(xt,{platform:t,onConfirm:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.goNextStep()}})},{component:o.createElement(St,{confirm_label:(0,d.localize)("Confirm"),platform:t,onConfirm:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.goNextStep()},onCancel:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.goPrevStep()}})},{component:o.createElement(zt,{platform:t,email:n,account_group:r})}];return o.createElement("div",{className:"cfd-trading-password"},o.createElement(u.MultiStep,{ref:a,steps:i}))};function Pt(){return Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pt.apply(this,arguments)}var kt=function(e){var t=e.toggleModal,n=e.is_investor;return o.createElement("div",{className:"cfd-password-manager__success"},o.createElement(u.Icon,{icon:"IcPasswordUpdated",size:128}),o.createElement(u.Text,{as:"p",size:"xxs",align:"center"},n?o.createElement(d.Localize,{i18n_default_text:"Your investor password has been changed."}):o.createElement(d.Localize,{i18n_default_text:"Your password has been changed."})),o.createElement(u.Button,{onClick:t,className:"cfd-password-manager__success-btn",primary:!0,large:!0},o.createElement("p",{className:"dc-btn__text"},(0,d.localize)("OK"))))};const Dt=function(e){var t=e.error_message_investor,n=e.is_submit_success_investor,r=e.multi_step_ref,a=e.onSubmit,i=e.setPasswordType,c=e.toggleModal,l=e.validatePassword;if(n)return o.createElement(kt,{toggleModal:c,is_investor:!0});var f={old_password:"",new_password:"",password_type:"".concat("investor")};return o.createElement("div",{className:"cfd-password-manager__investor-wrapper"},o.createElement(u.Text,{as:"p",size:"xs",className:"cfd-password-manager--paragraph"},o.createElement(d.Localize,{i18n_default_text:"Use this password to grant viewing access to another user. While they may view your trading account, they will not be able to trade or take any other actions."})),o.createElement(u.Text,{as:"p",size:"xs",className:"cfd-password-manager--paragraph"},o.createElement(d.Localize,{i18n_default_text:"If this is the first time you try to create a password, or you have forgotten your password, please reset it."})),t&&o.createElement(u.Text,{as:"p",color:"loss-danger",size:"xs",className:"cfd-password-manager--error-message"},t),o.createElement(z.J9,{initialValues:f,validate:l,onSubmit:a},(function(e){var t=e.isSubmitting,n=e.errors,a=e.setFieldTouched,c=e.values,l=e.touched;return o.createElement(z.l0,{className:"cfd-password-manager__investor-form",noValidate:!0},o.createElement(z.gN,{name:"old_password"},(function(e){var t=e.field;return o.createElement(u.PasswordInput,Pt({},t,{autoComplete:"current-password",label:(0,d.localize)("Current investor password"),error:l.old_password&&n.old_password,required:!0}))})),o.createElement(z.gN,{name:"new_password"},(function(e){var t=e.field;return o.createElement(u.PasswordMeter,{input:t.value,has_error:!(!l.new_password||!n.new_password),custom_feedback_messages:(0,s.getErrorMessages)().password_warnings},(function(e){var r=e.has_warning;return o.createElement(u.PasswordInput,Pt({},t,{autoComplete:"new-password",label:(0,d.localize)("New investor password"),hint:!r&&(0,d.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),error:l.new_password&&n.new_password,onChange:function(e){a("new_password",!0,!0),t.onChange(e)},className:"cfd-password-manager__new-password",required:!0}))}))})),o.createElement("div",{className:"cfd-password-manager__actions"},o.createElement(u.Button,{className:"cfd-password-manager--button",is_disabled:t||!c.old_password||!c.new_password||Object.keys(n).length>0,is_loading:t,text:(0,d.localize)("Change investor password"),primary:!0,large:!0}),o.createElement(u.Button,{className:"cfd-password-manager--button",type:"button",onClick:function(){var e;i("investor"),null===(e=r.current)||void 0===e||e.goNextStep()},text:(0,d.localize)("Create or reset investor password"),tertiary:!0,large:!0})))})))};function At(e){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(e)}function Tt(){Tt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),i=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return{value:void 0,done:!0}}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=b(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),o}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function d(){}function f(){}function _(){}var p={};c(p,a,(function(){return this}));var m=Object.getPrototypeOf,h=m&&m(m(x([])));h&&h!==t&&n.call(h,a)&&(p=h);var g=_.prototype=d.prototype=Object.create(p);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(a,o,i,c){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==At(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:z}}function z(){return{value:void 0,done:!0}}return f.prototype=_,c(g,"constructor",_),c(_,"constructor",f),f.displayName=c(_,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},v(y.prototype),c(y.prototype,o,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new y(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(g),c(g,i,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){Ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rt=function(e){var t=e.count_from,n=void 0===t?60:t,r=e.onTimeout,a=Nt(o.useState(n),2),i=a[0],c=a[1];return o.useEffect((function(){if(0!==i){var e=setTimeout((function(){c(i-1)}),1e3);return function(){return clearTimeout(e)}}r()}),[i]),o.createElement("span",{className:"countdown"},i)},It=function(e){var t=e.sendVerifyEmail,n=e.account_type,r=e.account_group,a=e.server,i=e.password_type,c=Nt(o.useState(!1),2),l=c[0],s=c[1],f=Nt(o.useState(!1),2),_=f[0],p=f[1];return o.useEffect((function(){localStorage.setItem("cfd_reset_password_intent",[a,r,n].join(".")),localStorage.setItem("cfd_reset_password_type",i),t()}),[]),o.createElement("div",{className:"cfd-verification-email-sent"},o.createElement(u.Icon,{icon:"IcEmailSent",size:128}),o.createElement("h2",{className:"cfd-verification-email-sent__title"},o.createElement(d.Localize,{i18n_default_text:"We've sent you an email"})),o.createElement(u.Text,{as:"p",size:"xs",align:"center"},o.createElement(d.Localize,{i18n_default_text:"Please click on the link in the email to reset your password."})),!l&&o.createElement(u.Button,{className:"cfd-verification-email-sent__resend-button",primary:!0,onClick:function(){s(!0)}},o.createElement(d.Localize,{i18n_default_text:"Didn't receive the email?"})),l&&o.createElement(o.Fragment,null,o.createElement(u.Text,{as:"p",size:"xs",align:"center",weight:"bold",className:"cfd-verification-email-sent__title--sub"},o.createElement(d.Localize,{i18n_default_text:"Didn't receive the email?"})),o.createElement(u.Text,{as:"p",size:"xs",align:"center"},o.createElement(d.Localize,{i18n_default_text:"Check your spam or junk folder. If it's not there, try resending the email."})),o.createElement(u.Button,{className:"cfd-verification-email-sent__resend-button",large:!0,primary:!0,disabled:_,onClick:function(){t(),p(!0)}},!_&&o.createElement(d.Localize,{i18n_default_text:"Resend email"}),_&&o.createElement(o.Fragment,null,o.createElement(d.Localize,{i18n_default_text:"Resend in <0 /> seconds",components:[o.createElement(Rt,{key:0,onTimeout:function(){return p(!1)},count_from:60})]})))))},Wt=function(e){var t=e.multi_step_ref,n=e.steps;return o.createElement(u.MultiStep,{ref:t,steps:n,className:"cfd-password-manager",lbl_previous:(0,d.localize)("Back")})},Ut=function(e){var t=e.toggleModal,n=e.selected_login,r=e.email,a=e.setPasswordType,i=e.multi_step_ref,c=e.platform,l=e.onChangeActiveTabIndex,f=e.account_group,_=Nt(o.useState(0),2),p=_[0],m=_[1],h=Nt(o.useState(""),2),g=h[0],v=h[1],y=Nt(o.useState(!1),2),b=y[0],w=y[1],E="calc(100vh - 84px - 5.6rem - 8.8rem - 4rem)",S=function(e){var t={};return(0,s.validLength)(e.new_password,{min:8,max:25})?(0,s.validPassword)(e.new_password)?e.new_password.toLowerCase()===r.toLowerCase()&&(t.new_password=(0,d.localize)("Your password cannot be the same as your email address.")):t.new_password=(0,s.getErrorMessages)().password():t.new_password=(0,d.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.old_password||void 0===e.old_password||(t.old_password=(0,d.localize)("This field is required")),t},x=o.useCallback(function(){var e,t=(e=Tt().mark((function e(t){var r;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Et.changePassword(Mt({login:n},t));case 4:(r=e.sent)?v(r):(v(""),w(!0));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Lt(o,r,a,i,c,"next",e)}function c(e){Lt(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[n]),z=o.createElement(o.Fragment,null,o.createElement(u.DesktopWrapper,null,o.createElement(u.ThemedScrollbars,{height:E,is_bypassed:(0,s.isMobile)(),autohide:!1},o.createElement(Ot,{toggleModal:t,platform:c,email:r,account_group:f}))),o.createElement(u.MobileWrapper,null,o.createElement(u.Div100vhContainer,{className:"cfd-password-manager__scroll-wrapper",height_offset:"120px"},o.createElement(Ot,{toggleModal:t,platform:c,email:r,account_group:f}))));return c===s.CFD_PLATFORMS.DXTRADE?z:o.createElement(u.Tabs,{active_index:p,onTabItemClick:function(e){m(e),l(e),v(""),w(!1)},top:!0},o.createElement("div",{label:(0,d.localize)("{{platform}} password",{platform:(0,s.getCFDPlatformLabel)(c)})},z),o.createElement("div",{label:(0,d.localize)("Investor password")},o.createElement(u.DesktopWrapper,null,o.createElement(u.ThemedScrollbars,{height:E},o.createElement(Dt,{is_submit_success_investor:b,toggleModal:t,error_message_investor:g,validatePassword:S,onSubmit:x,setPasswordType:a,multi_step_ref:i}))),o.createElement(u.MobileWrapper,null,o.createElement(u.Div100vhContainer,{className:"cfd-password-manager__scroll-wrapper",height_offset:"120px"},o.createElement(Dt,{is_submit_success_investor:b,toggleModal:t,error_message_investor:g,validatePassword:S,onSubmit:x,setPasswordType:a,multi_step_ref:i})))))},Bt=function(e){var t=e.enableApp,n=e.email,r=e.disableApp,a=e.is_visible,i=e.platform,c=e.selected_login,l=e.selected_account,f=e.toggleModal,_=e.selected_account_type,p=e.selected_account_group,m=e.selected_server,h=e.sendVerifyEmail,g=o.useRef(),v=Nt(o.useState(0),2),y=v[0],b=v[1],w=Nt(o.useState("main"),2),E=w[0],S=w[1];if(!c)return null;var x,z=[{component:o.createElement(Ut,{email:n,selected_login:c,toggleModal:f,setPasswordType:S,multi_step_ref:g,platform:i,onChangeActiveTabIndex:function(e){b(e)},account_group:p})},{component:o.createElement(It,{server:m,sendVerifyEmail:h,account_type:_,account_group:p,password_type:E})}];return o.createElement(o.Suspense,{fallback:o.createElement(u.UILoader,null)},o.createElement(u.DesktopWrapper,null,o.createElement(u.Modal,{className:"cfd-password-manager__modal",disableApp:r,enableApp:t,is_open:a,title:(x=y,0===x?(0,d.localize)("Manage {{platform}} password",{platform:(0,s.getCFDPlatformLabel)(i)}):"real"===p?(0,d.localize)("Manage {{platform}} Real {{account_title}} account password",{platform:(0,s.getCFDPlatformLabel)(i),account_title:l}):(0,d.localize)("Manage {{platform}} Demo {{account_title}} account password",{platform:(0,s.getCFDPlatformLabel)(i),account_title:l})),toggleModal:f,height:"688px",width:"904px",should_header_stick_body:!1},o.createElement(Wt,{steps:z,multi_step_ref:g}))),o.createElement(u.MobileWrapper,null,o.createElement(u.PageOverlay,{is_open:a,portal_id:"deriv_app",header:function(e){return 0===e?(0,d.localize)("Manage {{platform}} password",{platform:(0,s.getCFDPlatformLabel)(i)}):(0,d.localize)("Manage password")}(y),onClickClose:f},o.createElement(Wt,{steps:z,multi_step_ref:g}))))};Bt.propTypes={email:a().string,is_visible:a().bool,selected_account:a().string,selected_server:a().string,selected_login:a().string,toggleModal:a().func,platform:a().string};const Vt=y((function(e){var t=e.modules.cfd,n=e.client,r=e.ui;return{email:n.email,enableApp:r.enableApp,disableApp:r.disableApp,sendVerifyEmail:t.sendVerifyEmail}}))(Bt);var Gt=n("@deriv/account/dist/account/js/sent-email-modal"),Xt=n.n(Gt);function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qt.apply(this,arguments)}var Yt=function(e){var t=e.className;return o.createElement(u.Icon,{className:t,icon:"IcCheckmarkCircle",custom_color:"var(--status-success)",size:24})},Ht=function(e){var t=e.classNameMessage,n=void 0===t?"":t,r=e.has_cancel,a=e.has_submit,i=e.icon,c=e.message,l=e.onCancel,s=e.onSubmit,f=e.heading,_=e.icon_size,p=e.text_submit,m=e.text_cancel,h=e.is_open,g=e.toggleModal,v=e.title,y=e.has_close_icon,b=e.width,w=void 0===b?"":b,S=e.is_medium_button;return o.createElement(u.Modal,{className:"cfd-success-dialog",is_open:h,toggleModal:g,has_close_icon:y,small:!v,title:v,width:w},o.createElement(u.Modal.Body,null,o.createElement("div",{className:E()("success-change__icon-area",{"success-change__icon-area--large":"large"===_,"success-change__icon-area--xlarge":"xlarge"===_})},i,o.createElement(Yt,{className:"bottom-right-overlay"})),!f&&o.createElement(u.Text,{as:"h2",weight:"bold",size:"s",className:"dc-modal-header__title"},o.createElement(d.Localize,{i18n_default_text:"Success!"})),f&&f,o.isValidElement(c)&&c,!o.isValidElement(c)&&o.createElement("p",{className:n},c)),o.createElement(u.Modal.Footer,null,r&&o.createElement(u.Button,qt({onClick:l,has_effect:!0,text:m||(0,d.localize)("Maybe later"),secondary:!0},S?{medium:!0}:{large:!0})),a&&o.createElement(u.Button,qt({has_effect:!0,onClick:s,text:p,primary:!0},S?{medium:!0}:{large:!0}))))};Ht.defaultProps={icon_size:"large",has_cancel:!1,has_submit:!0},Ht.propTypes={classNameMessage:a().string,has_cancel:a().bool,has_submit:a().bool,heading:a().oneOfType([a().string,a().object]),icon:a().object,icon_size:a().string,icon_type:a().string,is_medium_button:a().bool,message:a().oneOfType([a().string,a().object]),onCancel:a().func,onSubmit:a().func,text_cancel:a().string,text_submit:a().string,title:a().string,width:a().string};const Jt=Ht;function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qt(){return Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qt.apply(this,arguments)}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||tn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){if(e){if("string"==typeof e)return nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rn=function(e){var t=e.should_set_trading_password,n=e.should_show_server_form,r=e.account_title,a=e.is_password_reset_error,i=e.platform,c=(0,s.isMobile)()?"p":"span",l=(0,s.isMobile)()?{padding:"2rem"}:{};return o.createElement(u.Text,{styles:l,as:c,line_height:"m",weight:"bold",size:"s",align:"center"},!n&&!t&&!a&&o.createElement(d.Localize,{i18n_default_text:"Enter your {{platform}} password",values:{platform:(0,s.getCFDPlatformLabel)(i)}}),!n&&a&&o.createElement(d.Localize,{i18n_default_text:"Too many attempts"}),n&&o.createElement(d.Localize,{i18n_default_text:"Choose a region for your DMT5 real {{ account_type }} account",values:{account_type:r}}))},an=function(e,t,n,r,a){if(!a&&!r)return"";var i="real"===a?(0,d.localize)("real"):(0,d.localize)("demo"),c=lt(t)[a][r].short_title;return"real"===a?n?(0,d.localize)("We need proof of your identity and address before you can start trading."):o.createElement(d.Localize,{i18n_default_text:"Congratulations, you have successfully created your {{category}} <0>{{platform}}</0> <1>{{type}}</1> account. To start trading, transfer funds from your Deriv account into this account.",values:{type:c,platform:(0,s.getCFDPlatformLabel)(e),category:i},components:[o.createElement("i",{className:"cfd-account__platform",key:0}),o.createElement("strong",{key:1})]}):o.createElement(d.Localize,{i18n_default_text:"Congratulations, you have successfully created your {{category}} <0>{{platform}}</0> <1>{{type}}</1> account.",values:{type:c,platform:(0,s.getCFDPlatformLabel)(e),category:i},components:[o.createElement("i",{className:"cfd-account__platform",key:0}),o.createElement("strong",{key:1})]})},on=o.memo((function(e){var t=e.platform,n=e.type,r=e.is_eu;if(t===s.CFD_PLATFORMS.DXTRADE){if("synthetic"===n)return o.createElement(u.Icon,{icon:"IcDxtradeSyntheticPlatform",size:128});if("financial"===n)return o.createElement(u.Icon,{icon:"IcDxtradeFinancialPlatform",size:128})}switch(n){case"synthetic":return o.createElement(u.Icon,{icon:"IcMt5SyntheticPlatform",size:128});case"financial":return r?o.createElement(u.Icon,{icon:"IcMt5Cfds",size:128}):o.createElement(u.Icon,{icon:"IcMt5FinancialPlatform",size:128});default:return o.createElement(u.Icon,{icon:"IcMt5FinancialStpPlatform",size:128})}}));on.displayName="IconType";var cn=function(e,t,n,r){t(e),n().then((function(){r("password",!0)}))},ln=function(e){var t=e.password,n=e.platform,r=e.validatePassword,a=e.onSubmit,i=e.error_message,c=e.is_real_financial_stp;return o.createElement(z.J9,{initialValues:{password:t},enableReinitialize:!0,validate:r,onSubmit:a},(function(e){var t=e.errors,r=e.isSubmitting,a=e.handleBlur,l=e.handleChange,f=e.handleSubmit,_=e.setFieldTouched,p=e.touched,m=e.values,h=e.validateForm;return o.createElement("form",{onSubmit:f},o.createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body cfd-password-modal__create-password-content"},o.createElement(u.Icon,{icon:n===s.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),o.createElement(u.Text,{size:"s",weight:"bold",className:"cfd-password-modal__create-password-title"},o.createElement(d.Localize,{i18n_default_text:"Create a {{platform}} password",values:{platform:(0,s.getCFDPlatformLabel)(n)}})),o.createElement(u.Text,{size:"xs",align:"center",className:"cfd-password-modal__create-password-description"},o.createElement(d.Localize,{i18n_default_text:"You can use this password for all your {{platform}} accounts.",values:{platform:(0,s.getCFDPlatformLabel)(n)}})),o.createElement("div",{className:"input-element"},o.createElement(u.PasswordMeter,{input:m.password,has_error:!(!p.password||!t.password),custom_feedback_messages:(0,s.getErrorMessages)().password_warnings},(function(){return o.createElement(u.PasswordInput,{autoComplete:"new-password",label:(0,d.localize)("{{platform}} password",{platform:(0,s.getCFDPlatformLabel)(n)}),error:p.password&&t.password||(0===m.password.length?i:""),name:"password",value:m.password,onBlur:a,onChange:function(e){cn(e,l,h,_)}})}))),c&&o.createElement("div",{className:"dc-modal__container_cfd-password-modal__description"},o.createElement(d.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through Deriv (FX) Ltd. All trading in this account is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA). None of your other accounts, including your Deriv account, is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA)."})),o.createElement(u.FormSubmitButton,{is_disabled:!m.password||Object.keys(t).length>0,is_loading:r,label:(0,d.localize)("Create {{platform}} password",{platform:(0,s.getCFDPlatformLabel)(n)}),is_center:!0})))}))},sn=function(e){var t=e.has_mt5_account,n=e.platform,r=e.error_message,a=e.validatePassword,i=e.submitPassword,c=e.is_real_financial_stp,l=o.useRef(),d=en(o.useState(""),2),f=d[0],_=d[1],p=[{component:o.createElement(ln,{password:f,platform:n,error_message:r,validatePassword:a,onSubmit:function(e,r){var a;n===s.CFD_PLATFORMS.MT5&&t?(_(e.password),null===(a=l.current)||void 0===a||a.goNextStep()):i(e,r)},is_real_financial_stp:c})},{component:o.createElement(St,{className:"cfd-password-modal__change-password-confirmation",platform:n,onConfirm:function(e,t){return i({password:f},t)},onCancel:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.goPrevStep()}})}];return o.createElement(u.MultiStep,{ref:l,steps:p})},un=function(e){var t,n,r,a,i=o.useMemo((function(){return e.should_show_server_form?(0,d.localize)("Next"):"PasswordReset"===e.error_type?(0,d.localize)("Try later"):(0,d.localize)("Add account")}),[e.should_show_server_form,e.error_type]),c=e.should_show_server_form||!(0,s.isDesktop)()||!e.should_set_trading_password||"PasswordReset"===e.error_type,l=(n=(t=e).should_set_trading_password,r=t.error_type,a=t.should_show_server_form,n&&"PasswordReset"!==r?(0,s.isDesktop)()?null:(0,d.localize)("Cancel"):a?(0,d.localize)("Back"):(0,d.localize)("Forgot password?")),f=function(){if(c)return e.should_set_trading_password?e.onCancel():e.onForgotPassword()};return"PasswordReset"===e.error_type?o.createElement(o.Fragment,null,o.createElement("div",{className:"cfd-password-reset"},o.createElement("div",{className:"cfd-password-modal__content cfd-password-modal__content--password-reset"},o.createElement(u.Text,{as:"p",line_height:"24",size:"xs"},o.createElement(d.Localize,{i18n_default_text:"Please try again in a minute."}))),o.createElement(z.J9,{onSubmit:e.closeModal,initialValues:{}},(function(e){var t=e.handleSubmit;return o.createElement("form",{onSubmit:t},o.createElement(u.FormSubmitButton,{has_cancel:c,cancel_label:l,onCancel:f,is_absolute:(0,s.isMobile)(),label:i}))})))):e.should_set_trading_password?o.createElement(sn,{platform:e.platform,error_message:e.error_message,validatePassword:e.validatePassword,submitPassword:e.submitPassword,has_mt5_account:e.has_mt5_account,is_real_financial_stp:e.is_real_financial_stp}):o.createElement(z.J9,{initialValues:{password:""},enableReinitialize:!0,validate:e.validatePassword,onSubmit:e.submitPassword},(function(t){var n=t.errors,r=t.isSubmitting,a=t.handleBlur,_=t.handleChange,p=t.handleSubmit,m=t.setFieldTouched,h=t.touched,g=t.values,v=t.validateForm;return o.createElement("form",{onSubmit:p},o.createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body"},!e.should_set_trading_password&&o.createElement(u.Text,{size:"xs",className:"dc-modal__container_cfd-password-modal__account-title"},o.createElement(d.Localize,{i18n_default_text:"Enter your {{platform}} password to add a {{platform}} {{account}} account.",values:{platform:(0,s.getCFDPlatformLabel)(e.platform),account:e.account_title}})),o.createElement("div",{className:"input-element"},o.createElement(u.PasswordInput,{autoComplete:"new-password",label:(0,d.localize)("{{platform}} password",{platform:(0,s.getCFDPlatformLabel)(e.platform)}),error:h.password&&n.password||(0===g.password.length?e.error_message:""),name:"password",value:g.password,onBlur:a,onChange:function(e){cn(e,_,v,m)}})),e.is_real_financial_stp&&o.createElement("div",{className:"dc-modal__container_cfd-password-modal__description"},o.createElement(d.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through {{legal_entity_name}}. All trading in this account is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA). None of your other accounts, including your Deriv account, is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA).",values:{legal_entity_name:(0,s.getLegalEntityName)("fx")}})),"PasswordError"===e.error_type&&o.createElement(u.Text,{size:"xs",as:"p",className:"dc-modal__container_mt5-password-modal__hint"},o.createElement(d.Localize,{i18n_default_text:"Hint: You may have entered your Deriv password, which is different from your {{platform}} password.",values:{platform:(0,s.getCFDPlatformLabel)(e.platform)}}))),o.createElement(u.FormSubmitButton,{is_disabled:!g.password,has_cancel:c,cancel_label:l,onCancel:f,is_absolute:(0,s.isMobile)(),is_loading:r,label:i,is_center:e.should_set_trading_password,form_error:e.form_error}))}))},dn=function(e){var t=e.show_warning,n=void 0===t||t,r=e.platform;return n?o.createElement("div",{className:"cfd-password-modal__warning"},o.createElement(u.Text,{as:"p",className:"cfd-password-modal__warning-text",lineHeight:"l",size:"xxs",color:"prominent",weight:"normal",align:"center"},o.createElement(d.Localize,{i18n_default_text:"Due to an issue on our server, some of your {{platform}} accounts are unavailable at the moment. Please bear with us and thank you for your patience.",values:{platform:r===s.CFD_PLATFORMS.MT5?"DMT5":"Deriv X"}}))):null},fn=function(e){var t,n,r=Qt({},e),a=o.useMemo((function(){return function(e){return function(e){if(Array.isArray(e))return nn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.mt5_trading_servers).map((function(e){var t,n,r,a=1===(null===(t=e.geolocation)||void 0===t?void 0:t.sequence)?"":null===(n=e.geolocation)||void 0===n?void 0:n.sequence,o=e.disabled?"(".concat(e.message_to_client,")"):"";return $t($t({},e),{label:"".concat(null===(r=e.geolocation)||void 0===r?void 0:r.region," ").concat(a," ").concat(o),value:e.id,disabled:e.disabled})})).sort((function(e,t){return e.recommended?-1:1})).sort((function(e,t){return(e.disabled?e.disabled:0)-(t.disabled?t.disabled:0)}))}),[r.mt5_trading_servers]);return o.createElement(o.Fragment,null,o.createElement(dn,{platform:r.platform,show_warning:r.has_error}),o.createElement(z.J9,{initialValues:{server:null!==(t=null===(n=r.mt5_trading_servers.find((function(e){return!e.disabled})))||void 0===n?void 0:n.id)&&void 0!==t?t:""},validate:r.validateServer,onSubmit:function(e){return r.submitMt5Server(e.server)}},(function(e){var t,n=e.handleSubmit,i=e.setFieldValue,c=e.errors,l=e.values,f=e.isSubmitting;return o.createElement("form",{onSubmit:n},o.createElement("div",{className:"cfd-password-modal__content"},o.createElement("div",{className:"dc-modal__container_cfd-password-modal__body"},o.createElement("div",{className:"input-element"},o.createElement(u.RadioGroup,{className:"cfd-password-modal__radio",name:"server",required:!0,selected:null===(t=r.mt5_trading_servers.find((function(e){return!e.disabled})))||void 0===t?void 0:t.id,onToggle:function(e){e.persist(),i("server",e.target.value)}},a.map((function(e){return o.createElement(u.RadioGroup.Item,{key:e.value,label:e.label,value:e.value,disabled:e.disabled})})))))),o.createElement(u.FormSubmitButton,{is_disabled:f||!l.server||Object.keys(c).length>0,has_cancel:!0,cancel_label:(0,d.localize)("Cancel"),onCancel:r.closeModal,is_absolute:(0,s.isMobile)(),is_loading:f,label:(0,d.localize)("Next"),form_error:r.form_error}))})))};const _n=y((function(e){var t=e.client,n=e.modules;return{email:t.email,account_title:n.cfd.account_title,account_type:n.cfd.account_type,account_status:t.account_status,disableCFDPasswordModal:n.cfd.disableCFDPasswordModal,error_message:n.cfd.error_message,error_type:n.cfd.error_type,getAccountStatus:n.cfd.getAccountStatus,has_cfd_error:n.cfd.has_cfd_error,landing_companies:t.landing_companies,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_logged_in:t.is_logged_in,is_cfd_success_dialog_enabled:n.cfd.is_cfd_success_dialog_enabled,is_cfd_password_modal_enabled:n.cfd.is_cfd_password_modal_enabled,is_dxtrade_allowed:t.is_dxtrade_allowed,setMt5Error:n.cfd.setError,setCFDSuccessDialog:n.cfd.setCFDSuccessDialog,submitMt5Password:n.cfd.submitMt5Password,submitCFDPassword:n.cfd.submitCFDPassword,cfd_new_account:n.cfd.new_account_response,mt5_trading_servers:t.mt5_trading_servers,mt5_login_list:t.mt5_login_list,is_fully_authenticated:t.is_fully_authenticated}}))((0,c.withRouter)((function(e){var t,n,r=e.account_title,a=e.account_type,i=e.account_status,c=e.disableCFDPasswordModal,l=e.email,f=e.error_message,_=e.error_type,p=e.form_error,m=e.getAccountStatus,h=e.history,g=e.is_eu,v=e.is_eu_country,y=e.is_fully_authenticated,b=e.is_logged_in,w=e.is_cfd_password_modal_enabled,E=e.is_cfd_success_dialog_enabled,S=e.is_dxtrade_allowed,x=e.platform,z=e.has_cfd_error,O=e.has_suspended_account,P=e.landing_companies,k=e.mt5_login_list,D=e.cfd_new_account,A=e.setCFDSuccessDialog,T=e.setMt5Error,F=e.submitMt5Password,M=e.submitCFDPassword,C=e.mt5_trading_servers,L=en(o.useState(""),2),N=L[0],j=L[1],R=en(o.useState(!0),2),I=R[0],W=R[1],U="bvi"===(null==P||null===(t=P.mt_financial_company)||void 0===t||null===(n=t.financial_stp)||void 0===n?void 0:n.shortcode),B=Boolean(null==k?void 0:k.length),V=Array.isArray(null==i?void 0:i.status)&&i.status.includes(x===s.CFD_PLATFORMS.MT5?"mt5_password_not_set":"dxtrade_password_not_set"),G="PasswordError"===_,X="PasswordReset"===_,q=en(o.useState(!1),2),Y=q[0],H=q[1],J=function(){A(!1),T(!1),setTimeout((function(){return j("")}),300)},K=function(){J(),c()},$=function(){K();var e=x===s.CFD_PLATFORMS.MT5?1:2;"real"===a.category?e=Number("".concat(e,"0")):"demo"===a.category&&(e=Number("".concat(e,"1")));var t=x===s.CFD_PLATFORMS.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";s.WS.verifyEmail(l,t,{url_parameters:{redirect_to:e}}),H(!0)},Z=w&&!E&&(!z||G||X),Q=!z&&E&&w&&I,ee=Y&&I,te="real_financial_stp"===[a.category,a.type].join("_"),ne="real_synthetic"===[a.category,a.type].join("_"),re=o.useMemo((function(){return(b?!g:!v)&&ne&&k.some((function(e){return"real"===e.account_type&&("gaming"===e.market_type||"synthetic"===e.market_type)}))&&!N&&x===s.CFD_PLATFORMS.MT5}),[g,v,b,ne,N,k,x]),ae=o.useMemo((function(){return!!Z&&(re?(0,s.isDesktop)():!!V||(0,s.isDesktop)())}),[V,Z,re]),oe=o.useMemo((function(){return!(!Z||!re&&V)&&(0,s.isMobile)()}),[V,Z,re]),ie=g&&!y,ce=o.useMemo((function(){return"real"===a.category?ie?(0,d.localize)("Submit proof"):(0,d.localize)("Transfer now"):(0,d.localize)("Continue")}),[a,ie]);o.useEffect((function(){(!G&&!X&&z||E)&&j("")}),[z,E,G,X]);var le=o.createElement(un,{is_bvi:U,account_title:r,closeModal:K,error_type:_,error_message:f,has_mt5_account:B,form_error:p,should_set_trading_password:V,is_real_financial_stp:te,validatePassword:function(e){var t,n={};return(0,s.validLength)(e.password,{min:8,max:25})?(0,s.validPassword)(e.password)||(n.password=(0,s.getErrorMessages)().password()):n.password=(0,d.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),(null===(t=e.password)||void 0===t?void 0:t.toLowerCase())===l.toLowerCase()&&(n.password=(0,d.localize)("Your password cannot be the same as your email address.")),n},should_show_server_form:re,onForgotPassword:$,submitPassword:function(e,t){x===s.CFD_PLATFORMS.MT5?F($t($t({},e),{},{server:N}),t):(e.platform=x,M(e,t))},platform:x,is_dxtrade_allowed:S,onCancel:K}),se=o.createElement(fn,{mt5_trading_servers:C,mt5_login_list:k,account_title:r,closeModal:K,submitMt5Server:j,platform:x,has_error:O}),ue=o.createElement(u.Modal,{className:"cfd-password-modal",has_close_icon:!re||V,is_open:ae,toggleModal:K,should_header_stick_body:!0,renderTitle:function(){return o.createElement(rn,{should_show_server_form:re,should_set_trading_password:V,account_title:r,is_password_reset_error:X,platform:x})},onUnmount:function(){return m(x)},onExited:function(){return W(!0)},onEntered:function(){return W(!1)},width:(0,s.isMobile)()?"32.8rem":"auto"},re?se:le),de=o.createElement(u.MobileDialog,{has_full_height:!0,portal_element_id:"modal_root",visible:oe,onClose:K,wrapper_classname:"cfd-password-modal"},o.createElement(rn,{should_show_server_form:re,should_set_trading_password:V,account_title:r,has_mt5_account:B,is_password_reset_error:X,platform:x}),re?se:le),fe=ie?o.createElement(u.Text,{as:"h2",weight:"bold",size:"s",className:"dc-modal-header__title"},(0,d.localize)("Your account is ready")):"";return o.createElement(o.Fragment,null,ue,de,o.createElement(Jt,{is_open:Q,toggleModal:K,onCancel:K,onSubmit:function(){c(),J(),"real"===a.category&&(ie?h.push(s.routes.proof_of_identity):(sessionStorage.setItem("cfd_transfer_to_login_id",D.login||""),h.push(s.routes.cashier_acc_transfer)))},classNameMessage:"cfd-password-modal__message",heading:fe,message:an(x,g,ie,a.type,a.category),icon:o.createElement(on,{platform:x,type:a.type,is_eu:g}),icon_size:"xlarge",text_submit:ce,has_cancel:"real"===a.category,has_close_icon:!1,width:(0,s.isMobile)()?"32.8rem":"auto",is_medium_button:(0,s.isMobile)()}),o.createElement(Xt(),{is_open:ee,identifier_title:"trading_password",onClose:function(){return H(!1)},onClickSendEmail:$}))}))),pn=y((function(e){var t=e.ui,n=e.modules;return{clearCFDError:n.cfd.clearCFDError,disableApp:t.disableApp,enableApp:t.enableApp,error_message:n.cfd.error_message,error_type:n.cfd.error_type,has_cfd_error:n.cfd.has_cfd_error,is_cfd_success_dialog_enabled:n.cfd.is_cfd_success_dialog_enabled}}))((function(e){var t=e.clearCFDError,n=e.disableApp,r=e.enableApp,a=e.error_message,i=e.error_type,c=e.has_cfd_error,l=e.is_cfd_success_dialog_enabled,s=c&&!l&&i&&!["PasswordReset","PasswordError"].includes(i);return o.createElement(u.Dialog,{title:(0,d.localize)("Somethings not right"),confirm_button_text:(0,d.localize)("OK"),onConfirm:t,disableApp:n,enableApp:r,is_visible:s},a||o.createElement(d.Localize,{i18n_default_text:"Sorry, an error occured while processing your request."}))})),mn=y((function(e){var t=e.ui,n=e.modules;return{is_top_up_virtual_open:t.is_top_up_virtual_open,is_top_up_virtual_in_progress:t.is_top_up_virtual_in_progress,is_top_up_virtual_success:t.is_top_up_virtual_success,closeTopUpModal:t.closeTopUpModal,closeSuccessTopUpModal:t.closeSuccessTopUpModal,current_account:n.cfd.current_account,dxtrade_companies:n.cfd.dxtrade_companies,mt5_companies:n.cfd.mt5_companies,topUpVirtual:n.cfd.topUpVirtual}}))((function(e){var t=e.dxtrade_companies,n=e.mt5_companies,r=e.current_account,a=e.closeSuccessTopUpModal,i=e.closeTopUpModal,c=e.is_top_up_virtual_open,l=e.is_top_up_virtual_in_progress,f=e.is_top_up_virtual_success,_=e.platform,p=e.topUpVirtual,m=o.useCallback((function(){return(n||t)&&r?n[r.category][r.type].title:""}),[n,t,r]),h=(0,s.getCFDPlatformLabel)(_);if(!n&&!t||!r)return null;var g=1e3,v=1e4;return o.createElement(o.Fragment,null,o.createElement(u.Modal,{toggleModal:i,is_open:c,className:"top-up-virtual",title:(0,d.localize)("Fund top up"),width:"384px"},o.createElement("div",{className:"dc-modal__container_top-up-virtual__body"},o.createElement(u.Text,{as:"p",align:"center",size:"xxs",line_height:"xs",className:"dc-modal__container_top-up-virtual__description"},o.createElement(d.Localize,{i18n_default_text:"You can top up your demo account with an additional <0></0> if your balance is <1></1> or less.",components:[o.createElement(u.Money,{key:0,amount:v,currency:r.currency,show_currency:!0}),o.createElement(u.Money,{key:1,amount:g,currency:r.currency,show_currency:!0})]})),o.createElement("h4",{className:"dc-modal__container_top-up-virtual--h4"},o.createElement(d.Localize,{i18n_default_text:"{{ platform }} {{ account_title }} account",values:{platform:h,account_title:m()}})),o.createElement("div",null,o.createElement(u.Text,{as:"p",align:"center",size:"xxs"},o.createElement(d.Localize,{i18n_default_text:"Current balance"})),o.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},o.createElement(u.Money,{amount:r.display_balance,currency:r.currency,has_sign:r.balance<0}))),o.createElement("div",{className:"dc-modal__container_top-up-virtual--button"},o.createElement(u.Button,{is_disabled:r.balance>1e3||l,type:"button",is_loading:l,onClick:function(){return p(_)},primary:!0,large:!0},!l&&o.createElement(d.Localize,{i18n_default_text:"Top up <0></0>",components:[o.createElement(u.Money,{key:0,amount:v,currency:r.currency,show_currency:!0})]}))))),o.createElement(Jt,{is_open:f,toggleModal:function(){a()},has_close_icon:!0,title:(0,d.localize)("Fund top up"),icon:o.createElement(u.Icon,{icon:"IcCashierWallet",size:128}),heading:o.createElement("h3",{className:"cfd-success-topup__heading"},o.createElement(d.Localize,{i18n_default_text:"<0></0> has been credited into your {{platform}} {{title}} account.",values:{platform:h,title:m()},components:[o.createElement(u.Money,{key:0,amount:v,currency:r.currency,show_currency:!0})]})),message:o.createElement("div",{className:"cfd-success-topup__description"},o.createElement("p",null,o.createElement(d.Localize,{i18n_default_text:"New current balance"})),o.createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},o.createElement(u.Money,{amount:r.balance,currency:r.currency}))),icon_size:"large",has_cancel:!1,has_submit:!1,width:"384px"}))}));var hn=["current_list","children","is_eu"];function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var En=function(e){var t,n,r,a,o,i=e.current_list,c=e.children,l=e.is_eu,s=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,hn),u=localStorage.getItem("cfd_reset_password_intent"),d=localStorage.getItem("cfd_reset_password_type")||"main";if(u&&/(real|demo)\.(financial_stp|financial|synthetic)/.test(u)&&i){var f=bn(u.split("."),3);o=f[0],t=f[1],n=f[2],r=i["mt5.".concat(t,".").concat(n,"@").concat(o)].login,a=lt(l)[t][n].title}else if(i){var _,p,m,h,g,v,y=bn(Object.keys(i).pop().split("."),3);o=y[0],t=y[1],n=y[2],r=null!==(_=null===(p=i["mt5.".concat(t,".").concat(n,"@").concat(o)])||void 0===p?void 0:p.login)&&void 0!==_?_:"",a=null!==(m=null===(h=lt(l))||void 0===h||null===(g=h[t])||void 0===g||null===(v=g[n])||void 0===v?void 0:v.title)&&void 0!==m?m:""}else r="",a="";return c(vn({login:r,title:a,type:d},s))};const Sn=o.memo((0,l.withRouter)(y((function(e){var t=e.modules.cfd,n=e.client;return{email:n.email,is_eu:n.is_eu,is_cfd_reset_password_modal_enabled:t.is_cfd_reset_password_modal_enabled,setCFDPasswordResetModal:t.setCFDPasswordResetModal,current_list:t.current_list,is_logged_in:n.is_logged_in}}))((function(e){var t=e.current_list,n=e.email,r=e.is_cfd_reset_password_modal_enabled,a=e.is_eu,i=e.is_logged_in,c=e.platform,l=e.setCFDPasswordResetModal,f=e.history,_=bn(o.useState({error_code:void 0,has_error:!1,error_message:void 0,is_finished:!1,changed_password_type:""}),2),p=_[0],m=_[1],h=function(){localStorage.removeItem("cfd_reset_password_intent"),localStorage.removeItem("cfd_reset_password_type"),localStorage.removeItem("cfd_reset_password_code"),f.location.pathname!==s.routes.mt5&&f.push("".concat(s.routes.mt5))},g=function(e){var t={};return(0,s.validLength)(e.new_password,{min:8,max:25})?(0,s.validPassword)(e.new_password)||(t.new_password=(0,s.getErrorMessages)().password()):t.new_password=(0,d.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.new_password.toLowerCase()===n.toLowerCase()&&(t.new_password=(0,d.localize)("Your password cannot be the same as your email address.")),t},v=function(){return 0!==Object.keys(t).length},y=!v()&&localStorage.getItem("cfd_reset_password_code");return o.createElement(u.Modal,{className:"cfd-reset-password-modal",is_open:r&&!y,toggleModal:function(){return l(!1)},title:c===s.CFD_PLATFORMS.DXTRADE?(0,d.localize)("Reset Deriv X investor password"):(0,d.localize)("Reset DMT5 investor password"),onMount:function(){return(0,s.redirectToLogin)(i,(0,d.getLanguage)(),!0)},should_header_stick_body:!1},!v()&&!p.has_error&&o.createElement(u.Loading,{is_fullscreen:!1}),v()&&!p.has_error&&!p.is_finished&&o.createElement(En,{current_list:t,is_eu:a},(function(e){var t=e.type,n=e.login;return o.createElement(z.J9,{initialValues:{new_password:""},validate:g,onSubmit:function(e,r){return function(e,t,n,r){var a=r.setSubmitting;a(!0);var o={account_id:n,platform:s.CFD_PLATFORMS.MT5,new_password:e.new_password,verification_code:localStorage.getItem("cfd_reset_password_code")};s.WS.tradingPlatformInvestorPasswordReset(o).then((function(e){var n,r;null!=e&&null!==(n=e.error)&&void 0!==n&&n.code?(r=e.error,m(vn(vn({},p),{},{error_code:r.code,has_error:!0,error_message:r.message}))):(m(vn(vn({},p),{},{is_finished:!0,changed_password_type:t})),h()),a(!1)}))}(e,t,n,r)}},(function(e){var n=e.handleSubmit,r=e.errors,a=e.values,i=e.isSubmitting,c=e.handleChange,l=e.handleBlur,f=e.touched;return o.createElement("form",{autoComplete:"off",onSubmit:n},o.createElement("div",{className:"cfd-reset-password"},o.createElement("div",{className:"cfd-reset-password__container"},o.createElement("div",{className:"cfd-reset-password__password-area"},o.createElement(u.PasswordMeter,{input:a.new_password,has_error:!(!f.new_password||!r.new_password),custom_feedback_messages:(0,s.getErrorMessages)().password_warnings},(function(e){var n=e.has_warning;return o.createElement(u.PasswordInput,{autoComplete:"new-password",className:"cfd-reset-password__password-field",name:"new_password",label:(0,d.localize)("New {{type}} password",{type:t}),onChange:c,onBlur:l,error:f.new_password&&r.new_password,value:a.new_password,"data-lpignore":"true",required:!0,hint:!n&&(0,d.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols.")})}))),i&&o.createElement(u.Loading,{is_fullscreen:!1}),!i&&o.createElement(u.FormSubmitButton,{is_disabled:i||!a.new_password||Object.keys(r).length>0,errors:r,is_center:!0,large:!0,label:(0,d.localize)("Create {{type}} password",{type:t})}))))}))})),p.has_error&&o.createElement("div",{className:"cfd-reset-password__error"},o.createElement(u.Icon,{icon:"IcMt5Expired",size:128}),o.createElement(u.Text,{as:"p",size:"xs",weight:"bold",align:"center",className:"cfd-reset-password__heading"},p.error_message),"InvalidToken"===p.error_code&&o.createElement(u.Text,{as:"p",color:"prominent",size:"xs",align:"center",className:"cfd-reset-password__description--is-centered"},o.createElement(d.Localize,{i18n_default_text:"Please request a new password and check your email for the new token."})),o.createElement(u.Button,{primary:!0,large:!0,className:"cfd-reset-password__confirm-button",onClick:function(){h(),l(!1)}},o.createElement(d.Localize,{i18n_default_text:"Ok"}))),p.is_finished&&o.createElement("div",{className:"cfd-reset-password__success"},o.createElement(u.Icon,{icon:"IcMt5PasswordUpdated",size:128}),o.createElement("div",{className:"cfd-reset-password__description"},o.createElement(u.Text,{as:"p",size:"xs",align:"center",weight:"bold",line_height:"xxl"},o.createElement(d.Localize,{i18n_default_text:"Password saved"})),o.createElement(d.Localize,{i18n_default_text:"Your {{account_type}} password has been changed.",values:{account_type:"main"===p.changed_password_type?(0,d.localize)("main"):(0,d.localize)("investor")}})),o.createElement(u.Button,{primary:!0,large:!0,onClick:function(){return l(!1)}},o.createElement(d.Localize,{i18n_default_text:"Ok"}))))})))),xn=y((function(e){var t=e.ui,n=e.client,r=e.modules.cfd;return{is_fully_authenticated:n.is_fully_authenticated,enableApp:t.enableApp,disableApp:t.disableApp,toggleModal:r.closeCFDPendingDialog,is_cfd_pending_dialog_open:r.is_cfd_pending_dialog_open}}))((function(e){var t=e.enableApp,n=e.disableApp,r=e.toggleModal,a=e.is_cfd_pending_dialog_open,i=e.is_fully_authenticated;return o.createElement(u.Modal,{title:i?" ":(0,d.localize)("Thanks for submitting your documents!"),className:"cfd-pending-dialog",is_open:a,disableApp:n,enableApp:t,toggleModal:r,has_close_icon:!1,small:!0},o.createElement(u.Modal.Body,null,i?o.createElement(d.Localize,{i18n_default_text:"Your MT5 Financial STP account is almost ready, please set your password now."}):o.createElement(d.Localize,{i18n_default_text:"Well process your documents within 1-3 days. Once they are verified, well notify you via email."})),o.createElement(u.Modal.Footer,null,o.createElement(u.Button,{has_effect:!0,text:(0,d.localize)("OK"),onClick:r,primary:!0})))})),zn={mt5:{real_synthetic_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("20+")}}},real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("150+")}}},eu_real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("50+")}}},real_financial_stp_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:100")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("70+")}}},au_real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("100+")}}},demo_financial_stp_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:100")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("70+")}}}},dxtrade:{real_synthetic_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("20+")}}},real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("90+")}}},eu_real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("90+")}}},au_real_financial_specs:{leverage:{key:function(){return(0,d.localize)("Leverage")},value:function(){return(0,d.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,d.localize)("Margin call")},value:function(){return(0,d.localize)("100%")}},"stop-out-level":{key:function(){return(0,d.localize)("Stop out level")},value:function(){return(0,d.localize)("50%")}},"number-of-assets":{key:function(){return(0,d.localize)("Number of assets")},value:function(){return(0,d.localize)("90+")}}}}};var On=n("../../node_modules/react-transition-group/esm/CSSTransition.js"),Pn=function(e){var t=e.text,n=e.className;return o.createElement("div",{className:n,"data-testid":"cfd_account_copy_main_div"},o.createElement(u.Clipboard,{text_copy:t,info_message:(0,s.isMobile)()?"":(0,d.localize)("copy"),success_message:(0,d.localize)("copied!"),popoverAlignment:(0,s.isMobile)()?"left":"bottom"}))},kn={mt5:{synthetic:"IcMt5SyntheticPlatform",financial:"IcMt5FinancialPlatform",financial_stp:"IcMt5FinancialStpPlatform",cfd:"IcMt5CfdPlatform"},dxtrade:{synthetic:"IcDxtradeSyntheticPlatform",financial:"IcDxtradeFinancialPlatform",cfd:"IcMt5CfdPlatform"}},Dn=o.forwardRef((function(e,t){var n=e.onSelectAccount,r=e.is_disabled;return o.createElement("div",{onClick:r?function(){}:n,className:E()("cfd-account-card__add-server",{"cfd-account-card__add-server--disabled":r}),ref:t},o.createElement("span",{className:"cfd-account-card__add-server--icon"},"+"),o.createElement(d.Localize,{i18n_default_text:"Add region"}))}));Dn.displayName="AddTradeServerButton";var An=function(e){var t=e.value,n=e.is_bold;return o.createElement("div",{className:"cfd-account-card__spec-box"},o.createElement(u.Text,{size:"xs",weight:n?"bold":"",className:"cfd-account-card__spec-text"},t),o.createElement(Pn,{text:t,className:"cfd-account-card__spec-copy"}))},Tn=function(e){var t=e.platform,n=e.onClick;return o.createElement("div",{className:"cfd-account-card__password-box"},o.createElement("div",{className:"cfd-account-card__password-text"},o.createElement(u.Popover,{alignment:"right",message:(0,d.localize)("Use these credentials to log in to your {{platform}} account on the website and mobile apps.",{platform:(0,s.getCFDPlatformLabel)(t)}),classNameBubble:"cfd-account-card__password-tooltip"},o.createElement(u.Text,{size:"xs"},""))),o.createElement(u.Popover,{alignment:"bottom",message:(0,d.localize)("Change Password")},o.createElement(u.Button,{className:"cfd-account-card__password-action",transparent:!0,onClick:n,icon:o.createElement(u.Icon,{icon:"IcEdit",className:"da-article__learn-more-icon",custom_color:"var(--text-less-prominent)"})})))},Fn=function(e){var t=e.button_label,n=e.handleClickSwitchAccount,r=e.has_real_account,a=e.is_accounts_switcher_on,i=e.is_button_primary,c=e.is_disabled,l=e.is_virtual,f=e.onSelectAccount,_=e.type,p=e.platform,m=e.title;if(l&&"real"===_.category&&"function"==typeof n&&(p!==s.CFD_PLATFORMS.MT5||r&&"financial_stp"===_.type))return o.createElement("div",{className:"cfd-account-card__action-wrapper"},o.createElement(d.Localize,{i18n_default_text:"<0>Switch to your real account</0><1> to create a {{platform}} {{account_title}} account.</1>",values:{platform:(0,s.getCFDPlatformLabel)(p),account_title:m},components:[o.createElement("a",{className:E()("cfd-account-card__action-wrapper__link link link--orange",{"cfd-account-card__action-wrapper__link--disabled":a}),key:0,onClick:n}),o.createElement(u.Text,{key:1,line_height:"s",size:"xxs"})]}));var h="real"===_.category?o.createElement(d.Localize,{i18n_default_text:"Add real account"}):o.createElement(d.Localize,{i18n_default_text:"Add demo account"}),g=t||h;return o.createElement(u.Button,{className:"cfd-account-card__account-selection",onClick:f,type:"button",is_disabled:c,primary:i,secondary:!i,large:!0},g)},Mn=function(e){var t,n,r,a,i,c=e.button_label,l=e.commission_message,f=e.descriptor,_=e.is_hovered,p=e.existing_data,m=e.has_banner,h=e.has_cfd_account,g=e.has_cfd_account_error,v=e.has_real_account,y=e.is_accounts_switcher_on,b=e.is_button_primary,w=e.is_disabled,S=e.is_logged_in,x=e.is_virtual,z=e.is_eu,O=e.onHover,P=e.platform,k=e.specs,D=e.title,A=e.type,T=e.onSelectAccount,F=e.onClickFund,M=e.onPasswordManager,C=e.should_show_trade_servers,L=e.toggleAccountsDialog,N=e.toggleShouldShowRealAccountsList,j=z?"cfd":A.type,R=A.type?o.createElement(u.Icon,{icon:kn[A.platform][j],size:64}):null,I="synthetic"===A.type&&"real"===A.category&&(P!==s.CFD_PLATFORMS.MT5||!p),W="demo"===A.category,U=S&&p&&"real"===A.category&&"synthetic"===A.type&&(null==p?void 0:p.server_info),B="synthetic"===A.type&&"real"===A.category&&"mt5"===A.platform,V=null==p||null===(t=p.server_info)||void 0===t||null===(n=t.geolocation)||void 0===n?void 0:n.region,G=null==p||null===(r=p.server_info)||void 0===r?void 0:r.environment,X=o.useRef(null),q=o.useRef(null),Y=o.useRef(null);o.useEffect((function(){var e=null==X?void 0:X.current,t=null==Y?void 0:Y.current;if(p){var n=function(){null==O||O(p.group)};return null==e||e.addEventListener("mouseenter",n),null==t||t.addEventListener("mouseenter",n),function(){null==e||e.removeEventListener("mouseenter",n),null==t||t.removeEventListener("mouseenter",(function(){return n}))}}return function(){}}),[O,p]);var H,J,K,$,Z=o.useCallback((function(e){if(e){var t,n,r,a,o,i,c=null===(t=e.server_info)||void 0===t||null===(n=t.geolocation)||void 0===n?void 0:n.region;if(c)return"".concat(c," ").concat(1===(null==e||null===(r=e.server_info)||void 0===r||null===(a=r.geolocation)||void 0===a?void 0:a.sequence)?"":null==e||null===(o=e.server_info)||void 0===o||null===(i=o.geolocation)||void 0===i?void 0:i.sequence)}return""}),[]),Q=(0,s.isMobile)()&&P===s.CFD_PLATFORMS.DXTRADE,ee=P===s.CFD_PLATFORMS.MT5?o.createElement(o.Fragment,null,o.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},o.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},o.createElement("div",{className:"cfd-account-card--paragraph"},(0,d.localize)("Broker"))),o.createElement("td",{className:"cfd-account-card__login-specs-table-data"},o.createElement("div",{className:"cfd-account-card--paragraph"},o.createElement(An,{value:"Deriv Limited"})))),o.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},o.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},o.createElement("div",{className:"cfd-account-card--paragraph"},(0,d.localize)("Server"))),o.createElement("td",{className:"cfd-account-card__login-specs-table-data"},o.createElement("div",{className:"cfd-account-card--paragraph"},o.createElement(An,{value:null==p||null===(a=p.server_info)||void 0===a?void 0:a.environment})))),o.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},o.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},o.createElement("div",{className:"cfd-account-card--paragraph"},(0,d.localize)("Login ID"))),o.createElement("td",{className:"cfd-account-card__login-specs-table-data"},o.createElement("div",{className:"cfd-account-card--paragraph"},o.createElement(An,{value:null==p?void 0:p.display_login}))))):o.createElement(o.Fragment,null,o.createElement("tr",{className:"cfd-account-card__login-specs-table-row"},o.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},o.createElement("div",{className:"cfd-account-card--paragraph"},(0,d.localize)("Username"))),o.createElement("td",{className:"cfd-account-card__login-specs-table-data"},o.createElement("div",{className:"cfd-account-card--paragraph"},o.createElement(An,{value:null==p?void 0:p.login,is_bold:!0})))));return o.createElement("div",{ref:q,className:"cfd-account-card__wrapper"},o.createElement("div",{className:E()("cfd-account-card",{"cfd-account-card__logged-out":!S}),ref:X,id:(J="",K="",$=G?G.toLowerCase():"",B&&V&&(J="-".concat(V.toLowerCase())),""!==$&&B&&(K=$.split("server")[1]),"".concat(A.category,"-").concat(A.type).concat(J).concat(K))},I&&o.createElement("div",{className:"cfd-account-card__banner"},o.createElement(d.Localize,{i18n_default_text:"Most popular"})),W&&o.createElement("div",{className:"cfd-account-card__banner cfd-account-card__banner--demo"},o.createElement(d.Localize,{i18n_default_text:"DEMO"})),U&&o.createElement("div",{className:"cfd-account-card__banner cfd-account-card__banner--server"},Z(p)),o.createElement("div",{className:E()("cfd-account-card__type",{"cfd-account-card__type--has-banner":m||I||U}),id:"".concat(P===s.CFD_PLATFORMS.DXTRADE?s.CFD_PLATFORMS.DXTRADE:s.CFD_PLATFORMS.MT5,"_").concat(A.category,"_").concat(A.type)},R,o.createElement("div",{className:"cfd-account-card__type--description"},o.createElement(u.Text,{size:"xxl",className:"cfd-account-card--heading"},D),(!p||!S)&&o.createElement("p",{className:"cfd-account-card--paragraph"},f),(null==p?void 0:p.display_balance)&&S&&o.createElement(u.Text,{size:"xxl",className:"cfd-account-card--balance"},o.createElement(u.Money,{amount:p.display_balance,currency:p.currency,has_sign:!!p.balance&&p.balance<0,show_currency:!0})),(null==p?void 0:p.display_login)&&S&&o.createElement(u.Text,{color:"less-prominent",size:"xxxs",line_height:"s"},null==p?void 0:p.display_login))),p&&o.createElement("div",{className:"cfd-account-card__divider"}),o.createElement("div",{className:"cfd-account-card__cta"},o.createElement("div",{className:"cfd-account-card__cta-wrapper"},null!=p&&p.login&&S?o.createElement(o.Fragment,null,o.createElement("div",{className:"cfd-account-card__login-specs"},o.createElement("table",{className:"cfd-account-card__login-specs-table"},o.createElement("tbody",null,ee,o.createElement("tr",{className:"cfd-account-card__login-specs-table-row cfd-account-card__login-specs-table-row--account-id"},o.createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},o.createElement("div",{className:"cfd-account-card--paragraph"},(0,d.localize)("Password"))),o.createElement("td",{className:"cfd-account-card__login-specs-table-data"},o.createElement("div",{className:"cfd-account-card--paragraph"},o.createElement(Tn,{platform:P,onClick:function(){M(null==p?void 0:p.login,D,A.category,A.type,null==p?void 0:p.server)}})))))))):o.createElement("div",{className:"cfd-account-card__specs"},o.createElement("table",{className:"cfd-account-card__specs-table"},o.createElement("tbody",null,void 0!==k&&Object.keys(k).map((function(e,t){return o.createElement("tr",{key:t,className:"cfd-account-card__specs-table-row"},o.createElement("td",{className:"cfd-account-card__specs-table-attribute"},o.createElement("p",{className:"cfd-account-card--paragraph"},k[e].key())),o.createElement("td",{className:"cfd-account-card__specs-table-data"},o.createElement("p",{className:"cfd-account-card--paragraph"},k[e].value())))})),U&&p&&"synthetic"===A.type&&"real"===A.category&&o.createElement("tr",{key:p.server,className:"cfd-account-card__specs-table-row"},o.createElement("td",{className:"cfd-account-card__specs-table-attribute"},o.createElement("p",{className:"cfd-account-card--paragraph"},o.createElement(d.Localize,{i18n_default_text:"Trade server: "}))),o.createElement("td",{className:"cfd-account-card__specs-table-data"},o.createElement("p",{className:"cfd-account-card--paragraph"},Z(p))))))),(!p&&l||!S)&&o.createElement("div",{className:"cfd-account-card__commission"},o.createElement(u.Text,{as:"p",color:"general",size:"xs",styles:{margin:"1.6rem auto"}},l)),p&&S&&o.createElement("div",{className:"cfd-account-card__manage"},o.createElement(u.Button,{onClick:function(){return F(p)},type:"button",secondary:!0},"real"===A.category&&o.createElement(d.Localize,{i18n_default_text:"Fund transfer"}),"demo"===A.category&&o.createElement(d.Localize,{i18n_default_text:"Fund top up"}))),!p&&h&&o.createElement(u.Button,{className:"cfd-account-card__account-selection",onClick:T,type:"button"},o.createElement(d.Localize,{i18n_default_text:"Select"})),p&&S&&!Q&&o.createElement("a",{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",href:P===s.CFD_PLATFORMS.DXTRADE?Be(A.category):Ve({category:A.category,loginid:p.display_login,server_name:null==p||null===(i=p.server_info)||void 0===i?void 0:i.environment}),target:"_blank",rel:"noopener noreferrer"},o.createElement(d.Localize,{i18n_default_text:"Trade on web terminal"})),p&&S&&Q&&o.createElement("a",{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",href:(H=(0,s.mobileOSDetect)(),We("iOS"===H?"ios":"android")),target:"_blank",rel:"noopener noreferrer"},o.createElement(d.Localize,{i18n_default_text:"Download the app"})),!p&&!h&&S&&o.createElement(Fn,{button_label:c,handleClickSwitchAccount:function(){null==N||N(!0),null==L||L(!0)},has_real_account:v,is_accounts_switcher_on:y,is_button_primary:b,is_disabled:w,is_virtual:x,onSelectAccount:T,type:A,platform:P,title:D}))),o.createElement(o.Fragment,null,C&&o.createElement(u.MobileWrapper,null,o.createElement(Dn,{ref:Y,onSelectAccount:T,is_disabled:g})))),o.createElement(u.DesktopWrapper,null,o.createElement(On.Z,{in:_&&C,timeout:0,classNames:"cfd-account-card__add-server",unmountOnExit:!0},o.createElement(Dn,{ref:Y,onSelectAccount:T,is_disabled:g}))))},Cn=function(e){var t=e.is_eu,n=e.is_eu_country,r=e.has_maltainvest_account,a=e.has_cfd_account_error,i=e.openAccountNeededModal,c=e.standpoint,l=e.is_loading,s=e.is_logged_in,u=e.isSyntheticCardVisible,f=e.isFinancialCardVisible,_=e.isFinancialStpCardVisible,p=e.onSelectAccount,m=e.openAccountTransfer,h=e.platform,g=e.current_list,v=e.has_cfd_account,y=e.openPasswordManager,b=e.residence,w=s&&t||!s&&n,E=o.useMemo((function(){var e=s&&t||!s&&n;return"au"===b?zn[h].au_real_financial_specs:e?zn[h].eu_real_financial_specs:zn[h].real_financial_specs}),[s,t,n,b,h]);return l?o.createElement("div",{className:"cfd-demo-accounts-display"},o.createElement(S,null)):o.createElement("div",{className:"cfd-demo-accounts-display","data-testid":"dt_cfd_demo_accounts_display"},u("demo")&&o.createElement(Mn,{has_cfd_account:v,title:(0,d.localize)("Synthetic"),type:{category:"demo",type:"synthetic",platform:h},is_disabled:a||c.malta,is_logged_in:s,existing_data:g[Object.keys(g).find((function(e){return e.startsWith("".concat(h,".demo.synthetic"))}))||""],commission_message:(0,d.localize)("No commission"),onSelectAccount:function(){return p({category:"demo",type:"synthetic"})},onPasswordManager:y,onClickFund:function(){return m(g[Object.keys(g).find((function(e){return e.startsWith("".concat(h,".demo.synthetic"))}))||""],{category:"demo",type:"synthetic"})},platform:h,descriptor:(0,d.localize)("Trade CFDs on our synthetic indices that simulate real-world market movement."),specs:zn[h].real_synthetic_specs,has_banner:!0}),f()&&o.createElement(Mn,{has_cfd_account:v,title:w?(0,d.localize)("CFDs"):(0,d.localize)("Financial"),is_disabled:a,is_logged_in:s,is_eu:w,type:{category:"demo",type:"financial",platform:h},existing_data:g[Object.keys(g).find((function(e){return e.startsWith("".concat(h,".demo.financial@"))}))||""],commission_message:(0,d.localize)("No commission"),onSelectAccount:function(){t&&!r&&c.iom?i("maltainvest",(0,d.localize)("Deriv Multipliers"),(0,d.localize)("demo CFDs")):p({category:"demo",type:"financial"})},onPasswordManager:y,onClickFund:function(){return m(g[Object.keys(g).find((function(e){return e.startsWith("".concat(h,".demo.financial@"))}))||""],{category:"demo",type:"financial"})},platform:h,descriptor:je(h,w),specs:E,has_banner:!0}),_()&&o.createElement(Mn,{has_cfd_account:v,title:(0,d.localize)("Financial STP"),type:{category:"demo",type:"financial_stp",platform:h},is_disabled:a,is_logged_in:s,existing_data:g[Object.keys(g).find((function(e){return e.startsWith("".concat(h,".demo.financial_stp@"))}))||""],commission_message:(0,d.localize)("No commission"),onSelectAccount:function(){return p({category:"demo",type:"financial_stp"})},onPasswordManager:y,onClickFund:function(){return m(g[Object.keys(g).find((function(e){return e.startsWith("".concat(h,".demo.financial_stp@"))}))||""],{category:"demo",type:"financial_stp"})},descriptor:(0,d.localize)("Trade popular currency pairs and cryptocurrencies with straight-through processing order (STP)."),specs:zn[h].demo_financial_stp_specs,platform:h,has_banner:!0}))};function Ln(e,t){if(e){if("string"==typeof e)return Nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nn(e,t):void 0}}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jn=function(e){var t=e.has_real_account,n=e.is_accounts_switcher_on,r=e.is_eu,a=e.is_eu_country,i=e.has_malta_account,c=e.has_maltainvest_account,l=e.has_cfd_account_error,f=e.is_fully_authenticated,_=e.is_pending_authentication,p=e.is_virtual,m=e.isSyntheticCardVisible,h=e.isFinancialCardVisible,g=e.isFinancialStpCardVisible,v=e.landing_companies,y=e.onSelectAccount,b=e.openAccountTransfer,w=e.openPasswordModal,S=e.isAccountOfTypeDisabled,x=e.current_list,z=e.has_cfd_account,O=e.openPasswordManager,P=e.account_settings,k=e.openAccountNeededModal,D=e.platform,A=e.standpoint,T=e.is_logged_in,F=e.toggleAccountsDialog,M=e.toggleShouldShowRealAccountsList,C=e.can_have_more_real_synthetic_mt5,L=e.residence,N=e.residence_list,j=T&&!r&&t&&C&&D===s.CFD_PLATFORMS.MT5,R=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||Ln(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o.useState(0),2),I=R[0],W=R[1],U=o.useMemo((function(){var e,t,n=P.citizen,r=P.tax_identification_number,a=P.tax_residence;return!(!(n&&r&&a)&&(!n||!a||null!==(e=null==v||null===(t=v.config)||void 0===t?void 0:t.tax_details_required)&&void 0!==e&&e&&N.filter((function(e){return e.value===a&&e.tin_format})).length))}),[P,N,v]),B=function(e,t,n){return e&&n?o.createElement(d.Localize,{i18n_default_text:"Set your password"}):t?o.createElement(d.Localize,{i18n_default_text:"Pending verification"}):o.createElement(d.Localize,{i18n_default_text:"Add real account"})}(f,_,U),V=T&&r||!T&&a,G=!t||_,X=o.useMemo((function(){var e=T&&r||!T&&a;return"au"===L?zn[D].au_real_financial_specs:e?zn[D].eu_real_financial_specs:zn[D].real_financial_specs}),[L,T,r,a,D]),q=function(){r&&A.malta&&!i||y({type:"synthetic",category:"real"})},Y=function(e){return b(x[(0,s.getAccountListKey)(e,D)],{category:e.account_type,type:(0,s.getCFDAccountKey)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:D})})},H=function(e){var t=Object.keys(x).filter((function(e){return e.startsWith("".concat(D,".real.synthetic"))}));W(t.findIndex((function(t){return x[t].group===e})))},J=function(e){if(l)return!0;if("synthetic"===e&&A.malta)return!0;if(r){var n=(0,s.getAccountTypeFields)({category:"real",type:e});return S(null==n?void 0:n.account_type)}switch(e){case"synthetic":case"financial":return!t;case"financial_stp":return G;default:return!1}},K=m("real")&&(Object.keys(x).some((function(e){return e.startsWith("".concat(D,".real.synthetic"))}))?Object.keys(x).filter((function(e){return e.startsWith("".concat(D,".real.synthetic"))})).reduce((function(e,t){return e.push(x[t]),e}),[]).map((function(e,t){return o.createElement(Mn,{key:t,has_cfd_account:z,has_cfd_account_error:l,title:(0,d.localize)("Synthetic"),is_hovered:t===I,is_disabled:J("synthetic"),type:{category:"real",type:"synthetic",platform:D},is_logged_in:T,should_show_trade_servers:j,existing_data:e,commission_message:(0,d.localize)("No commission"),onSelectAccount:q,onPasswordManager:O,onClickFund:Y,platform:D,descriptor:(0,d.localize)("Trade CFDs on our synthetic indices that simulate real-world market movement."),specs:zn[D].real_synthetic_specs,onHover:H})})):[o.createElement(Mn,{key:"real.synthetic",has_cfd_account:z,title:(0,d.localize)("Synthetic"),is_disabled:J("synthetic"),type:{category:"real",type:"synthetic",platform:D},is_logged_in:T,should_show_trade_servers:j,existing_data:void 0,commission_message:(0,d.localize)("No commission"),onSelectAccount:q,onPasswordManager:O,onClickFund:Y,platform:D,descriptor:(0,d.localize)("Trade CFDs on our synthetic indices that simulate real-world market movement."),specs:zn[D].real_synthetic_specs,onHover:H,is_virtual:p,toggleShouldShowRealAccountsList:M,toggleAccountsDialog:F})]),$=g()&&o.createElement(Mn,{key:"real.financial_stp",has_cfd_account:z,title:(0,d.localize)("Financial STP"),type:{category:"real",type:"financial_stp",platform:D},is_logged_in:T,existing_data:x[Object.keys(x).find((function(e){return e.startsWith("".concat(D,".real.financial_stp@"))}))||""],commission_message:(0,d.localize)("No commission"),onSelectAccount:function(){var e={category:"real",type:"financial_stp"};f&&U?w(e):(f||G)&&U||y(e)},button_label:B,is_button_primary:_,onPasswordManager:O,onClickFund:Y,platform:D,descriptor:(0,d.localize)("Trade popular currency pairs and cryptocurrencies with straight-through processing order (STP)."),specs:zn[D].real_financial_stp_specs,is_disabled:J("financial_stp"),is_virtual:p,has_real_account:t,toggleAccountsDialog:F,toggleShouldShowRealAccountsList:M,is_accounts_switcher_on:n}),Z=h()&&o.createElement(Mn,{key:"real.financial",has_cfd_account:z,is_disabled:J("financial"),title:V?(0,d.localize)("CFDs"):(0,d.localize)("Financial"),type:{category:"real",type:"financial",platform:D},existing_data:x[Object.keys(x).find((function(e){return e.startsWith("".concat(D,".real.financial@"))}))||""],commission_message:(0,d.localize)("No commission"),onSelectAccount:function(){r&&!c?k("maltainvest",(0,d.localize)("Deriv Multipliers"),(0,d.localize)("real CFDs")):y({type:"financial",category:"real"})},onPasswordManager:O,onClickFund:Y,platform:D,descriptor:je(D,V),specs:X,is_eu:V,is_logged_in:T,is_virtual:p,toggleShouldShowRealAccountsList:M,toggleAccountsDialog:F}),Q=[].concat(function(e){return function(e){if(Array.isArray(e))return Nn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ln(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(K||[]),[Z,$]).filter(Boolean);return o.createElement("div",{"data-testid":"dt_cfd_real_accounts_display",className:E()("cfd-real-accounts-display",{"cfd-real-accounts-display--has-trade-servers":j})},o.createElement(u.DesktopWrapper,null,o.createElement(u.Carousel,{list:Q,width:328,nav_position:"middle",show_bullet:!1,item_per_window:3,is_mt5:!0})),o.createElement(u.MobileWrapper,null,Q.map((function(e){return e}))))},Rn=["children","is_loading","loading_component"];function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Un=function(e){var t=e.children,n=e.is_loading,r=e.loading_component,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Rn),i=r;return n?o.createElement(i,null):o.createElement(u.Tabs,a,t)};const Bn=(0,c.withRouter)(y((function(e){var t=e.client,n=e.modules,r=e.ui;return{beginRealSignupForMt5:n.cfd.beginRealSignupForMt5,checkShouldOpenAccount:n.cfd.checkShouldOpenAccount,country:t.account_settings.residence,client_email:t.email_address,createCFDAccount:n.cfd.createCFDAccount,current_list:n.cfd.current_list,landing_companies:t.landing_companies,isAccountOfTypeDisabled:t.isAccountOfTypeDisabled,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_virtual:t.is_virtual,is_mt5_allowed:t.is_mt5_allowed,is_dxtrade_allowed:t.is_dxtrade_allowed,mt5_disabled_signup_types:t.mt5_disabled_signup_types,dxtrade_disabled_signup_types:t.dxtrade_disabled_signup_types,has_maltainvest_account:t.has_maltainvest_account,has_malta_account:t.has_malta_account,can_upgrade_to:t.can_upgrade_to,account_settings:t.account_settings,disableCFDPasswordModal:n.cfd.disableCFDPasswordModal,dxtrade_accounts_list_error:t.dxtrade_accounts_list_error,is_pending_authentication:t.is_pending_authentication,is_compare_accounts_visible:n.cfd.is_compare_accounts_visible,is_fully_authenticated:t.is_fully_authenticated,openPasswordModal:n.cfd.enableCFDPasswordModal,openAccountNeededModal:r.openAccountNeededModal,is_loading:t.is_populating_mt5_account_list,residence:t.residence,residence_list:t.residence_list,has_cfd_account:n.cfd.has_cfd_account,has_mt5_real_account_error:t.has_account_error_in_mt5_real_list,has_mt5_demo_account_error:t.has_account_error_in_mt5_demo_list,has_dxtrade_real_account_error:t.has_account_error_in_dxtrade_real_list,has_dxtrade_demo_account_error:t.has_account_error_in_dxtrade_demo_list,has_real_account:t.has_active_real_account,setAccountType:n.cfd.setAccountType,setCFDPasswordResetModal:n.cfd.setCFDPasswordResetModal,setCurrentAccount:n.cfd.setCurrentAccount,standpoint:t.standpoint,toggleCompareAccounts:n.cfd.toggleCompareAccountsModal,is_accounts_switcher_on:r.is_accounts_switcher_on,openTopUpModal:r.openTopUpModal,NotificationMessages:r.notification_messages_ui,onMount:n.cfd.onMount,onUnmount:n.cfd.onUnmount,toggleAccountsDialog:r.toggleAccountsDialog,toggleShouldShowRealAccountsList:r.toggleShouldShowRealAccountsList,can_have_more_real_synthetic_mt5:t.can_have_more_real_synthetic_mt5,upgradeable_landing_companies:t.upgradeable_landing_companies,is_dark_mode_on:r.is_dark_mode_on,disableApp:r.disableApp,enableApp:r.enableApp,is_reset_trading_password_modal_visible:r.is_reset_trading_password_modal_visible,toggleResetTradingPasswordModal:r.setResetTradingPasswordModalOpen,mt5_verification_code:t.verification_code.trading_platform_mt5_password_reset,dxtrade_verification_code:t.verification_code.trading_platform_dxtrade_password_reset,mt5_status_server:t.website_status.mt5_status}}))((function(e){var t=In(o.useState(!1),2),n=t[0],r=t[1],a=In(o.useState(!1),2),i=a[0],c=a[1],f=In(o.useState(0),2),p=f[0],m=f[1],h=In(o.useState(!1),2),g=h[0],v=h[1],y=In(o.useState(!1),2),w=y[0],E=y[1],S=In(o.useState({is_visible:!1,selected_login:"",selected_account:"",selected_account_type:"",selected_account_group:"",selected_server:""}),2),z=S[0],O=S[1];o.useEffect((function(){return D(k()),P(),e.onMount(),function(){e.onUnmount()}}),[]),o.useEffect((function(){e.checkShouldOpenAccount(),e.is_logged_in&&["demo","real"].forEach((function(e){var t=F(e)||M()||C();"real"===e&&i!==t&&c(t),"demo"===e&&n!==t&&r(t)})),e.is_logged_in||i&&n||(c(!0),r(!0)),"#demo"===window.location.hash&&(r(!0),m(1))}));var P=function(){/reset-password/.test(e.location.hash)&&e.setCFDPasswordResetModal(!0)},k=function(){return i?0:n?1:e.location.hash?/demo/.test(e.location.hash)?1:0:void 0},D=function(e){if(void 0!==e){var t={};1===e?t.is_demo_tab=!0:0===e&&(t.is_demo_tab=!1),p!==e&&(t.active_index=e),(0,s.isEmptyObject)(t)||(m(t.active_index),v(t.is_demo_tab))}},A=function(t,n){"real"===n.category?(t.platform===s.CFD_PLATFORMS.DXTRADE?sessionStorage.setItem("cfd_transfer_to_login_id",t.account_id):sessionStorage.setItem("cfd_transfer_to_login_id",t.login),e.disableCFDPasswordModal(),e.history.push(s.routes.cashier_acc_transfer)):(e.setCurrentAccount(t,n),e.openTopUpModal())},T=function(e,t,n,r,a){O((function(o){return{is_visible:!o.is_visible,selected_login:"string"==typeof e?e:"",selected_account:"string"==typeof t?t:"",selected_account_group:n,selected_account_type:r,selected_server:a}}))},F=function(t){var n=e.current_list,r=e.platform,a=e.is_eu,o=e.is_eu_country,i=e.landing_companies,c=e.is_logged_in,l=Object.keys(n).some((function(e){return e.startsWith("".concat(r,".").concat(t,".synthetic"))}));return!(!c&&o)&&!(a&&!l)&&((0,s.isLandingCompanyEnabled)({landing_companies:i,platform:r,type:"gaming"})||!c)},M=function(){var t=e.platform,n=e.landing_companies;return!e.is_logged_in||(0,s.isLandingCompanyEnabled)({landing_companies:n,platform:t,type:"financial"})},C=function(){var t,n=e.platform,r=e.landing_companies,a=e.is_logged_in,o=e.is_eu_country;return!(!a&&o)&&((null==r||null===(t=r.mt_financial_company)||void 0===t?void 0:t.financial_stp)||!a)&&n===s.CFD_PLATFORMS.MT5},L=e.account_settings,N=e.account_status,j=e.beginRealSignupForMt5,R=e.country,I=e.createCFDAccount,W=e.current_list,U=e.dxtrade_accounts_list_error,B=e.isAccountOfTypeDisabled,V=e.is_accounts_switcher_on,G=e.is_dark_mode_on,X=e.is_eu,q=e.is_eu_country,Y=e.is_fully_authenticated,H=e.is_loading,J=e.is_logged_in,K=e.is_logging_in,$=e.is_mt5_allowed,Z=e.is_dxtrade_allowed,Q=e.is_pending_authentication,ee=e.is_virtual,te=e.landing_companies,ne=e.has_malta_account,re=e.has_maltainvest_account,ae=e.has_cfd_account,oe=e.has_mt5_real_account_error,ie=e.has_mt5_demo_account_error,ce=e.has_dxtrade_real_account_error,le=e.has_dxtrade_demo_account_error,se=e.mt5_disabled_signup_types,ue=e.dxtrade_disabled_signup_types,de=e.has_real_account,fe=e.NotificationMessages,_e=e.platform,pe=e.openAccountNeededModal,me=e.residence,he=e.residence_list,ge=e.standpoint,ve=e.toggleAccountsDialog,ye=e.toggleShouldShowRealAccountsList,be=e.can_have_more_real_synthetic_mt5,we=e.upgradeable_landing_companies,Ee=e.is_reset_trading_password_modal_visible,Se=e.toggleResetTradingPasswordModal,xe=e.enableApp,Oe=e.disableApp,Pe=e.mt5_verification_code,ke=e.dxtrade_verification_code,De=e.mt5_status_server,Ae=!X&&J&&!de&&(null==we?void 0:we.length)>0;if(!R&&J||K)return o.createElement(u.Loading,null);var Te=function(e){return null==e?void 0:e.map((function(e){return e.all})).some((function(e){return 1===e}))},Fe=Te(De.demo),Me=Te(De.real),Ce=g?Fe||ie||se.demo:Me||oe||se.real,Le=g?le||ue.demo:ce||ue.real,je=_e===s.CFD_PLATFORMS.MT5?Ce:Le||!!U,Re=_e===s.CFD_PLATFORMS.MT5?Pe:ke;return _e!==s.CFD_PLATFORMS.DXTRADE||Z?J&&!te||H?o.createElement(u.Loading,null):o.createElement(o.Fragment,null,$||_e===s.CFD_PLATFORMS.DXTRADE||!J?o.createElement("div",{className:"cfd-dashboard__container"},o.createElement(fe,{is_mt5:!0,is_notification_loaded:w,stopNotificationLoading:function(){E(!0)}}),o.createElement("div",{className:"cfd-dashboard"},o.createElement("div",{className:"cfd-dashboard__welcome-message"},o.createElement("h1",{className:"cfd-dashboard__welcome-message--heading"},function(e,t){return t===s.CFD_PLATFORMS.DXTRADE?e?(0,d.localize)("Welcome to your Deriv X dashboard"):(0,d.localize)("Welcome to Deriv X"):t===s.CFD_PLATFORMS.MT5?(0,d.localize)("Welcome to Deriv MT5 (DMT5) dashboard"):(0,d.localize)("")}(J,_e))),J&&je&&o.createElement("div",{className:"cfd-dashboard__accounts-error"},o.createElement(u.Text,{as:"p",className:"cfd-dashboard__accounts-error-message",line_height:"l",size:"xxs",color:"prominent",weight:"normal",align:"center"},o.createElement(d.Localize,{i18n_default_text:"Due to an issue on our server, some of your {{platform}} accounts are unavailable at the moment. Please bear with us and thank you for your patience.",values:{platform:(0,s.getCFDPlatformLabel)(_e)}}))),o.createElement("div",{className:"cfd-dashboard__accounts-display"},o.createElement(Vt,{is_visible:z.is_visible,platform:_e,selected_login:z.selected_login,selected_account:z.selected_account,selected_account_group:z.selected_account_group,selected_account_type:z.selected_account_type,selected_server:z.selected_server,toggleModal:T}),o.createElement(Un,{active_index:p,top:!0,center:!0,is_loading:H,is_logged_in:J,loading_component:x,onTabItemClick:D,should_update_hash:!0},i&&o.createElement("div",{label:(0,d.localize)("Real account"),hash:"real"},o.createElement(o.Fragment,null,Ae&&o.createElement(b,{onClickSignup:j,platform:_e}),o.createElement(jn,{is_accounts_switcher_on:V,is_eu:X,is_eu_country:q,is_logged_in:J,has_maltainvest_account:re,has_malta_account:ne,has_cfd_account_error:_e===s.CFD_PLATFORMS.MT5?Me||se.real:Me||ue.real||!!U,openAccountNeededModal:pe,current_list:W,account_status:N,has_cfd_account:ae,onSelectAccount:I,account_settings:L,landing_companies:te,is_pending_authentication:Q,is_fully_authenticated:Y,is_virtual:ee,isSyntheticCardVisible:F,isFinancialCardVisible:M,isFinancialStpCardVisible:C,openAccountTransfer:A,openPasswordManager:T,openPasswordModal:function(t){e.setAccountType(t),e.openPasswordModal()},platform:_e,isAccountOfTypeDisabled:B,has_real_account:de,standpoint:ge,toggleAccountsDialog:ve,toggleShouldShowRealAccountsList:ye,can_have_more_real_synthetic_mt5:be,residence:me,residence_list:he}))),n&&o.createElement("div",{label:(0,d.localize)("Demo account"),hash:"demo"},o.createElement(Cn,{is_eu:X,is_eu_country:q,is_logged_in:J,has_maltainvest_account:re,has_cfd_account_error:_e===s.CFD_PLATFORMS.MT5?Fe||se.demo:Fe||ue.demo||!!U,openAccountNeededModal:pe,standpoint:ge,is_loading:H,isSyntheticCardVisible:F,isFinancialCardVisible:M,isFinancialStpCardVisible:C,has_cfd_account:ae,current_list:W,onSelectAccount:I,landing_companies:te,openAccountTransfer:A,openPasswordManager:T,platform:_e,residence:me}))),o.createElement(Ne,{platform:_e}),o.createElement("div",{className:"cfd-dashboard__maintenance"},o.createElement(u.Icon,{icon:"IcAlertWarning",size:(0,s.isMobile)()?28:16,className:"cfd-dashboard__maintenance-icon"}),o.createElement("div",{className:"cfd-dashboard__maintenance-text"},_e===s.CFD_PLATFORMS.DXTRADE&&o.createElement(d.Localize,{i18n_default_text:"Server maintenance starts at 06:00 GMT every Sunday and may last up to 2 hours. Service may be disrupted during this time."}),_e===s.CFD_PLATFORMS.MT5&&o.createElement(d.Localize,{i18n_default_text:"Server maintenance starting 01:00 GMT every Sunday. This process may take up to 2 hours to complete. Service may be disrupted during this time."})))),o.createElement(u.DesktopWrapper,null,o.createElement(Ge,{platform:_e,active_index:p,is_dark_mode_on:G})),o.createElement(u.MobileWrapper,null,o.createElement("div",{className:"cfd-dashboard__download-center"},o.createElement("h1",{className:"cfd-dashboard__download-center--heading"},_e===s.CFD_PLATFORMS.MT5&&o.createElement(d.Localize,{i18n_default_text:"Download the MT5 app"}),_e===s.CFD_PLATFORMS.DXTRADE&&o.createElement(d.Localize,{i18n_default_text:"Download the Deriv X app"})),o.createElement("div",{className:"cfd-dashboard__download-center-options--mobile"},o.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-devices"},_e===s.CFD_PLATFORMS.MT5&&o.createElement(o.Fragment,null,o.createElement(u.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),o.createElement(u.Icon,{icon:"IcMt5DevicePhone",width:48,height:74})),_e===s.CFD_PLATFORMS.DXTRADE&&o.createElement(o.Fragment,null,o.createElement(u.Icon,{icon:"IcDxtradeDeviceTablet",width:133,height:106}),o.createElement(u.Icon,{icon:"IcDxtradeDevicePhone",width:48,height:74}))),o.createElement("div",{className:"cfd-dashboard__download-center-options--mobile-links"},o.createElement("a",{href:_e===s.CFD_PLATFORMS.MT5?Ue("android"):We("android"),target:"_blank",rel:"noopener noreferrer"},o.createElement(u.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),o.createElement("a",{href:_e===s.CFD_PLATFORMS.MT5?Ue("ios"):We("ios"),target:"_blank",rel:"noopener noreferrer"},o.createElement(u.Icon,{icon:"IcInstallationApple",width:135,height:40})))))),o.createElement(mn,{platform:_e}),o.createElement(_n,{platform:_e,has_suspended_account:je}),o.createElement(pn,null),_e===s.CFD_PLATFORMS.MT5&&o.createElement(o.Fragment,null,o.createElement(ze,null),o.createElement(xn,null)),o.createElement(Sn,{platform:_e}),o.createElement(_(),{platform:_e,enableApp:xe,disableApp:Oe,toggleResetTradingPasswordModal:Se,is_visible:Ee,is_loading:H,verification_code:Re}))):o.createElement(u.PageError,{buttonSize:"medium",header:o.createElement(d.Localize,{i18n_default_text:"{{platform_name_mt5}} is not available in {{country}}",values:{country:L.residence,platform_name_mt5:(0,s.getPlatformSettings)("mt5").name},components:[o.createElement("br",{key:0})]}),messages:[o.createElement(d.Localize,{key:0,i18n_default_text:"Please explore our other platforms."})],redirect_urls:[s.routes.trade,s.routes.bot],redirect_labels:[o.createElement(d.Localize,{key:0,i18n_default_text:"Explore {{platform_name_trader}}",values:{platform_name_trader:(0,s.getPlatformSettings)("trader").name}}),o.createElement(d.Localize,{key:1,i18n_default_text:"Explore {{platform_name_dbot}}",values:{platform_name_dbot:(0,s.getPlatformSettings)("dbot").name}})]})):o.createElement(l.Redirect,{to:s.routes.mt5})})));function Vn(){return Vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vn.apply(this,arguments)}var Gn,Xn=o.lazy((function(){return n.e("404").then(n.bind(n,"./src/Modules/Page404/index.js"))})),qn={path:s.routes.error404,component:Xn,getTitle:function(){return(0,d.localize)("Error 404")}};const Yn=function(){return Gn||(Gn=[{path:s.routes.dxtrade,component:function(e){return o.createElement(Bn,Vn({},e,{platform:"dxtrade"}))},getTitle:function(){return(0,d.localize)("Deriv X")},is_authenticated:!1},{path:s.routes.mt5,component:function(e){return o.createElement(Bn,Vn({},e,{platform:"mt5"}))},getTitle:function(){return(0,d.localize)("MT5")},is_authenticated:!1}]).push(qn),Gn};var Hn=function e(t,n){var r;return n.some((function(n){var a;try{a=(0,c.matchPath)(t,n)}catch(e){if(/undefined/.test(e.message))return}return a?(r=n,!0):!!n.routes&&(r=e(t,n.routes))})),r},Jn=["active_class","to","children"];function Kn(){return Kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kn.apply(this,arguments)}function $n(){return $n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$n.apply(this,arguments)}function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){er(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(e){var t=e.active_class,n=e.to,r=e.children,a=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Jn),i=(o.useContext(s.PlatformContext).is_dashboard,function(e){return/^\//.test(e)?e:"/".concat(e||"")}(n)),c=Hn(i,Yn());if(!c)throw new Error("Route not found: ".concat(n));return n?o.createElement(l.NavLink,Kn({to:i,activeClassName:t||"active",exact:c.exact},a),r):o.createElement("a",a,r)}).propTypes={active_class:a().string,children:a().oneOfType([a().object,a().array,a().string]),to:a().string};const tr=function(e){return o.createElement(l.Route,{exact:e.exact,path:e.path,render:function(t){var n,r=null;if(e.component===l.Redirect){var a=e.to;e.path===s.routes.index&&(a=t.location.pathname.toLowerCase().replace(e.path,"")),r=o.createElement(l.Redirect,{to:a})}else if(!e.is_authenticated||e.is_logged_in||e.is_logging_in){var i,c=(null!==(i=e.routes)&&void 0!==i?i:[]).reduce((function(e,t){return Qn(Qn({},e),t.subroutes.find((function(e){return e.default})))}),{}),u=!(0,s.isEmptyObject)(c),f=(0,s.removeBranchName)(location.pathname);r=o.createElement(o.Fragment,null,u&&f===e.path&&o.createElement(l.Redirect,{to:c.path}),o.createElement(e.component,$n({},t,{routes:e.routes})))}else(0,s.redirectToLogin)(e.is_logged_in,(0,d.getLanguage)());var _=(null===(n=e.getTitle)||void 0===n?void 0:n.call(e))||"";return document.title="".concat(_," | ").concat(s.default_title),r}})};function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nr.apply(this,arguments)}const rr=function(e){o.useContext(s.PlatformContext).is_dashboard;return o.createElement(o.Suspense,{fallback:function(){return o.createElement("div",null,o.createElement(d.Localize,{i18n_default_text:"Loading..."}))}},o.createElement(l.Switch,null,Yn().map((function(t){return o.createElement(tr,nr({key:t.path},t,e))}))))};var ar=function(e){var t=e.header,n=e.message,r=e.is_dialog,a=e.redirect_label,i=e.redirectOnClick,c=e.should_show_refresh,l=void 0===c||c?(0,d.localize)("Please refresh this page to continue."):"";return r?o.createElement(u.Dialog,{title:t||(0,d.localize)("There was an error"),is_visible:!0,confirm_button_text:a||(0,d.localize)("Ok"),onConfirm:i||function(){return location.reload()}},n||(0,d.localize)("Sorry, an error occured while processing your request.")):o.createElement(u.PageError,{header:t||(0,d.localize)("Somethings not right"),messages:n?[n,l]:[(0,d.localize)("Sorry, an error occured while processing your request."),l],redirect_urls:[s.routes.trade],redirect_labels:[a||(0,d.localize)("Refresh")],buttonOnClick:i||function(){return location.reload()}})};ar.propTypes={message:a().oneOfType([a().node,a().string,a().object]),type:a().string};const or=ar;var ir=function(e){return e.has_error?o.createElement(or,e.error):o.createElement(rr,{is_logged_in:e.is_logged_in,is_logging_in:e.is_logging_in,passthrough:e.passthrough})};ir.propTypes={error:i.PropTypes.objectOrObservableObject,has_error:a().bool,is_logged_in:a().bool,is_virtual:a().bool};const cr=(0,c.withRouter)(y((function(e){var t=e.client,n=e.common;return{is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,error:n.error,has_error:n.has_error}}))(ir));function lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var sr=function(e,t,n){return t&&lr(e.prototype,t),n&&lr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfd=new Et({root_store:t})}));function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var dr,fr,_r,pr=function(e,t,n){return t&&ur(e.prototype,t),n&&ur(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t.client,this.common=t.common,this.modules=new sr(this,t),this.ui=t.ui,this.gtm=t.gtm,this.rudderstack=t.rudderstack,this.pushwoosh=t.pushwoosh,this.notifications=t.notifications}));const mr=(fr=!1,_r=new qe.PromiseClass,{init:function(e){fr||(dr=e,_r.resolve(dr.server_time),fr=!0)},get:function(){return fr&&dr.server_time?dr.server_time.clone():void 0},timePromise:function(){return fr?Promise.resolve(dr.server_time):_r.promise}});var hr;(0,Xe.configure)({enforceActions:"observed"});function gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vr=function(e){var t=e.passthrough,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o.useState(function(e,t){return hr||(mr.init(e.common),(0,s.setWebsocket)(t),hr=new pr(e))}(t.root_store,t.WS)),1)[0];return o.createElement(v,{store:n},o.createElement(o.Fragment,null,o.createElement(cr,null)))};vr.propTypes={passthrough:a().shape({root_store:a().object,WS:a().object})};const yr=vr}}]);