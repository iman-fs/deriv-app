/*! For license information please see core.main~28ed2440.eef6d67d6d6cf00e3072.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2745],{39402:(t,e,n)=>{n.d(e,{Z:()=>p});var r=n(31025),i=n(42413),o=n(58147);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(){s=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),a=new x(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=h(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function _(){}function f(){}function p(){}var g={};u(g,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(L([])));v&&v!==e&&n.call(v,i)&&(g=v);var m=p.prototype=_.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function r(i,o,s,c){var u=h(t[i],t,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==a(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,u(m,"constructor",p),u(p,"constructor",f),f.displayName=u(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new w(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(m),u(m,c,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=L,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function c(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,s,"next",t)}function s(t){c(o,r,i,a,s,"throw",t)}a(void 0)}))}}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(this,t),this.validation_errors={},this.validation_rules={},this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.partial_fetch_time=0,(0,r.makeObservable)(this,{validation_errors:r.observable,validation_rules:r.observable,partial_fetch_time:r.observable,retrieveFromStorage:r.action,setValidationErrorMessages:r.action,setValidationRules:r.action,addRule:r.action,validateProperty:r.action,validateAllProperties:r.action,onSwitchAccount:r.action.bound,onPreSwitchAccount:r.action.bound,onLogout:r.action.bound,onClientInit:r.action.bound,onNetworkStatusChange:r.action.bound,onThemeChange:r.action.bound,onRealAccountSignupEnd:r.action.bound,disposePreSwitchAccount:r.action.bound,disposeSwitchAccount:r.action.bound,disposeLogout:r.action.bound,disposeClientInit:r.action.bound,disposeNetworkStatusChange:r.action.bound,disposeThemeChange:r.action.bound,disposeRealAccountSignupEnd:r.action.bound,onUnmount:r.action.bound,assertHasValidCache:r.action.bound});var n=e.root_store,i=e.local_storage_properties,o=e.session_storage_properties,a=e.validation_rules,s=e.store_name;Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0});var c=i&&i.length||o&&o.length;if(c){if(!s)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:s,enumerable:!1,writable:!1})}this.root_store=n,this.local_storage_properties=i||[],this.session_storage_properties=o||[],this.setValidationRules(a),this.setupReactionForLocalStorage(),this.setupReactionForSessionStorage(),this.retrieveFromStorage()}var e,n,a;return e=t,n=[{key:"getSnapshot",value:function(t){var e=(0,r.toJS)(this);return(0,i.isEmptyObject)(this.root_store)||(e.root_store=this.root_store),t&&t.length&&(e=t.reduce((function(t,n){return Object.assign(t,d({},n,e[n]))}),{})),e}},{key:"setupReactionForLocalStorage",value:function(){var e=this;this.local_storage_properties.length&&(0,r.reaction)((function(){return e.local_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.local_storage_properties,t.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var e=this;this.session_storage_properties.length&&(0,r.reaction)((function(){return e.session_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.session_storage_properties,t.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(e,n){var r=JSON.stringify(this.getSnapshot(e),(function(t,e){if(null!==e)return e}));n===t.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,r):n===t.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,r)}},{key:"retrieveFromStorage",value:function(){var t=this,e=JSON.parse(localStorage.getItem(this.store_name,{})),n=JSON.parse(sessionStorage.getItem(this.store_name,{})),r=h(h({},e),n);Object.keys(r).forEach((function(e){return t[e]=r[e]}))}},{key:"setValidationErrorMessages",value:function(t,e){var n=this;this.validation_errors[t]&&!n.validation_errors[t].filter((function(t){return!e.includes(t)})).concat(e.filter((function(e){return!n.validation_errors[t].includes(e)}))).length||(this.validation_errors[t]=e)}},{key:"setValidationRules",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(n){t.addRule(n,e[n])}))}},{key:"addRule",value:function(t,e){var n=this;this.validation_rules[t]=e,(0,r.intercept)(this,t,(function(e){return n.validateProperty(t,e.newValue),e}))}},{key:"validateProperty",value:function(t,e){var n=this,r=this.validation_rules[t].trigger,i=d({},t,void 0!==e?e:this[t]),a=d({},t,this.validation_rules[t].rules||[]);r&&Object.hasOwnProperty.call(this,r)&&(i[r]=this[r],a[r]=this.validation_rules[r].rules||[]);var s=new o.Z(i,a,this);s.isPassed(),Object.keys(i).forEach((function(t){n.setValidationErrorMessages(t,s.errors.get(t))}))}},{key:"validateAllProperties",value:function(){var t=this,e=Object.keys(this.validation_rules),n=Object.keys(this.validation_errors);e.forEach((function(e){t.validateProperty(e,t[e])})),n.forEach((function(n){e.includes(n)||delete t.validation_errors[n]}))}},{key:"onSwitchAccount",value:function(t){var e=this;t&&(this.switch_account_listener=t,this.switchAccountDisposer=(0,r.when)((function(){return e.root_store.client.switch_broadcast}),u(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=e.switch_account_listener())||!n.then||"function"!=typeof n.then){t.next=6;break}n.then((function(){e.root_store.client.switchEndSignal(),e.onSwitchAccount(e.switch_account_listener)})),t.next=7;break;case 6:throw new Error("Switching account listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))))}},{key:"onPreSwitchAccount",value:function(t){var e=this;t&&(this.pre_switch_account_listener=t,this.preSwitchAccountDisposer=(0,r.when)((function(){return e.root_store.client.pre_switch_broadcast}),u(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=e.pre_switch_account_listener())||!n.then||"function"!=typeof n.then){t.next=6;break}n.then((function(){e.root_store.client.setPreSwitchAccount(!1),e.onPreSwitchAccount(e.pre_switch_account_listener)})),t.next=7;break;case 6:throw new Error("Pre-switch account listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))))}},{key:"onLogout",value:function(t){var e=this;this.logoutDisposer=(0,r.when)((function(){return e.root_store.client.has_logged_out}),u(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=e.logout_listener())||!n.then||"function"!=typeof n.then){t.next=6;break}n.then((function(){e.root_store.client.setLogout(!1),e.onLogout(e.logout_listener)})),t.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.logout_listener=t}},{key:"onClientInit",value:function(t){var e=this;this.clientInitDisposer=(0,r.when)((function(){return e.root_store.client.initialized_broadcast}),u(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=e.client_init_listener())||!n.then||"function"!=typeof n.then){t.next=6;break}n.then((function(){e.root_store.client.setInitialized(!1),e.onClientInit(e.client_init_listener)})),t.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.client_init_listener=t}},{key:"onNetworkStatusChange",value:function(t){var e=this;this.networkStatusChangeDisposer=(0,r.reaction)((function(){return e.root_store.common.is_network_online}),(function(t){try{e.network_status_change_listener(t)}catch(t){(0,i.isProduction)()||console.error(t)}})),this.network_status_change_listener=t}},{key:"onThemeChange",value:function(t){var e=this;this.themeChangeDisposer=(0,r.reaction)((function(){return e.root_store.ui.is_dark_mode_on}),(function(t){try{e.theme_change_listener(t)}catch(t){(0,i.isProduction)()||console.error(t)}})),this.theme_change_listener=t}},{key:"onRealAccountSignupEnd",value:function(t){var e=this;this.realAccountSignupEndedDisposer=(0,r.when)((function(){return e.root_store.ui.has_real_account_signup_ended}),(function(){try{var t=e.real_account_signup_ended_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Real account signup listeners are required to return a promise.");t.then((function(){e.root_store.ui.setRealAccountSignupEnd(!1),e.onRealAccountSignupEnd(e.real_account_signup_ended_listener)}))}catch(t){(0,i.isProduction)()||console.error(t)}})),this.real_account_signup_ended_listener=t}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(t){if(this.root_store.client.loginid!==t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach((function(t){return t()})),this.partial_fetch_time=!1}}}],n&&f(e.prototype,n),a&&f(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();p.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")})},75672:(t,e,n)=>{n.d(e,{$j:()=>l,z1:()=>u});var r=n(86510),i=n(32735);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=i.createContext(null);var u=function(t){var e=t.store,n=t.children;return i.createElement(c.Provider,{value:a(a({},e),{},{mobxStores:e})},n)},l=function(t){return function(e){return function(t,e){var n=function(n){var o=i.useContext(c),s=e;return function(t){return!("function"!=typeof t||!t.prototype||!t.prototype.isReactComponent)}(e)&&(s=function(t){return i.createElement(e,t)}),(0,r.SZ)((function(){return s(a(a({},n),t(o,n)))}))};return n.displayName=e.name,n}(t,e)}}},18880:(t,e,n)=>{n.d(e,{Z:()=>wt});var r=n(42413),i=n(20374),o=n(49189),a=n.n(o),s=n(31025),c=n(53806),u=n.n(c),l=n(58468),h=n(42669),d=n(31508),_=n.n(d),f=n(16789),p=n(86104),g=n(39402),y=n(74751),v=n(36890),m=n(38759);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function w(){w=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new x(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function h(){}function d(){}function _(){}var f={};s(f,i,(function(){return this}));var p=Object.getPrototypeOf,g=p&&p(p(L([])));g&&g!==e&&n.call(g,i)&&(f=g);var y=_.prototype=h.prototype=Object.create(f);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){function r(i,o,a,s){var c=u(t[i],t,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==b(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=_,s(y,"constructor",_),s(_,"constructor",d),d.displayName=s(_,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(m.prototype),s(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new m(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(y),s(y,a,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=L,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function k(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function S(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){k(o,r,i,a,s,"next",t)}function s(t){k(o,r,i,a,s,"throw",t)}a(void 0)}))}}function O(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=D(t);if(e){var i=D(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T(this,n)}}function T(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return R(t)}function R(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}var I="i18n_language",M="client.accounts",F=new RegExp("^(maltainvest|malta|iom)$"),N=new RegExp("^mt$"),z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(H,t);var e,n,o,c,d,g,b,k,x,L,T,D,z,W,G,U,B,V=C(H);function H(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,H);return(e=V.call(this,{root_store:t,local_storage_properties:["device_data"],store_name:"client_store"})).loginid=void 0,e.preferred_language=void 0,e.upgrade_info=void 0,e.email=void 0,e.accounts={},e.pre_switch_broadcast=!1,e.switched="",e.is_switching=!1,e.switch_broadcast=!1,e.initialized_broadcast=!1,e.currencies_list={},e.residence_list=[],e.states_list=[],e.selected_currency="",e.is_populating_account_list=!1,e.is_populating_mt5_account_list=!0,e.is_populating_dxtrade_account_list=!0,e.has_reality_check=!1,e.is_reality_check_dismissed=void 0,e.reality_check_dur=void 0,e.reality_check_timeout=void 0,e.website_status={},e.account_settings={},e.account_status={},e.device_data={},e.is_logging_in=!1,e.has_logged_out=!1,e.is_landing_company_loaded=!1,e.is_account_setting_loaded=!1,e.has_enabled_two_fa=!1,e.landing_companies={},e.standpoint={iom:!1,svg:!1,malta:!1,maltainvest:!1,gaming_company:!1,financial_company:!1},e.upgradeable_landing_companies=[],e.mt5_disabled_signup_types={real:!1,demo:!1},e.mt5_login_list=[],e.mt5_login_list_error=null,e.dxtrade_accounts_list=[],e.dxtrade_accounts_list_error=null,e.dxtrade_disabled_signup_types={real:!1,demo:!1},e.statement=[],e.obj_total_balance={amount_real:void 0,amount_mt5:void 0,amount_dxtrade:void 0,currency:""},e.verification_code={signup:"",reset_password:"",payment_withdraw:"",payment_agent_withdraw:"",trading_platform_mt5_password_reset:"",trading_platform_dxtrade_password_reset:"",request_email:"",system_email_change:""},e.new_email={system_email_change:""},e.account_limits={},e.self_exclusion={},e.local_currency_config={currency:"",decimal_places:void 0},e.has_cookie_account=!1,e.financial_assessment=null,e.mt5_trading_servers=[],e.dxtrade_trading_servers=[],e.is_mt5_account_list_updated=!1,e.hasAnyRealAccount=function(){return e.account_list.some((function(t){return 0===t.is_virtual}))},e.hasAccountErrorInCFDList=function(t,n){if(!e.is_logged_in)return!1;var i=t===r.CFD_PLATFORMS.MT5?e.mt5_login_list:e.dxtrade_accounts_list;return null==i?void 0:i.some((function(t){return!!t.has_error&&t.account_type===n}))},e.isMT5Allowed=function(t){return!t||!Object.keys(t).length||!(!e.mt5_login_list.some((function(t){return"synthetic"===t.market_type}))&&(e.country_standpoint.is_belgium||e.country_standpoint.is_france))&&("mt_financial_company"in t||"mt_gaming_company"in t)},e.isDxtradeAllowed=function(t){var n;return!(!e.is_logged_in&&e.is_eu_country)&&(!(null!==(n=e.website_status)&&void 0!==n&&n.clients_country&&t&&Object.keys(t).length)||("dxtrade_financial_company"in t||"dxtrade_gaming_company"in t||!e.is_logged_in&&!e.is_eu&&!e.is_eu_country))},e.isBotAllowed=function(){if(!e.is_logged_in&&e.is_eu_country)return!1;var t="maltainvest"===e.landing_company_shortcode;return e.is_virtual?!e.is_multipliers_only:!t&&!e.is_options_blocked},e.setPreferredLanguage=function(t){e.preferred_language=t,r.LocalStore.setObject(I,t)},e.isEuCountrySelected=function(t){return!!t&&(0,p.isEuCountry)(t)},e.isAccountOfType=function(t){var n=(0,y.ai)(e.loginid);return("virtual"===t&&"virtual"===n||"real"===t&&"virtual"!==n||t===n)&&!e.isDisabled()},e.isAccountOfTypeDisabled=function(t){var n=e.account_list.filter((function(e){return(0,y.ai)(e.loginid)===t}));return n.length>0&&n.every((function(t){return t.is_disabled}))},e.shouldCompleteTax=function(){var t;return!!e.isAccountOfType("financial")&&!/crs_tin_information/.test(null===(t=e.account_status||{})||void 0===t?void 0:t.status)},(0,s.makeObservable)(R(e),{loginid:s.observable,preferred_language:s.observable,upgrade_info:s.observable,email:s.observable,accounts:s.observable,pre_switch_broadcast:s.observable,switched:s.observable,is_switching:s.observable,switch_broadcast:s.observable,initialized_broadcast:s.observable,currencies_list:s.observable,residence_list:s.observable,states_list:s.observable,selected_currency:s.observable,is_populating_account_list:s.observable,is_populating_mt5_account_list:s.observable,is_populating_dxtrade_account_list:s.observable,has_reality_check:s.observable,is_reality_check_dismissed:s.observable,reality_check_dur:s.observable,reality_check_timeout:s.observable,website_status:s.observable,account_settings:s.observable,account_status:s.observable,device_data:s.observable,is_logging_in:s.observable,has_logged_out:s.observable,is_landing_company_loaded:s.observable,is_account_setting_loaded:s.observable,landing_companies:s.observable,standpoint:s.observable,upgradeable_landing_companies:s.observable,mt5_disabled_signup_types:s.observable,mt5_login_list:s.observable,mt5_login_list_error:s.observable,dxtrade_accounts_list:s.observable,dxtrade_accounts_list_error:s.observable,dxtrade_disabled_signup_types:s.observable,statement:s.observable,obj_total_balance:s.observable,verification_code:s.observable,new_email:s.observable,account_limits:s.observable,self_exclusion:s.observable,local_currency_config:s.observable,has_cookie_account:s.observable,financial_assessment:s.observable,mt5_trading_servers:s.observable,dxtrade_trading_servers:s.observable,has_enabled_two_fa:s.observable,balance:s.computed,is_reality_check_visible:s.computed,is_svg:s.computed,reality_check_duration:s.computed,reality_check_dismissed:s.computed,has_active_real_account:s.computed,has_maltainvest_account:s.computed,has_malta_account:s.computed,has_any_real_account:s.computed,first_switchable_real_loginid:s.computed,can_change_fiat_currency:s.computed,legal_allowed_currencies:s.computed,upgradeable_currencies:s.computed,current_currency_type:s.computed,available_crypto_currencies:s.computed,has_iom_account:s.computed,has_fiat:s.computed,current_fiat_currency:s.computed,current_landing_company:s.computed,account_list:s.computed,has_real_mt5_login:s.computed,has_real_dxtrade_login:s.computed,has_account_error_in_mt5_real_list:s.computed,has_account_error_in_mt5_demo_list:s.computed,has_account_error_in_dxtrade_real_list:s.computed,has_account_error_in_dxtrade_demo_list:s.computed,can_have_more_real_synthetic_mt5:s.computed,active_accounts:s.computed,all_loginids:s.computed,account_title:s.computed,currency:s.computed,default_currency:s.computed,should_allow_authentication:s.computed,is_authentication_needed:s.computed,is_identity_verification_needed:s.computed,is_tnc_needed:s.computed,is_social_signup:s.computed,is_mt5_password_not_set:s.computed,is_dxtrade_password_not_set:s.computed,is_financial_information_incomplete:s.computed,is_deposit_lock:s.computed,is_withdrawal_lock:s.computed,is_trading_experience_incomplete:s.computed,authentication_status:s.computed,social_identity_provider:s.computed,is_from_restricted_country:s.computed,is_fully_authenticated:s.computed,is_pending_authentication:s.computed,is_financial_account:s.computed,is_age_verified:s.computed,landing_company_shortcode:s.computed,landing_company:s.computed,is_valid_login:s.computed,is_logged_in:s.computed,is_virtual:s.computed,is_eu:s.computed,is_uk:s.computed,country_standpoint:s.computed,can_have_mlt_account:s.computed,can_have_mx_account:s.computed,can_have_mf_account:s.computed,can_upgrade:s.computed,can_upgrade_to:s.computed,virtual_account_loginid:s.computed,is_single_currency:s.computed,account_type:s.computed,is_mt5_allowed:s.computed,is_dxtrade_allowed:s.computed,is_bot_allowed:s.computed,clients_country:s.computed,is_eu_country:s.computed,is_options_blocked:s.computed,is_multipliers_only:s.computed,resetLocalStorageValues:s.action.bound,getBasicUpgradeInfo:s.action.bound,setMT5DisabledSignupTypes:s.action.bound,setCFDDisabledSignupTypes:s.action.bound,getLimits:s.action.bound,setPreferredLanguage:s.action.bound,setCookieAccount:s.action.bound,updateSelfExclusion:s.action.bound,responsePayoutCurrencies:s.action.bound,responseAuthorize:s.action.bound,setWebsiteStatus:s.action.bound,accountRealReaction:s.action.bound,setLoginInformation:s.action.bound,realAccountSignup:s.action.bound,setAccountCurrency:s.action.bound,updateAccountCurrency:s.action.bound,createCryptoAccount:s.action.bound,residence:s.computed,email_address:s.computed,is_website_status_ready:s.computed,updateAccountList:s.action.bound,switchAccount:s.action.bound,resetVirtualBalance:s.action.bound,switchEndSignal:s.action.bound,init:s.action.bound,resetMt5AccountListPopulation:s.action.bound,responseWebsiteStatus:s.action.bound,responseLandingCompany:s.action.bound,setStandpoint:s.action.bound,setRealityCheck:s.action.bound,setLoginId:s.action.bound,setAccounts:s.action.bound,setSwitched:s.action.bound,setIsLoggingIn:s.action.bound,setPreSwitchAccount:s.action.bound,broadcastAccountChange:s.action.bound,switchAccountHandler:s.action.bound,registerReactions:s.action.bound,setBalanceActiveAccount:s.action.bound,setBalanceOtherAccounts:s.action.bound,selectCurrency:s.action.bound,setResidence:s.action.bound,setEmail:s.action.bound,setAccountSettings:s.action.bound,setAccountStatus:s.action.bound,updateAccountStatus:s.action.bound,setInitialized:s.action.bound,cleanUp:s.action.bound,logout:s.action.bound,setLogout:s.action.bound,storeClientAccounts:s.action.bound,setUserLogin:s.action.bound,canStoreClientAccounts:s.action.bound,setVerificationCode:s.action.bound,setNewEmail:s.action.bound,setDeviceData:s.action.bound,getSignupParams:s.action.bound,onSetResidence:s.action.bound,onSignup:s.action.bound,fetchAccountSettings:s.action.bound,fetchResidenceList:s.action.bound,setResidenceList:s.action.bound,fetchStatesList:s.action.bound,resetMt5ListPopulatedState:s.action.bound,updateMt5LoginList:s.action.bound,responseMT5TradingServers:s.action.bound,responseMt5LoginList:s.action.bound,responseDxtradeTradingServers:s.action.bound,responseTradingPlatformAccountsList:s.action.bound,responseStatement:s.action.bound,getChangeableFields:s.action.bound,syncWithLegacyPlatforms:s.action.bound,is_high_risk:s.computed,has_residence:s.computed,setVisibilityRealityCheck:s.action.bound,clearRealityCheckTimeout:s.action.bound,setRealityCheckDuration:s.action.bound,cleanupRealityCheck:s.action.bound,fetchFinancialAssessment:s.action.bound,setTwoFAStatus:s.action.bound,getTwoFAStatus:s.action.bound}),(0,s.reaction)((function(){return[e.is_logged_in,e.loginid,e.email,e.landing_company,e.currency,e.residence,e.account_settings,e.preferred_language]}),(function(){e.setCookieAccount()})),(0,s.when)((function(){return!e.is_logged_in&&e.root_store.ui&&e.root_store.ui.is_real_acc_signup_on}),(function(){return e.root_store.ui.closeRealAccountSignup()})),e}return e=H,n=[{key:"balance",get:function(){if(!(0,r.isEmptyObject)(this.accounts))return this.accounts[this.loginid]&&"balance"in this.accounts[this.loginid]?this.accounts[this.loginid].balance.toString():void 0}},{key:"is_reality_check_visible",get:function(){return!(!this.loginid||!this.landing_company||!this.has_reality_check||this.reality_check_dismissed)}},{key:"is_svg",get:function(){return!!this.landing_company_shortcode&&("svg"===this.landing_company_shortcode||"costarica"===this.landing_company_shortcode)}},{key:"reality_check_duration",get:function(){return this.has_reality_check?this.reality_check_dur||+r.LocalStore.get("reality_check_duration"):void 0}},{key:"reality_check_dismissed",get:function(){return this.has_reality_check?this.is_reality_check_dismissed||JSON.parse(r.LocalStore.get("reality_check_dismissed")||!1):void 0}},{key:"has_active_real_account",get:function(){return this.active_accounts.some((function(t){return 0===t.is_virtual}))}},{key:"has_maltainvest_account",get:function(){return this.active_accounts.some((function(t){return"maltainvest"===t.landing_company_shortcode}))}},{key:"has_malta_account",get:function(){return this.active_accounts.some((function(t){return"malta"===t.landing_company_shortcode}))}},{key:"has_any_real_account",get:function(){return this.hasAnyRealAccount()}},{key:"first_switchable_real_loginid",get:function(){return this.active_accounts.find((function(t){return 0===t.is_virtual&&"svg"===t.landing_company_shortcode})).loginid||void 0}},{key:"can_change_fiat_currency",get:function(){var t,e,n=!this.has_real_mt5_login,r=!this.has_real_dxtrade_login,i=0===this.statement.count&&0===this.statement.transactions.length,o=!(null!==(t=this.account_status)&&void 0!==t&&null!==(e=t.status)&&void 0!==e&&e.includes("deposit_attempt")),a=i&&n&&r&&o;return!this.is_virtual&&a&&"fiat"===this.current_currency_type}},{key:"legal_allowed_currencies",get:function(){var t=this,e=function(){return t.landing_companies.gaming_company?t.landing_companies.gaming_company.legal_allowed_currencies:t.landing_companies.financial_company?t.landing_companies.financial_company.legal_allowed_currencies:[]};if(!this.landing_companies||!this.root_store.ui)return[];if(!this.root_store.ui.real_account_signup_target)return e();if(["set_currency","manage"].includes(this.root_store.ui.real_account_signup_target)&&this.current_landing_company)return this.current_landing_company.legal_allowed_currencies;var n="maltainvest"===this.root_store.ui.real_account_signup_target?"financial":"gaming";return this.landing_companies["".concat(n,"_company")]?this.landing_companies["".concat(n,"_company")].legal_allowed_currencies:e()}},{key:"upgradeable_currencies",get:function(){var t=this;return this.legal_allowed_currencies&&this.website_status.currencies_config?this.legal_allowed_currencies.map((function(e){return A({value:e},t.website_status.currencies_config[e])})):[]}},{key:"current_currency_type",get:function(){return"virtual"===this.account_type?"virtual":this.website_status&&this.website_status.currencies_config&&this.website_status.currencies_config[this.currency]?this.website_status.currencies_config[this.currency].type:void 0}},{key:"available_crypto_currencies",get:function(){var t=Object.values(this.accounts).reduce((function(t,e){return t.push(e.currency),t}),[]);return this.upgradeable_currencies.filter((function(e){return!t.includes(e.value)&&"crypto"===e.type}))}},{key:"has_iom_account",get:function(){return this.active_accounts.some((function(t){return"iom"===t.landing_company_shortcode}))}},{key:"has_fiat",get:function(){var t=Object.values(this.accounts).reduce((function(t,e){return e.is_virtual||t.push(e.currency),t}),[]);return!!this.upgradeable_currencies.filter((function(e){return t.includes(e.value)&&"fiat"===e.type})).length}},{key:"current_fiat_currency",get:function(){var t=Object.values(this.accounts).reduce((function(t,e){return e.is_virtual||t.push(e.currency),t}),[]);return this.has_fiat?this.upgradeable_currencies.filter((function(e){return t.includes(e.value)&&"fiat"===e.type}))[0].value:void 0}},{key:"current_landing_company",get:function(){var t=this,e=this.landing_companies&&Object.keys(this.landing_companies).find((function(e){var n;return(null===(n=t.landing_companies[e])||void 0===n?void 0:n.shortcode)===t.landing_company_shortcode}));return e?this.landing_companies[e]:void 0}},{key:"account_list",get:function(){var t=this;return this.all_loginids.map((function(e){return t.getAccountInfo(e)})).filter((function(t){return t}))}},{key:"has_real_mt5_login",get:function(){return this.mt5_login_list.some((function(t){return"real"===t.account_type}))}},{key:"has_real_dxtrade_login",get:function(){return this.dxtrade_accounts_list.some((function(t){return"real"===t.account_type}))}},{key:"has_account_error_in_mt5_real_list",get:function(){return this.hasAccountErrorInCFDList(r.CFD_PLATFORMS.MT5,"real")}},{key:"has_account_error_in_mt5_demo_list",get:function(){return this.hasAccountErrorInCFDList(r.CFD_PLATFORMS.MT5,"demo")}},{key:"has_account_error_in_dxtrade_real_list",get:function(){return this.hasAccountErrorInCFDList(r.CFD_PLATFORMS.DXTRADE,"real")}},{key:"has_account_error_in_dxtrade_demo_list",get:function(){return this.hasAccountErrorInCFDList(r.CFD_PLATFORMS.DXTRADE,"demo")}},{key:"can_have_more_real_synthetic_mt5",get:function(){var t=this.mt5_login_list.reduce((function(t,e){return"real"!==e.account_type||"synthetic"!==e.market_type&&"gaming"!==e.market_type?t:t+1}),0),e=this.mt5_trading_servers.reduce((function(t,e){return e.supported_accounts.includes("gaming")&&!e.disabled?t+1:t}),0);return t>0&&e>0}},{key:"active_accounts",get:function(){return this.accounts instanceof Object?Object.values(this.accounts).filter((function(t){return!t.is_disabled})):[]}},{key:"all_loginids",get:function(){return(0,r.isEmptyObject)(this.accounts)?[]:Object.keys(this.accounts)}},{key:"account_title",get:function(){return(0,y.GH)(this.loginid)}},{key:"currency",get:function(){return this.selected_currency.length?this.selected_currency:this.is_logged_in?this.accounts[this.loginid].currency:this.default_currency}},{key:"default_currency",get:function(){if(Object.keys(this.currencies_list).length>0){var t=Object.keys(this.currencies_list);return this.currencies_list[(0,i.localize)("Fiat")].length<1?"USD":Object.values(this.currencies_list["".concat(t[0])])[0].text}return"USD"}},{key:"should_allow_authentication",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"allow_document_upload"===t||"allow_poi_resubmission"===t}))}},{key:"is_authentication_needed",get:function(){var t,e,n;return!this.is_fully_authenticated&&!(null===(t=this.account_status)||void 0===t||null===(e=t.authentication)||void 0===e||null===(n=e.needs_verification)||void 0===n||!n.length)}},{key:"is_identity_verification_needed",get:function(){var t,e,n=null===(t=this.account_status)||void 0===t||null===(e=t.authentication)||void 0===e?void 0:e.needs_verification;return 1===(null==n?void 0:n.length)&&(null==n?void 0:n.includes("identity"))}},{key:"is_tnc_needed",get:function(){if(this.is_virtual)return!1;var t=this.account_settings.client_tnc_status,e=this.website_status.terms_conditions_version;return void 0!==t&&t!==e}},{key:"is_social_signup",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.includes("social_signup")}},{key:"is_mt5_password_not_set",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.includes("mt5_password_not_set")}},{key:"is_dxtrade_password_not_set",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.includes("dxtrade_password_not_set")}},{key:"is_financial_information_incomplete",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"financial_information_not_complete"===t}))}},{key:"is_deposit_lock",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"deposit_locked"===t}))}},{key:"is_withdrawal_lock",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"withdrawal_locked"===t}))}},{key:"is_trading_experience_incomplete",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"trading_experience_not_complete"===t}))}},{key:"authentication_status",get:function(){var t,e,n,r,i,o;return{document_status:null===(t=this.account_status)||void 0===t||null===(e=t.authentication)||void 0===e||null===(n=e.document)||void 0===n?void 0:n.status,identity_status:null===(r=this.account_status)||void 0===r||null===(i=r.authentication)||void 0===i||null===(o=i.identity)||void 0===o?void 0:o.status}}},{key:"social_identity_provider",get:function(){var t;return null===(t=this.account_status)||void 0===t?void 0:t.social_identity_provider}},{key:"is_from_restricted_country",get:function(){var t,e=this;return"DISABLED"===(null===(t=this.residence_list.find((function(t){return t.value===e.residence})))||void 0===t?void 0:t.disabled)}},{key:"is_fully_authenticated",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"authenticated"===t}))}},{key:"is_pending_authentication",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"document_under_review"===t}))}},{key:"is_financial_account",get:function(){return!!this.landing_companies&&"financial"===this.account_type}},{key:"is_age_verified",get:function(){var t,e;return null===(t=this.account_status)||void 0===t||null===(e=t.status)||void 0===e?void 0:e.some((function(t){return"age_verification"===t}))}},{key:"landing_company_shortcode",get:function(){if(this.accounts[this.loginid])return this.accounts[this.loginid].landing_company_shortcode}},{key:"landing_company",get:function(){return this.landing_companies}},{key:"is_valid_login",get:function(){if(!this.is_logged_in)return!0;var t=new RegExp("^(MX|MF|VRTC|MLT|CR|FOG)[0-9]+$","i");return this.all_loginids.every((function(e){return t.test(e)}))}},{key:"is_logged_in",get:function(){return!!(!(0,r.isEmptyObject)(this.accounts)&&Object.keys(this.accounts).length>0&&this.loginid&&this.accounts[this.loginid].token)}},{key:"is_virtual",get:function(){return!(0,r.isEmptyObject)(this.accounts)&&this.accounts[this.loginid]&&!!this.accounts[this.loginid].is_virtual}},{key:"is_eu",get:function(){if(!this.landing_companies)return!1;var t=this.landing_companies,e=t.gaming_company,n=t.financial_company,r=t.mt_gaming_company,i=null==n?void 0:n.shortcode,o=null==e?void 0:e.shortcode,a=(null==r?void 0:r.financial.shortcode)||(null==r?void 0:r.swap_free.shortcode);return i||o||a?F.test(i)||F.test(o)||F.test(a):N.test(this.residence)}},{key:"is_uk",get:function(){return"gb"===this.residence}},{key:"country_standpoint",get:function(){var t={is_united_kingdom:this.is_uk,is_isle_of_man:"im"===this.residence,is_france:"fr"===this.residence,is_belgium:"be"===this.residence,is_other_eu:"de"===this.residence||"es"===this.residence||"it"===this.residence||"lu"===this.residence||"gr"===this.residence};return t.is_rest_of_eu=this.is_eu&&!t.is_uk&&!t.is_france&&!t.is_belgium&&!t.is_other_eu,t}},{key:"can_have_mlt_account",get:function(){return["nl","cy","ie","ro","be","lt","bg","cz","dk","se","pl","ee","hr","at","hu","sl","fi","sk","pt","lv"].includes(this.residence)}},{key:"can_have_mx_account",get:function(){return["gb","im"].includes(this.residence)}},{key:"can_have_mf_account",get:function(){return["it","fr","de","lu","es","gr","nl","cy","ie","ro","lt","bg","cz","dk","se","pl","ee","hr","at","hu","sl","fi","sk","pt","lv"].includes(this.residence)}},{key:"can_upgrade",get:function(){return this.upgrade_info&&(this.upgrade_info.can_upgrade||this.upgrade_info.can_open_multi)}},{key:"can_upgrade_to",get:function(){return this.upgrade_info&&this.upgrade_info.can_upgrade_to}},{key:"virtual_account_loginid",get:function(){var t=this;return this.all_loginids.find((function(e){return!!t.accounts[e].is_virtual}))}},{key:"is_single_currency",get:function(){var t=this;return 1===Object.keys(this.currencies_list).map((function(e){return Object.values(t.currencies_list[e]).length})).reduce((function(t,e){return t+e}),0)}},{key:"account_type",get:function(){return(0,y.ai)(this.loginid)}},{key:"is_mt5_allowed",get:function(){return this.isMT5Allowed(this.landing_companies)}},{key:"is_dxtrade_allowed",get:function(){return this.isDxtradeAllowed(this.landing_companies)}},{key:"is_bot_allowed",get:function(){return this.isBotAllowed()}},{key:"clients_country",get:function(){var t;return null===(t=this.website_status)||void 0===t?void 0:t.clients_country}},{key:"is_eu_country",get:function(){var t=this.website_status.clients_country;return!!t&&(0,p.isEuCountry)(t)}},{key:"is_options_blocked",get:function(){return(0,p.isOptionsBlocked)(this.residence)}},{key:"is_multipliers_only",get:function(){return(0,p.isMultipliersOnly)(this.residence)}},{key:"resetLocalStorageValues",value:function(t){this.accounts[t].accepted_bch=0,r.LocalStore.setObject(M,this.accounts),r.LocalStore.set("active_loginid",t),this.syncWithLegacyPlatforms(t,(0,s.toJS)(this.accounts)),this.loginid=t}},{key:"getBasicUpgradeInfo",value:function(){var t,e,n=this,i=O(new Set(r.State.getResponse("authorize.upgradeable_landing_companies"))),o=!1;return(i||[]).length&&(o=-1!==i.indexOf(this.accounts[this.loginid].landing_company_shortcode),e=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.find((function(t){return t!==n.accounts[n.loginid].landing_company_shortcode&&-1!==i.indexOf(t)}))}("svg","iom","malta","maltainvest"),e&&(t="maltainvest"===e?"financial":"real")),{type:t,can_upgrade:!!e,can_upgrade_to:e,can_open_multi:o}}},{key:"setMT5DisabledSignupTypes",value:function(t){var e=this.mt5_disabled_signup_types;this.mt5_disabled_signup_types=A(A({},e),t)}},{key:"setCFDDisabledSignupTypes",value:function(t,e){if(t===r.CFD_PLATFORMS.DXTRADE){var n=this.dxtrade_disabled_signup_types;this.dxtrade_disabled_signup_types=A({current_list:n},e)}}},{key:"getLimits",value:function(){var t=this;return new Promise((function(e){l.WS.authorized.storage.getLimits().then((function(n){(0,s.runInAction)((function(){n.error?(t.account_limits={api_initial_load_error:n.error.message},e(n)):(t.account_limits=A(A({},n.get_limits),{},{is_loading:!1}),e(n))}))}))}))}},{key:"setCookieAccount",value:function(){var t=/deriv\.(com|me)/.test(window.location.hostname)?r.deriv_urls.DERIV_HOST_NAME:"binary.sx",e=this.loginid,n=this.email,i=this.landing_company_shortcode,o=this.currency,s=this.residence,c=this.account_settings,u=this.preferred_language,l=this.user_id,h=c.first_name,d=c.last_name,_=c.name;if(e&&n){var f={loginid:e,email:n,landing_company_shortcode:i,currency:o,residence:s,first_name:h,last_name:d,name:_,preferred_language:u,user_id:l};a().set("client_information",f,{domain:t}),this.has_cookie_account=!0}else a().remove("client_information",{domain:t}),this.has_cookie_account=!1}},{key:"getSelfExclusion",value:function(){var t=this;return new Promise((function(e){l.WS.authorized.storage.getSelfExclusion().then((function(n){(0,s.runInAction)((function(){n.get_self_exclusion?t.self_exclusion=n.get_self_exclusion:t.self_exclusion=!1,e(n)}))}))}))}},{key:"updateSelfExclusion",value:function(t){var e=this;return new Promise((function(n){l.WS.authorized.storage.setSelfExclusion(t).then((function(t){t.error||e.getSelfExclusion(),n(t)}))}))}},{key:"responsePayoutCurrencies",value:function(t){var e=t.payout_currencies||t;this.currencies_list=(0,m.G)(e),this.selectCurrency("")}},{key:"responseAuthorize",value:function(t){this.accounts[this.loginid].email=t.authorize.email,this.accounts[this.loginid].currency=t.authorize.currency,this.accounts[this.loginid].is_virtual=+t.authorize.is_virtual,this.accounts[this.loginid].session_start=parseInt(u()().utc().valueOf()/1e3),this.accounts[this.loginid].landing_company_shortcode=t.authorize.landing_company_name,this.accounts[this.loginid].country=t.country,this.updateAccountList(t.authorize.account_list),this.upgrade_info=this.getBasicUpgradeInfo(),this.user_id=t.authorize.user_id,this.upgradeable_landing_companies=O(new Set(t.authorize.upgradeable_landing_companies)),this.local_currency_config.currency=Object.keys(t.authorize.local_currencies)[0],this.local_currency_config.decimal_places=(0,r.isEmptyObject)(t.authorize.local_currencies)?2:+t.authorize.local_currencies[this.local_currency_config.currency].fractional_digits}},{key:"setWebsiteStatus",value:function(t){this.website_status=t.website_status,this.responseWebsiteStatus(t),(0,r.setCurrencies)(this.website_status)}},{key:"accountRealReaction",value:(B=S(w().mark((function t(e){var n=this;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var i,o,a=!!r.LocalStore.get(M);(0,s.runInAction)((function(){n.is_populating_account_list=!0})),n.is_logged_in&&!a&&(localStorage.setItem(M,JSON.stringify(n.accounts)),r.LocalStore.set(M,JSON.stringify(n.accounts)));try{o=JSON.parse(r.LocalStore.get(M))}catch(t){console.error("JSON parse failed, invalid value (client.accounts): ",t)}var c=null!==(i=e.new_account_real)&&void 0!==i?i:e.new_account_maltainvest,u=c.oauth_token,h=c.client_id;_().authorize(u).then((function(e){var r={};r.token=u,r.residence=e.authorize.country,r.currency=e.authorize.currency,r.is_virtual=e.authorize.is_virtual,r.landing_company_name=e.authorize.landing_company_fullname,r.landing_company_shortcode=e.authorize.landing_company_name,(0,s.runInAction)((function(){return o[h]=r})),n.setLoginInformation(o,h),l.WS.authorized.storage.getSettings().then((function(e){n.setAccountSettings(e.get_settings),t()}))})).catch((function(t){console.error("Something went wrong while registering a real account: ",t)}))})));case 1:case"end":return t.stop()}}),t)}))),function(t){return B.apply(this,arguments)})},{key:"setLoginInformation",value:function(t,e){this.setAccounts(t),localStorage.setItem(M,JSON.stringify(t)),r.LocalStore.set(M,JSON.stringify(t)),this.is_populating_account_list=!1,this.upgrade_info=this.getBasicUpgradeInfo(),this.setSwitched(e),this.syncWithLegacyPlatforms(e,t)}},{key:"realAccountSignup",value:(U=S(w().mark((function t(e){var n,r,i,o,a;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="BTC",r="maltainvest"===this.root_store.ui.real_account_signup_target,i="samoa"===this.root_store.ui.real_account_signup_target,o="",e.residence=this.residence,r&&(o=e.currency,e.accept_risk=e.accept_risk||0),!r){t.next=12;break}return t.next=9,l.WS.newAccountRealMaltaInvest(e);case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,l.WS.newAccountReal(e);case 14:t.t0=t.sent;case 15:if((a=t.t0).error){t.next=26;break}return t.next=19,this.accountRealReaction(a);case 19:if(!i){t.next=22;break}return t.next=22,this.setAccountCurrency(n);case 22:return localStorage.removeItem("real_account_signup_wizard"),t.next=25,this.root_store.gtm.pushDataLayer({event:"real_signup"});case 25:return t.abrupt("return",Promise.resolve(A(A(A({},a),r?{new_account_maltainvest:A(A({},a.new_account_maltainvest),{},{currency:o})}:{}),i?{new_account_samoa:{currency:o}}:{})));case 26:return t.abrupt("return",Promise.reject(a.error));case 27:case"end":return t.stop()}}),t,this)}))),function(t){return U.apply(this,arguments)})},{key:"setAccountCurrency",value:(G=S(w().mark((function t(e){var n;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.WS.setAccountCurrency(e,{previous_currency:this.currency});case 2:if((n=t.sent).error){t.next=7;break}return t.next=6,this.updateAccountCurrency(e);case 6:return t.abrupt("return",Promise.resolve(n));case 7:return t.abrupt("return",Promise.reject(n.error));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return G.apply(this,arguments)})},{key:"updateAccountCurrency",value:(W=S(w().mark((function t(e){var n,i=this,o=arguments;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(o.length>1&&void 0!==o[1])||o[1],(0,s.runInAction)((function(){var t=A({},i.accounts[i.loginid]);t.currency=e,"balance"in t||(t.balance=0),i.accounts[i.loginid]=t})),n&&(localStorage.setItem(M,JSON.stringify(this.accounts)),r.LocalStore.setObject(M,JSON.parse(JSON.stringify(this.accounts)))),this.selectCurrency(e),this.root_store.notifications.removeNotificationMessage({key:"currency"}),this.root_store.notifications.removeNotificationByKey({key:"currency"}),t.next=8,this.init();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return W.apply(this,arguments)})},{key:"createCryptoAccount",value:(z=S(w().mark((function t(e){var n,i,o,a,s,c,u;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.residence,i=this.account_settings,o=i.date_of_birth,a=i.first_name,s=i.last_name,c={residence:n,currency:e,first_name:a,last_name:s,date_of_birth:(0,r.toMoment)(o).format("YYYY-MM-DD")},t.next=5,l.WS.newAccountReal(c);case 5:if((u=t.sent).error){t.next=10;break}return t.next=9,this.accountRealReaction(u);case 9:return t.abrupt("return",Promise.resolve(u));case 10:return t.abrupt("return",Promise.reject(u.error));case 11:case"end":return t.stop()}}),t,this)}))),function(t){return z.apply(this,arguments)})},{key:"residence",get:function(){var t;return this.is_logged_in&&null!==(t=this.account_settings.country_code)&&void 0!==t?t:""}},{key:"email_address",get:function(){return this.accounts&&this.accounts[this.loginid]?this.accounts[this.loginid].email:""}},{key:"is_website_status_ready",get:function(){return this.website_status&&!_().getAvailability().is_down}},{key:"updateAccountList",value:function(t){var e=this;t.forEach((function(t){e.accounts[t.loginid]&&(e.accounts[t.loginid].excluded_until=t.excluded_until||"",Object.keys(t).forEach((function(n){var r="country"===n?"residence":n,i=void 0===t[n]?"":t[n];"loginid"!==r&&(e.accounts[t.loginid][r]=i)})))}))}},{key:"switchAccount",value:(D=S(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setPreSwitchAccount(!0),this.setIsLoggingIn(!0),this.root_store.notifications.removeNotifications(!0),this.root_store.notifications.removeAllNotificationMessages(!0),this.setSwitched(e),t.t0=this,t.next=8,l.WS.authorized.payoutCurrencies();case 8:t.t1=t.sent,t.t0.responsePayoutCurrencies.call(t.t0,t.t1);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return D.apply(this,arguments)})},{key:"resetVirtualBalance",value:(T=S(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.root_store.notifications.removeNotificationByKey({key:"reset_virtual_balance"}),this.root_store.notifications.removeNotificationMessage({key:"reset_virtual_balance",should_show_again:!0}),t.next=4,l.WS.authorized.topupVirtual();case 4:case"end":return t.stop()}}),t,this)}))),function(){return T.apply(this,arguments)})},{key:"switchEndSignal",value:function(){this.switch_broadcast=!1}},{key:"init",value:(L=S(w().mark((function t(e){var n,o,a,c,u,d,f,p,g,y,v,m=this;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.location.search,o=new URLSearchParams(n),a=null==o?void 0:o.get("redirect_url"),c=null==o?void 0:o.get("code"),u=null==o?void 0:o.get("action"),this.setIsLoggingIn(!0),t.next=8,this.setUserLogin(e);case 8:if(d=t.sent,n&&(c&&u&&this.setVerificationCode(c,u),document.addEventListener("DOMContentLoaded",(function(){setTimeout((function(){history.replaceState(null,null,window.location.search.replace(/&?code=[^&]*/i,""))}),0)}))),this.setDeviceData(),null==d||!d.error){t.next=19;break}return t.next=14,this.logout();case 14:return this.root_store.common.setError(!0,{header:d.error.message,message:(0,i.localize)("Please Log in"),should_show_refresh:!1,redirect_label:(0,i.localize)("Log in"),redirectOnClick:function(){return(0,r.redirectToLogin)(!1,(0,i.getLanguage)())}}),this.setIsLoggingIn(!1),this.setInitialized(!1),this.setSwitched(""),t.abrupt("return",!1);case 19:if(this.setLoginId(r.LocalStore.get("active_loginid")),this.setAccounts(r.LocalStore.getObject(M)),this.setSwitched(""),f=this.accounts[this.loginid],!d){t.next=38;break}if(this.loginid!==d.authorize.loginid){t.next=32;break}return h.Z.authorizeAccount(d),t.next=28,this.root_store.rudderstack.identifyEvent();case 28:return t.next=30,this.root_store.gtm.pushDataLayer({event:"login"});case 30:t.next=34;break;case 32:return t.next=34,_().authorize(f.token);case 34:a&&(p=r.routes[a].length>1?r.routes[a]:"",["payment_agent_withdraw","payment_withdraw","reset_password"].includes(u)?(g=(0,r.filterUrlQuery)(n,["platform","code","action"]),[r.routes.cashier_withdrawal,r.routes.cashier_pa].includes(p)?window.location.replace("/redirect?".concat(g)):window.location.replace("".concat(p,"/redirect?").concat(g))):window.location.replace("".concat(p,"/?").concat((0,r.filterUrlQuery)(n,["platform"])))),(0,s.runInAction)((function(){m.is_populating_account_list=!1})),"EN"!==(y=d.authorize.preferred_language)&&y!==r.LocalStore.get(I)&&window.location.replace((0,r.urlForLanguage)(d.authorize.preferred_language));case 38:return this.selectCurrency(""),t.t0=this,t.next=42,l.WS.authorized.payoutCurrencies();case 42:if(t.t1=t.sent,t.t0.responsePayoutCurrencies.call(t.t0,t.t1),!this.is_logged_in){t.next=70;break}return l.WS.storage.mt5LoginList().then(this.responseMt5LoginList),l.WS.tradingServers(r.CFD_PLATFORMS.MT5).then(this.responseMT5TradingServers),l.WS.tradingPlatformAccountsList(r.CFD_PLATFORMS.DXTRADE).then(this.responseTradingPlatformAccountsList),l.WS.tradingServers(r.CFD_PLATFORMS.DXTRADE).then(this.responseDxtradeTradingServers),t.t2=this,t.next=52,_().send({statement:1});case 52:return t.t3=t.sent,t.t2.responseStatement.call(t.t2,t.t3),t.next=56,l.WS.authorized.cache.getSettings();case 56:return(v=t.sent.get_settings)&&this.setPreferredLanguage(v.preferred_language),t.next=60,this.fetchResidenceList();case 60:return t.next=62,this.getTwoFAStatus();case 62:return v&&!v.residence&&this.root_store.ui.toggleSetResidenceModal(!0),t.next=65,l.WS.authorized.cache.landingCompany(this.residence).then(this.responseLandingCompany);case 65:if(this.is_virtual){t.next=68;break}return t.next=68,this.getLimits();case 68:t.next=71;break;case 70:this.resetMt5AccountListPopulation();case 71:return t.t4=this,t.next=74,l.WS.wait("website_status");case 74:return t.t5=t.sent,t.t4.responseWebsiteStatus.call(t.t4,t.t5),this.registerReactions(),this.setIsLoggingIn(!1),this.setInitialized(!0),t.abrupt("return",!0);case 80:case"end":return t.stop()}}),t,this)}))),function(t){return L.apply(this,arguments)})},{key:"resetMt5AccountListPopulation",value:function(){this.is_populating_mt5_account_list=!1}},{key:"responseWebsiteStatus",value:function(t){this.website_status=t.website_status,this.website_status.message&&this.website_status.message.length?this.root_store.notifications.addNotificationMessage({key:"maintenance",header:(0,i.localize)("Site is being updated"),message:(0,i.localize)(this.website_status.message),type:"warning",is_persistent:!0}):this.root_store.notifications.removeNotificationMessage({key:"maintenance"})}},{key:"responseLandingCompany",value:function(t){this.is_landing_company_loaded=!0,this.landing_companies=t.landing_company,this.setStandpoint(this.landing_companies),this.setRealityCheck()}},{key:"setStandpoint",value:function(t){if(t){var e,n,r,i,o=t.gaming_company,a=t.financial_company;null!=o&&o.shortcode&&(this.standpoint=A(A({},this.standpoint),{},(E(n={},o.shortcode,!(null==o||!o.shortcode)),E(n,"gaming_company",null!==(e=null==o?void 0:o.shortcode)&&void 0!==e&&e),n))),null!=a&&a.shortcode&&(this.standpoint=A(A({},this.standpoint),{},(E(i={},a.shortcode,!(null==a||!a.shortcode)),E(i,"financial_company",null!==(r=null==a?void 0:a.shortcode)&&void 0!==r&&r),i)))}}},{key:"setRealityCheck",value:function(){var t;this.has_reality_check=null===(t=this.current_landing_company)||void 0===t?void 0:t.has_reality_check,this.has_reality_check&&this.reality_check_duration&&void 0===this.reality_check_timeout&&this.setRealityCheckDuration(this.reality_check_duration)}},{key:"setLoginId",value:function(t){this.loginid=t}},{key:"setAccounts",value:function(t){this.accounts=t}},{key:"setSwitched",value:function(t){this.switched=t}},{key:"isDisabled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.getAccount(t).is_disabled}},{key:"getToken",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.getAccount(t).token}},{key:"getAccount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.accounts[t]}},{key:"getAccountInfo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid,e=this.getAccount(t),n=e.currency,r=e.is_disabled,o=e.is_virtual,a=!o&&n?n:this.account_title;return{loginid:t,is_disabled:r,is_virtual:o,icon:a.toLowerCase(),title:"virtual"===a.toLowerCase()?(0,i.localize)("DEMO"):a}}},{key:"setIsLoggingIn",value:function(t){this.is_logging_in=t}},{key:"setPreSwitchAccount",value:function(t){this.pre_switch_broadcast=t}},{key:"broadcastAccountChange",value:function(){this.switch_broadcast=!0}},{key:"broadcastAccountChangeAfterAuthorize",value:function(){var t=this;return _().wait("authorize").then((function(){t.broadcastAccountChange()}))}},{key:"handleNotFoundLoginId",value:function(){this.root_store.notifications.addNotificationMessage({message:(0,i.localize)("Could not switch to default account."),type:"danger"}),this.logout()}},{key:"isUnableToFindLoginId",value:function(){var t=this;return!this.all_loginids.some((function(e){return e!==t.switched}))||this.switched===this.loginid}},{key:"switchAccountHandler",value:(x=S(w().mark((function t(){var e,n,r,o=this;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.switched&&this.switched.length&&null!==(e=this.getAccount(this.switched))&&void 0!==e&&e.token){t.next=9;break}if(!this.isUnableToFindLoginId()){t.next=4;break}return this.handleNotFoundLoginId(),t.abrupt("return");case 4:return this.root_store.notifications.addNotificationMessage({message:(0,i.localize)("Switching to default account."),type:"info"}),this.switchAccount(this.all_loginids[0]),t.next=8,this.switchAccountHandler();case 8:return t.abrupt("return");case 9:if((0,s.runInAction)((function(){return o.is_switching=!0})),n=this.loginid,this.resetLocalStorageValues(this.switched),f.clear(),!(r=this.is_virtual||/VRTC/.test(n))){t.next=20;break}return _().closeAndOpenNewConnection(),t.next=18,_().wait("authorize");case 18:t.next=24;break;case 20:return t.next=22,l.WS.forgetAll("balance");case 22:return t.next=24,_().authorize(this.getToken());case 24:return this.root_store.common.has_error&&this.root_store.common.setError(!1,null),sessionStorage.setItem("active_tab","1"),this.root_store.gtm.setLoginFlag(),t.next=29,this.init();case 29:r||this.broadcastAccountChange(),this.is_virtual||this.getLimits(),(0,s.runInAction)((function(){return o.is_switching=!1}));case 32:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)})},{key:"registerReactions",value:function(){var t=this;(0,s.when)((function(){return t.switched}),(function(){var e;null!==(e=t.accounts[t.switched])&&void 0!==e&&e.is_virtual&&(t.root_store.notifications.removeNotifications(!0),t.root_store.notifications.removeAllNotificationMessages()),t.switchAccountHandler()}))}},{key:"setBalanceActiveAccount",value:function(t){this.accounts[null==t?void 0:t.loginid]&&t.loginid===this.loginid&&(this.accounts[t.loginid].balance=t.balance,this.accounts[t.loginid].is_virtual&&this.root_store.notifications.resetVirtualBalanceNotification(t.loginid),this.resetLocalStorageValues(this.loginid))}},{key:"setBalanceOtherAccounts",value:function(t){var e,n,i,o=this;if((null===(e=this.root_store.modules)||void 0===e||null===(n=e.cashier)||void 0===n||null===(i=n.account_transfer)||void 0===i||!i.is_mt5_transfer_in_progress)&&(this.accounts[null==t?void 0:t.loginid]&&!t.accounts&&t.loginid!==this.loginid&&(this.accounts[t.loginid].balance=t.balance),this.accounts[null==t?void 0:t.loginid]&&t.accounts&&Object.keys(t.accounts).forEach((function(e){e!==o.loginid&&o.accounts[e]&&(o.accounts[e].balance=+t.accounts[e].balance)})),null!=t&&t.total)){var a=(0,r.getPropertyValue)(t,["total","deriv"]),s=(0,r.getPropertyValue)(t,["total",r.CFD_PLATFORMS.MT5]),c=(0,r.getPropertyValue)(t,["total",r.CFD_PLATFORMS.DXTRADE]),u=!(0,r.isEmptyObject)(s),l=!(0,r.isEmptyObject)(c);this.obj_total_balance={amount_real:+a.amount,amount_mt5:u?+s.amount:this.obj_total_balance.amount_mt5,amount_dxtrade:l?+c.amount:this.obj_total_balance.amount_dxtrade,currency:a.currency}}}},{key:"selectCurrency",value:function(t){this.selected_currency=t}},{key:"setResidence",value:function(t){this.accounts[this.loginid].residence=t}},{key:"setEmail",value:function(t){this.accounts[this.loginid].email=t,this.email=t}},{key:"setAccountSettings",value:function(t){this.account_settings=t,this.is_account_setting_loaded=!0}},{key:"setAccountStatus",value:function(t){this.account_status=t}},{key:"updateAccountStatus",value:(k=S(w().mark((function t(){var e;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.WS.authorized.getAccountStatus();case 2:(e=t.sent).error||this.setAccountStatus(e.get_account_status);case 4:case"end":return t.stop()}}),t,this)}))),function(){return k.apply(this,arguments)})},{key:"setInitialized",value:function(t){this.initialized_broadcast=t}},{key:"cleanUp",value:function(){var t=this;this.root_store.gtm.pushDataLayer({event:"log_out"}),this.loginid=null,this.user_id=null,this.upgrade_info=void 0,this.accounts={},this.mt5_login_list=[],this.landing_companies={},localStorage.setItem("active_loginid",this.loginid),localStorage.setItem("client.accounts",JSON.stringify(this.accounts)),(0,s.runInAction)(S(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,l.WS.payoutCurrencies();case 3:e.t1=e.sent,e.t0.responsePayoutCurrencies.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})))),this.root_store.notifications.removeAllNotificationMessages(!0),this.syncWithLegacyPlatforms(this.loginid,this.accounts),this.cleanupRealityCheck()}},{key:"logout",value:(b=S(w().mark((function t(){var e;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.Y)();case 2:return 1===(null==(e=t.sent)?void 0:e.logout)&&(this.cleanUp(),this.root_store.rudderstack.reset(),this.setLogout(!0)),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return b.apply(this,arguments)})},{key:"setLogout",value:function(t){this.has_logged_out=t,this.root_store.common.has_error&&this.root_store.common.setError(!1,null)}},{key:"storeClientAccounts",value:function(t,e){var n,r={country:"residence",landing_company_name:"landing_company_shortcode"},i={};t.selected_acct&&(n=t.selected_acct),e.forEach((function(t){Object.keys(t).forEach((function(e){if("loginid"===e)n||t.is_disabled||(t.is_virtual?t.is_virtual&&(n=t[e]):n=t[e]);else{var o=r[e]||e,a=void 0===t[e]?"":t[e];t.loginid in i||(i[t.loginid]={}),i[t.loginid][o]=a}}))}));for(var o=1;t["acct".concat(o)];){var a=t["acct".concat(o)],s=t["token".concat(o)];a&&s&&(i[a].token=s),o++}n&&i[n].token||(n=t.acct1),n&&Object.keys(i).length&&(localStorage.setItem("active_loginid",n),localStorage.setItem("client.accounts",JSON.stringify(i)),this.syncWithLegacyPlatforms(n,this.accounts))}},{key:"setUserLogin",value:(g=S(w().mark((function t(e){var n,r,o,a,c,u,l=this;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={},window.location.search&&((o=new URLSearchParams(window.location.search)).forEach((function(t,e){["acct","token","cur"].some((function(t){return(null==e?void 0:e.includes(t))&&"affiliate_token"!==e}))&&(n[e]=t)})),Object.keys(n).forEach((function(t){return o.delete(t)})),o.delete("state"),o=null===(r=o)||void 0===r?void 0:r.toString(),a=o?"?".concat(o):"/",history.replaceState(null,null,"".concat(a).concat(window.location.hash))),!(c=e?e.token1:n.token1)){t.next=16;break}return window.history.replaceState({},document.title,sessionStorage.getItem("redirect_url")),f.clear(),this.is_populating_account_list=!0,t.next=10,_().authorize(c);case 10:if(u=t.sent,e&&(n=e),!u.error){t.next=14;break}return t.abrupt("return",u);case 14:return(0,s.runInAction)((function(){var t=(u.authorize||{}).account_list;l.upgradeable_landing_companies=O(new Set(u.upgradeable_landing_companies)),l.canStoreClientAccounts(n,t)?l.storeClientAccounts(n,t):u.error={code:"MismatchedAcct",message:(0,i.localize)("Invalid token")}})),t.abrupt("return",u);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"canStoreClientAccounts",value:function(t,e){var n=e&&(0,r.isEmptyObject)(this.accounts),i=Object.keys(t).filter((function(t){return/^acct./.test(t)})).every((function(n){return e.some((function(e){return e.loginid===t[n]}))}));return n&&i}},{key:"setVerificationCode",value:function(t,e){this.verification_code[e]=t,t?r.LocalStore.set("verification_code.".concat(e),t):r.LocalStore.remove("verification_code.".concat(e)),"signup"===e&&this.fetchResidenceList()}},{key:"setNewEmail",value:function(t,e){this.new_email[e]=t,t?r.LocalStore.set("new_email.".concat(e),t):r.LocalStore.remove("new_email.".concat(e))}},{key:"setDeviceData",value:function(){(0,v.T)("signup_device",(0,r.isDesktopOs)()?"desktop":"mobile")}},{key:"getSignupParams",value:function(){var t={},e=new URLSearchParams(window.location.search);return["date_first_contact","signup_device","gclid_url","utm_source","utm_ad_id","utm_adgroup_id","utm_adrollclk_id","utm_campaign_id","utm_campaign","utm_fbcl_id","utm_gl_client_id","utm_msclk_id","utm_medium","utm_term","utm_content","affiliate_token"].forEach((function(n){e.get(n)&&(t[n]=e.get(n))})),t}},{key:"onSetResidence",value:function(t,e){var n=this,r=t.residence;r&&l.WS.setSettings({residence:r}).then(function(){var t=S(w().mark((function t(i){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.error){t.next=4;break}e(i.error.message),t.next=12;break;case 4:return t.next=6,n.setResidence(r);case 6:return t.next=8,l.WS.authorized.storage.landingCompany(n.accounts[n.loginid].residence).then(n.responseLandingCompany);case 8:return t.next=10,l.WS.authorized.storage.getSettings().then(function(){var t=S(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.setAccountSettings(e.get_settings);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 10:(0,s.runInAction)(S(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_().authorize(n.getToken()).then((function(){(0,s.runInAction)((function(){return n.upgrade_info=n.getBasicUpgradeInfo()}))}));case 2:case"end":return t.stop()}}),t)})))),e();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"onSignup",value:function(t,e){var n=this,r=t.password,i=t.residence;this.verification_code.signup&&r&&i&&l.WS.newAccountVirtual(this.verification_code.signup,r,i,this.getSignupParams()).then(function(){var t=S(w().mark((function t(r){var o,a,s,c;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.error){t.next=4;break}e(r.error.message),t.next=10;break;case 4:return e(),o=r.new_account_virtual,a=o.client_id,s=o.currency,c=o.oauth_token,t.next=8,n.switchToNewlyCreatedAccount(a,c,s);case 8:n.root_store.gtm.pushDataLayer({event:"virtual_signup"}),n.country_standpoint.is_france||n.country_standpoint.is_belgium||"im"===i||n.root_store.ui.toggleWelcomeModal({is_visible:!0,should_persist:!0});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"switchToNewlyCreatedAccount",value:(d=S(w().mark((function t(e,n,r){var i;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setPreSwitchAccount(!0),i={acct1:e,token1:n,curr1:r},t.next=4,this.init(i);case 4:this.broadcastAccountChange();case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return d.apply(this,arguments)})},{key:"fetchAccountSettings",value:function(){var t=this;return new Promise((function(e){l.WS.authorized.storage.getSettings().then((function(n){t.setAccountSettings(n.get_settings),e(n)}))}))}},{key:"fetchResidenceList",value:function(){var t=this;return new Promise((function(e){l.WS.storage.residenceList().then((function(n){t.setResidenceList(n),e(n)}))}))}},{key:"setResidenceList",value:function(t){this.residence_list=t.residence_list||[]}},{key:"fetchStatesList",value:function(){var t=this;return new Promise((function(e,n){l.WS.authorized.storage.statesList({states_list:t.accounts[t.loginid].residence}).then((function(r){r.error?n(r.error):(0,s.runInAction)((function(){t.states_list=r.states_list||[]})),e(r)}))}))}},{key:"resetMt5ListPopulatedState",value:function(){this.is_mt5_account_list_updated=!1,this.is_populating_mt5_account_list=!0,this.mt5_login_list_error=null}},{key:"updateMt5LoginList",value:(c=S(w().mark((function t(){var e;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.is_logged_in||this.is_mt5_account_list_updated||this.is_populating_mt5_account_list){t.next=5;break}return t.next=3,l.WS.mt5LoginList();case 3:e=t.sent,this.responseMt5LoginList(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"responseMT5TradingServers",value:function(t){t.error?this.mt5_trading_servers=[]:this.mt5_trading_servers=t.trading_servers}},{key:"responseMt5LoginList",value:function(t){var e=this;this.is_populating_mt5_account_list=!1,this.is_mt5_account_list_updated=!0,this.mt5_login_list_error=null,setTimeout((function(){e.is_mt5_account_list_updated=!1}),6e4),t.error?this.mt5_login_list_error=t.error:this.mt5_login_list=t.mt5_login_list.map((function(t){var n=(t.error?t.error.details.login:t.login).replace(/^(MT[DR]?)/i,"");if(t.error){var r=t.error.details,i=r.account_type,o=r.server;return e.setMT5DisabledSignupTypes(E({},i,!0)),{account_type:i,display_login:n,has_error:!0,server:o}}return A(A({},t),{},{display_login:n})}))}},{key:"responseDxtradeTradingServers",value:function(t){var e=this;t.error?this.dxtrade_trading_servers=[]:(this.dxtrade_trading_servers=t.trading_servers,this.dxtrade_trading_servers.forEach((function(t){var n=t.account_type;t.disabled&&e.setCFDDisabledSignupTypes(r.CFD_PLATFORMS.DXTRADE,E({},n,!0))})))}},{key:"responseTradingPlatformAccountsList",value:function(t){var e=this,n=(t.echo_req||{}).platform;this["is_populating_".concat(n,"_account_list")]=!1,this["".concat(n,"_accounts_list_error")]=null,t.error?this["".concat(n,"_accounts_list_error")]=t.error:this["".concat(n,"_accounts_list")]=t.trading_platform_accounts.map((function(t){var i=t.error?t.error.details.account_id:t.account_id;if(t.error){var o=t.error.details,a=o.account_type,s=o.server;return n===r.CFD_PLATFORMS.DXTRADE&&e.setCFDDisabledSignupTypes(n,E({},a,!0)),{account_type:a,display_login:i,has_error:!0,server:s}}return A(A({},t),{},{display_login:i})}))}},{key:"responseStatement",value:function(t){t.error||(this.statement=t.statement)}},{key:"getChangeableFields",value:function(){var t=0===Object.keys(this.account_settings).length?l.WS.authorized.storage.getSettings():this.account_settings,e=[].concat(O(t.immutable_fields),["immutable_fields","email","password"]);return Object.keys(t).filter((function(t){return!e.includes(t)}))}},{key:"syncWithLegacyPlatforms",value:function(t,e){var n={},i={};n.iframe=document.getElementById("localstorage-sync"),i.iframe=document.getElementById("localstorage-sync__bot"),n.origin=(0,r.getUrlSmartTrader)(),i.origin=(0,r.getUrlBinaryBot)(),[n,i].forEach((function(n){n.iframe&&(n.iframe.contentWindow.postMessage({key:"client.accounts",value:JSON.stringify(e)},n.origin),n.iframe.contentWindow.postMessage({key:"active_loginid",value:t},n.origin))}))}},{key:"is_high_risk",get:function(){return!(0,r.isEmptyObject)(this.account_status)&&"high"===this.account_status.risk_classification}},{key:"has_residence",get:function(){var t;return!(null===(t=this.accounts[this.loginid])||void 0===t||!t.residence)}},{key:"setVisibilityRealityCheck",value:function(t){t&&"number"==typeof this.reality_check_timeout||(this.is_reality_check_dismissed=!t,r.LocalStore.set("reality_check_dismissed",!t))}},{key:"clearRealityCheckTimeout",value:function(){clearTimeout(this.reality_check_timeout),this.reality_check_timeout=void 0}},{key:"setRealityCheckDuration",value:function(t){var e=this;this.reality_check_dur=+t,this.clearRealityCheckTimeout(),r.LocalStore.set("reality_check_duration",+t),this.reality_check_timeout=setTimeout((function(){e.clearRealityCheckTimeout(),e.setVisibilityRealityCheck(1)}),60*+t*1e3)}},{key:"cleanupRealityCheck",value:function(){this.has_reality_check=!1,this.is_reality_check_dismissed=void 0,this.reality_check_dur=void 0,this.clearRealityCheckTimeout(),r.LocalStore.remove("reality_check_duration"),r.LocalStore.remove("reality_check_dismissed")}},{key:"fetchFinancialAssessment",value:function(){var t=this;return new Promise(function(){var e=S(w().mark((function e(n){var r,i;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.WS.getFinancialAssessment();case 2:r=e.sent,i=r.get_financial_assessment,(0,s.runInAction)((function(){return t.financial_assessment=i})),n(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"setTwoFAStatus",value:function(t){this.has_enabled_two_fa=t}},{key:"getTwoFAStatus",value:function(){var t=this;return new Promise((function(e){l.WS.authorized.accountSecurity({account_security:1,totp_action:"status"}).then((function(n){if(n.error)e(n.error);else{var i=!!(0,r.getPropertyValue)(n,["account_security","totp","is_enabled"]);t.setTwoFAStatus(i),e(i)}}))}))}}],n&&P(e.prototype,n),o&&P(e,o),Object.defineProperty(e,"prototype",{writable:!1}),H}(g.Z),W=n(40041),G=n(81250),U=n.n(G);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){J(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function J(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=K(t);if(e){var i=K(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return q(this,n)}}function q(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $(t)}function $(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(c,t);var e,n,o,a=Y(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this,{root_store:t})).server_time=U().get()||(0,r.toMoment)(),e.current_language=W.XX,e.allowed_languages=Object.keys((0,i.getAllowedLanguages)()),e.has_error=!1,e.error={type:"info",message:""},e.network_status={},e.is_network_online=!1,e.is_socket_opened=!1,e.was_socket_opened=!1,e.services_error={},e.deposit_url="",e.withdraw_url="",e.app_routing_history=[],e.app_router={history:null},e.app_id=void 0,e.platform="",e.selected_contract_type="",(0,s.makeObservable)($(e),{server_time:s.observable,current_language:s.observable,allowed_languages:s.observable,has_error:s.observable,error:s.observable,network_status:s.observable,is_network_online:s.observable,is_socket_opened:s.observable,was_socket_opened:s.observable,services_error:s.observable,deposit_url:s.observable,withdraw_url:s.observable,app_routing_history:s.observable,app_router:s.observable,app_id:s.observable,platform:s.observable,selected_contract_type:s.observable,setSelectedContractType:s.action.bound,init:s.action.bound,checkAppId:s.action.bound,changeCurrentLanguage:s.action.bound,setPlatform:s.action.bound,is_from_derivgo:s.computed,setInitialRouteHistoryItem:s.action.bound,setServerTime:s.action.bound,setIsSocketOpened:s.action.bound,setNetworkStatus:s.action.bound,setError:s.action.bound,showError:s.action.bound,setDepositURL:s.action.bound,setWithdrawURL:s.action.bound,setServicesError:s.action.bound,setAppRouterHistory:s.action.bound,routeTo:s.action.bound,addRouteHistoryItem:s.action.bound,routeBackInApp:s.action.bound}),e}return e=c,n=[{key:"setSelectedContractType",value:function(t){this.selected_contract_type=t}},{key:"init",value:function(){this.setPlatform()}},{key:"checkAppId",value:function(){this.app_id&&this.app_id!==(0,r.getAppId)()&&_().closeAndOpenNewConnection(),this.app_id=(0,r.getAppId)()}},{key:"changeCurrentLanguage",value:function(t){this.current_language!==t&&(this.current_language=t)}},{key:"setPlatform",value:function(){var t=window.location.search;if(t){var e=new URLSearchParams(t);this.platform=e.get("platform")||""}}},{key:"is_from_derivgo",get:function(){var t;return(null===(t=r.platforms[this.platform])||void 0===t?void 0:t.platform_name)===r.platforms.derivgo.platform_name}},{key:"setInitialRouteHistoryItem",value:function(t){if(-1!==window.location.href.indexOf("?ext_platform_url=")){var e=decodeURI(new URL(window.location.href).searchParams.get("ext_platform_url"));0===(null==e?void 0:e.indexOf((0,r.getUrlSmartTrader)()))?this.addRouteHistoryItem({pathname:e,action:"PUSH",is_external:!0}):0===(null==e?void 0:e.indexOf(r.routes.cashier_p2p))?this.addRouteHistoryItem({pathname:e,action:"PUSH"}):0===(null==e?void 0:e.indexOf((0,r.getUrlBinaryBot)()))?this.addRouteHistoryItem({pathname:e,action:"PUSH",is_external:!0}):this.addRouteHistoryItem(H(H({},t),{},{action:"PUSH"})),window.history.replaceState({},document.title,window.location.pathname)}else this.addRouteHistoryItem(H(H({},t),{},{action:"PUSH"}))}},{key:"setServerTime",value:function(t){this.server_time=t}},{key:"setIsSocketOpened",value:function(t){var e=this.was_socket_opened&&t;this.is_socket_opened=t,this.was_socket_opened=this.was_socket_opened||t,e&&this.root_store.client.broadcastAccountChangeAfterAuthorize()}},{key:"setNetworkStatus",value:function(t,e){this.network_status.class?(this.network_status.class=t.class,this.network_status.tooltip=t.tooltip):this.network_status=t,this.is_network_online=e;var n=this.root_store.notifications,r=n.addNotificationMessage,i=n.client_notifications,o=n.removeNotificationMessage;e?o(i.you_are_offline):r(i.you_are_offline)}},{key:"setError",value:function(t,e){this.has_error=t,this.error=H({type:e?e.type:"info"},e&&{header:e.header,message:e.message,redirect_label:e.redirect_label,redirectOnClick:e.redirectOnClick,should_show_refresh:e.should_show_refresh,redirect_to:e.redirect_to,should_clear_error_on_click:e.should_clear_error_on_click,setError:this.setError})}},{key:"showError",value:function(t){var e=t.message,n=t.header,r=t.redirect_label,i=t.redirectOnClick,o=t.should_show_refresh,a=t.redirect_to,s=t.should_clear_error_on_click;this.setError(!0,{header:n,message:e,redirect_label:r,redirectOnClick:i,should_show_refresh:o,redirect_to:a,should_clear_error_on_click:s,type:"error"})}},{key:"setDepositURL",value:function(t){this.deposit_url=t}},{key:"setWithdrawURL",value:function(t){this.withdraw_url=t}},{key:"setServicesError",value:function(t){this.services_error=t,(0,r.isMobile)()?this.root_store.ui.addToast({content:t.message,type:"error"}):this.root_store.ui.toggleServicesErrorModal(!0)}},{key:"setAppRouterHistory",value:function(t){this.app_router.history=t}},{key:"routeTo",value:function(t){this.app_router.history&&this.app_router.history.push(t)}},{key:"addRouteHistoryItem",value:function(t){var e=this.app_routing_history.findIndex((function(e){return e.pathname===t.pathname&&"PUSH"===e.action}));e>-1&&this.app_routing_history.splice(e,1),this.app_routing_history.unshift(t)}},{key:"routeBackInApp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=-1,i=this.app_routing_history.find((function(t,i){if("PUSH"===t.action){if(t.is_external)return!0;var o=t.pathname.split("/")[1];if([r.routes.mt5,r.routes.bot,r.routes.trade,r.routes.dxtrade].map((function(t){return t.split("/")[1]})).includes(o)||e.includes(t.pathname))return n=i,!0}return!1}));if(i){if(i.is_external)return void(window.location.href=i.pathname);if(n>-1){this.app_routing_history.splice(0,n+1);var o=this.root_store.ui;return void(i.pathname===r.routes.cashier_p2p&&o.is_mobile?t.push("".concat(i.pathname,"/verification")):t.push(i.pathname))}}t.push(r.routes.trade)}}],n&&Z(e.prototype,n),o&&Z(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}(g.Z);function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(){et=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return x()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function h(){}function d(){}function _(){}var f={};s(f,i,(function(){return this}));var p=Object.getPrototypeOf,g=p&&p(p(O([])));g&&g!==e&&n.call(g,i)&&(f=g);var y=_.prototype=h.prototype=Object.create(f);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){function r(i,o,a,s){var c=u(t[i],t,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==tt(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=_,s(y,"constructor",_),s(_,"constructor",d),d.displayName=s(_,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(m.prototype),s(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new m(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(y),s(y,a,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function nt(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function st(t,e){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},st(t,e)}function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ht(t);if(e){var i=ht(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(t,e){if(e&&("object"===tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lt(t)}function lt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ht(t){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ht(t)}var dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&st(t,e)}(h,t);var e,n,a,c,u,l=ct(h);function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(e=l.call(this,{root_store:t})).is_gtm_applicable="deriv-app.binary.sx"===window.location.hostname||/^(16303|16929|19111|19112)$/.test((0,r.getAppId)()),(0,s.makeObservable)(lt(e),{visitorId:s.computed,common_variables:s.computed,accountSwitcherListener:s.action.bound,pushDataLayer:s.action.bound,pushTransactionData:s.action.bound,eventHandler:s.action.bound,setLoginFlag:s.action.bound}),e.onSwitchAccount(e.accountSwitcherListener),e}return e=h,n=[{key:"visitorId",get:function(){return this.root_store.client.loginid}},{key:"common_variables",get:function(){var t,e,n;return it(it({language:(0,i.getLanguage)()},this.root_store.client.is_logged_in&&{visitorId:this.visitorId,currency:this.root_store.client.currency,userId:this.root_store.client.user_id,email:this.root_store.client.email}),{},{loggedIn:this.root_store.client.is_logged_in,theme:this.root_store.ui.is_dark_mode_on?"dark":"light",platform:(t=new URL(window.location.href),e=t.hostname,n=t.pathname,/^(deriv-app\.binary.sx|app.deriv.com|staging-app.deriv.com|deriv.app|staging.deriv.app|localhost.binary.sx)$/.test(e)?"bot"===n?"DBot":n===r.CFD_PLATFORMS.MT5?"MT5":"DTrader":"undefined")})}},{key:"accountSwitcherListener",value:function(){var t=this;return new Promise((function(e){return e(t.pushDataLayer({event:"account switch"}))}))}},{key:"pushDataLayer",value:(c=et().mark((function t(e){var n=this;return et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.is_gtm_applicable&&_().wait("authorize").then((function(){var t=it(it({},n.common_variables),e);t.event&&dataLayer.push(t)}));case 1:case"end":return t.stop()}}),t,this)})),u=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=c.apply(t,e);function o(t){nt(i,n,r,o,a,"next",t)}function a(t){nt(i,n,r,o,a,"throw",t)}o(void 0)}))},function(t){return u.apply(this,arguments)})},{key:"pushTransactionData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.is_gtm_applicable&&!this.root_store.client.is_virtual&&t.transaction&&t.transaction.action&&["deposit","withdrawal"].includes(t.transaction.action)){var n=(0,r.toMoment)(),i="GTM_transactions",o=JSON.parse(localStorage.getItem(i))||{};Object.prototype.hasOwnProperty.call(o,"timestamp")&&n.isAfter((0,r.epochToMoment)(o.timestamp),"day")&&(localStorage.removeItem(i),o={timestamp:n.unix()});var a=o.transactions||[];if(!a.includes(t.transaction.transaction_id)){var s={event:"transaction",bom_account_type:this.root_store.client.account_type,bom_today:n.unix(),transaction:{id:t.transaction.transaction_id,type:t.transaction.action,time:t.transaction.transaction_time,amount:t.transaction.amount}};Object.assign(s,e),this.pushDataLayer(s),a.push(t.transaction.transaction_id),o.transactions=a,o.timestamp=o.timestamp||n.unix(),localStorage.setItem(i,JSON.stringify(o))}}}},{key:"eventHandler",value:function(t){if(this.is_gtm_applicable){var e=localStorage.getItem("GTM_login"),n="1"===localStorage.getItem("GTM_new_account");localStorage.removeItem("GTM_login"),localStorage.removeItem("GTM_new_account");var i=o.getJSON("affiliate_tracking");i&&this.pushDataLayer({affiliate_token:i});var a=(0,r.toMoment)(),s={visitorId:this.visitorId,account_type:this.root_store.client.account_type,currency:this.root_store.client.currency,country:t.country,country_abbrev:t.country_code,email:t.email,url:window.location.href,today:a.unix()};n&&(s.event="new_account",s.bom_date_joined=s.bom_today),e&&(s.event=e),this.pushDataLayer(s)}}},{key:"setLoginFlag",value:function(t){this.is_gtm_applicable&&t&&localStorage.setItem("GTM_login",t)}}],n&&at(e.prototype,n),a&&at(e,a),Object.defineProperty(e,"prototype",{writable:!1}),h}(g.Z),_t=n(33727),ft=n(23088),pt=n(47997),gt=n(94271),yt=n(16186),vt=n(56139);function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bt(t,e,n){return e&&mt(t.prototype,e),n&&mt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var wt=bt((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.client=new z(this),this.common=new Q(this),this.modules=new pt.Z(this),this.ui=new vt.Z(this),this.gtm=new dt(this),this.rudderstack=new _t.Z(this),this.menu=new gt.Z(this),this.pushwoosh=new ft.Z(this),this.notifications=new yt.Z(this)}))}}]);