/*! For license information please see trader.trader-app.255b230e2f15b7da9ab3.js.LICENSE.txt */
(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["trader-app"],{"./src/App/Components/Animations/index.js":(t,e,r)=>{"use strict";r.d(e,{s:()=>c,o:()=>f});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r("../../node_modules/framer-motion/dist/es/render/dom/motion.mjs"),s={onViewportEnter:{y:0,opacity:1,transition:{y:{type:"spring",stiffness:500,damping:15},default:{duration:300}}},exit:{y:35,opacity:0,transition:{duration:0}}},c=function(t){var e=t.children,r=t.className,n=t.is_visible,o=t.keyname;return n?i.createElement(a.E.div,{exit:s.exit,onViewportEnter:s.onViewportEnter,className:r,key:o},e):null};c.propTypes={children:o().node,is_visible:o().bool,keyname:o().string};var l={OnViewportEnter:{y:0,opacity:1,transition:{duration:200}},exit:{y:-20,opacity:0,transition:{duration:100}}},u={onViewportEnter:{y:0,opacity:1,transition:{duration:200}},exit:{y:20,opacity:0,transition:{duration:100}}},f=function(t){var e=t.children,r=t.className,n=t.keyname,o=t.is_visible;return"bottom"===t.type?i.createElement(i.Fragment,null,o&&i.createElement(a.E.div,{onViewportEnter:u.onViewportEnter,exit:u.exit,className:r,key:n},e)):i.createElement(i.Fragment,null,o&&i.createElement(a.E.div,{onViewportEnter:l.onViewportEnter,exit:l.exit,className:r,key:n},e))};f.propTypes={children:o().node,is_visible:o().bool,keyname:o().string,type:o().string}},"./src/App/Components/Elements/ContentLoader/index.js":(t,e,r)=>{"use strict";r.d(e,{rl:()=>s,Ro:()=>c,G_:()=>u});var n=r("../../node_modules/react-content-loader/dist/react-content-loader.es.js"),o=r("react"),i=r("../../node_modules/prop-types/index.js"),a=r.n(i),s=function(t){var e=t.speed;return o.createElement(n.ZP,{height:173,width:218,speed:e,primarycolor:"var(--general-section-1)",secondarycolor:"var(--general-hover)"},o.createElement("rect",{x:"43",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),o.createElement("rect",{x:"147",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),o.createElement("rect",{x:"12",y:"50",rx:"0",ry:"0",width:"44",height:"8"}),o.createElement("rect",{x:"13",y:"68",rx:"0",ry:"0",width:"192",height:"8"}),o.createElement("rect",{x:"5",y:"89",rx:"0",ry:"0",width:"208",height:"1"}),o.createElement("rect",{x:"12",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),o.createElement("rect",{x:"12",y:"9",rx:"0",ry:"0",width:"24",height:"24"}),o.createElement("rect",{x:"116",y:"11",rx:"0",ry:"0",width:"24",height:"24"}),o.createElement("rect",{x:"12",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),o.createElement("rect",{x:"116",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),o.createElement("rect",{x:"116",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),o.createElement("rect",{x:"12",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),o.createElement("rect",{x:"12",y:"153",rx:"0",ry:"0",width:"88",height:"8"}),o.createElement("rect",{x:"116",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),o.createElement("rect",{x:"116",y:"153",rx:"0",ry:"0",width:"88",height:"8"}))};s.propTypes={speed:a().number};var c=function(t){var e=t.speed;return o.createElement(n.ZP,{height:64,width:992,speed:e,primarycolor:"var(--general-hover)",secondarycolor:"var(--general-active)"},o.createElement("rect",{x:"16",y:"16",rx:"4",ry:"4",width:"32",height:"32"}),o.createElement("rect",{x:"52",y:"16",rx:"4",ry:"4",width:"32",height:"32"}),o.createElement("rect",{x:"132",y:"28",rx:"4",ry:"4",width:"101",height:"8"}),o.createElement("rect",{x:"273",y:"28",rx:"4",ry:"4",width:"120",height:"8"}),o.createElement("rect",{x:"460",y:"28",rx:"4",ry:"4",width:"46",height:"8"}),o.createElement("rect",{x:"593",y:"28",rx:"4",ry:"4",width:"46",height:"8"}),o.createElement("rect",{x:"726",y:"28",rx:"4",ry:"4",width:"64",height:"8"}),o.createElement("rect",{x:"906",y:"28",rx:"4",ry:"4",width:"64",height:"8"}))};c.propTypes={speed:a().number};var l=r("@deriv/components"),u=function(t){var e=t.speed;return o.createElement(o.Fragment,null,o.createElement(l.MobileWrapper,null,o.createElement(n.ZP,{height:214,width:344,speed:e,primarycolor:"var(--general-section-1)",secondarycolor:"var(--general-hover)"},o.createElement("rect",{x:"148",y:"24",rx:"3",ry:"3",width:"40",height:"4"}),o.createElement("rect",{x:"8",y:"40",rx:"4",ry:"4",width:"328",height:"40"}),o.createElement("rect",{x:"8",y:"88",rx:"4",ry:"4",width:"328",height:"40"}),o.createElement("rect",{x:"8",y:"136",rx:"4",ry:"4",width:"160",height:"70"}),o.createElement("rect",{x:"176",y:"136",rx:"4",ry:"4",width:"160",height:"70"}))),o.createElement(l.DesktopWrapper,null,o.createElement(n.ZP,{height:548,width:240,speed:e,primarycolor:"var(--general-section-1)",secondarycolor:"var(--general-hover)"},o.createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"240",height:"76"}),o.createElement("rect",{x:"0",y:"84",rx:"4",ry:"4",width:"240",height:"132"}),o.createElement("rect",{x:"0",y:"224",rx:"4",ry:"4",width:"240",height:"120"}),o.createElement("rect",{x:"0",y:"352",rx:"4",ry:"4",width:"240",height:"194"}))))};u.propTypes={speed:a().number}},"./src/App/Components/Elements/PositionsDrawer/PositionsDrawerCard/positions-drawer-card.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>y});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("../../node_modules/prop-types/index.js"),a=r.n(i),s=r("react"),c=r("react-router-dom"),l=r("@deriv/components"),u=r("@deriv/shared"),f=r("./src/Constants/contract.js"),p=r("./src/Stores/connect.js"),d=r("./src/Stores/Modules/Contract/Helpers/multiplier.js"),h=r("./src/Stores/Modules/Contract/Helpers/logic.js"),_=function(t){var e=t.addToast,r=t.className,n=t.display_name,i=t.contract_info,a=t.contract_update,p=t.currency,_=t.current_focus,y=t.getContractById,m=t.is_mobile,v=t.is_sell_requested,g=t.is_unsupported,b=t.is_link_disabled,w=t.profit_loss,x=t.onClickCancel,E=t.onClickSell,S=t.onClickRemove,O=t.onFooterEntered,k=t.onMouseEnter,P=t.onMouseLeave,j=t.removeToast,L=t.result,C=t.setCurrentFocus,T=t.server_time,A=t.should_show_transition,N=t.should_show_cancellation_warning,D=t.status,I=t.toggleCancellationWarning,M=t.toggleUnsupportedContractModal,z=(0,u.isMultiplierContract)(i.contract_type),R=(0,u.isCryptoContract)(i.underlying),U=!z||R&&z,F=!!(0,h.NQ)(i),G=s.createElement("div",{className:"dc-contract-card__content-loader"},s.createElement(l.ContractCard.Loader,{speed:2})),B=s.createElement(l.ContractCard.Header,{contract_info:i,display_name:n,getCardLabels:f.gk,getContractTypeDisplay:f.h8,has_progress_slider:!m&&U,is_mobile:m,is_positions:!0,is_sell_requested:v,onClickSell:E,server_time:T}),H=s.createElement(l.ContractCard.Body,{addToast:e,connectWithContractUpdate:d.tP,contract_info:i,contract_update:a,currency:p,current_focus:_,getCardLabels:f.gk,getContractById:y,onMouseLeave:function(){"function"==typeof P&&P()},is_mobile:m,is_multiplier:z,is_sold:F,has_progress_slider:m&&U,removeToast:j,server_time:T,setCurrentFocus:C,should_show_cancellation_warning:N,status:D,toggleCancellationWarning:I}),W=s.createElement(l.ContractCard.Footer,{contract_info:i,getCardLabels:f.gk,is_multiplier:z,is_positions:!0,is_sell_requested:v,onClickCancel:x,onClickSell:E,onFooterEntered:O,server_time:T,should_show_transition:A}),Y=s.createElement(s.Fragment,null,B,H),V=s.createElement("div",{className:o()("dc-contract-card",{"dc-contract-card--green":!z&&w>0&&!L,"dc-contract-card--red":!z&&w<0&&!L}),onClick:function(){return M(!0)}},i.underlying?Y:G),q=b?s.createElement("div",{className:o()("dc-contract-card",{"dc-contract-card--green":!z&&w>0&&!L,"dc-contract-card--red":!z&&w<0&&!L})},i.underlying?Y:G):s.createElement(c.NavLink,{className:o()("dc-contract-card",{"dc-contract-card--green":!z&&w>0&&!L,"dc-contract-card--red":!z&&w<0&&!L}),to:{pathname:"/contract/".concat(i.contract_id)}},i.underlying?Y:G);return s.createElement(l.ContractCard,{contract_info:i,getCardLabels:f.gk,getContractPath:u.getContractPath,is_multiplier:z,is_positions:!0,is_unsupported:g,onClickRemove:S,profit_loss:w,result:L,should_show_result_overlay:!0,toggleUnsupportedContractModal:M},s.createElement("div",{id:"dc_contract_card_".concat(i.contract_id),className:r,onMouseEnter:function(){"function"==typeof k&&k()},onMouseLeave:function(){"function"==typeof P&&P()},onClick:function(){"function"==typeof P&&P()}},g?V:q,W))};_.propTypes={addToast:a().func,className:a().string,contract_info:a().object,currency:a().string,current_focus:a().string,current_tick:a().number,duration:a().oneOfType([a().number,a().string]),duration_unit:a().string,exit_spot:a().oneOfType([a().number,a().string]),id:a().number,indicative:a().number,is_loading:a().bool,is_mobile:a().bool,is_sell_requested:a().bool,is_unsupported:a().bool,is_valid_to_sell:a().oneOfType([a().number,a().bool]),onClickRemove:a().func,onClickSell:a().func,onClickCancel:a().func,profit_loss:a().number,result:a().string,sell_time:a().number,setCurrentFocus:a().func,status:a().string,toggleUnsupportedContractModal:a().func,type:a().string};const y=(0,p.$j)((function(t){var e=t.modules,r=t.ui,n=t.client,o=t.common;return{currency:n.currency,server_time:o.server_time,addToast:r.addToast,current_focus:r.current_focus,onClickCancel:e.portfolio.onClickCancel,onClickSell:e.portfolio.onClickSell,onClickRemove:e.portfolio.removePositionById,getContractById:e.contract_trade.getContractById,is_mobile:r.is_mobile,removeToast:r.removeToast,setCurrentFocus:r.setCurrentFocus,should_show_cancellation_warning:r.should_show_cancellation_warning,toggleCancellationWarning:r.toggleCancellationWarning,toggleUnsupportedContractModal:r.toggleUnsupportedContractModal}}))(_)},"./src/App/Components/Elements/PositionsDrawer/helpers/index.js":(t,e,r)=>{"use strict";r.d(e,{Ew:()=>s,_M:()=>p,Bs:()=>c,rh:()=>l,qm:()=>u});var n=r("@deriv/translations"),o=r("@deriv/shared"),i=r("./src/Stores/Modules/Trading/Constants/contract.js"),a=r("./src/Stores/Modules/Contract/Helpers/contract-type.js"),s=function(t,e){if(!t||isNaN(t))return t;var r=String(e?(+t).toFixed(e):t),n=r.indexOf(".");return r.replace(/\d(?=(?:\d{3})+(?:\.|$))/g,(function(t,e){return n<=0||e<n?"".concat(t,","):t}))},c=function(t){return u(t.contract_type)?(0,n.localize)("Target"):(0,n.localize)("Barrier")},l=function(t){return u(t.contract_type)?f(t)[t.contract_type]:s(t.barrier)},u=function(t){return/digit/.test(t.toLowerCase())},f=function(t){return{DIGITDIFF:(0,n.localize)("Not {{barrier}}",{barrier:t.barrier}),DIGITEVEN:(0,n.localize)("Even"),DIGITMATCH:(0,n.localize)("Equals {{barrier}}",{barrier:t.barrier}),DIGITODD:(0,n.localize)("Odd"),DIGITOVER:(0,n.localize)("Over {{barrier}}",{barrier:t.barrier}),DIGITUNDER:(0,n.localize)("Under {{barrier}}",{barrier:t.barrier})}},p=function(t,e){var r,n=t.contract_type,s=t.shortcode,c=(0,a.a)(e),l=(0,o.isHighLow)({shortcode:s}),u=c?["CALL","CALLE","PUT","PUTE"]:null===(r=(0,i.r2)()[e])||void 0===r?void 0:r.trade_types,f=null==u?void 0:u.includes(n);return"high_low"===e?l:f&&!l}},"./src/App/Components/Elements/chart-loader.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r("../../node_modules/classnames/index.js"),s=r.n(a),c=r("@deriv/components"),l=function(t){var e=t.className,r=t.id,n=t.is_fullscreen,o=void 0===n||n,a=t.is_slow_loading,l=t.status,u=t.theme,f=u?"barspinner-".concat(u):"barspinner-light";return i.createElement("div",{className:s()("initial-loader",{"initial-loader--fullscreen":o},e)},i.createElement("div",{id:r,className:s()("initial-loader__barspinner","barspinner",f)},Array.from(new Array(5)).map((function(t,e){return i.createElement("div",{key:e,className:"initial-loader__barspinner--rect barspinner__rect barspinner__rect--".concat(e+1," rect").concat(e+1)})}))),a&&l.map((function(t,e){return i.createElement(c.Text,{as:"h3",color:"prominent",size:"xs",align:"center",key:e},t)})))};l.propTypes={id:o().oneOfType([o().string,o().number]),is_slow_loading:o().bool,status:o().array,theme:o().string};const u=l;var f=function(t){var e=t.is_dark;return t.is_visible?i.createElement("div",{className:"chart-container__loader"},i.createElement(u,{theme:e?"dark":"light"})):null};f.propTypes={is_dark:o().bool,is_visible:o().bool};const p=f},"./src/App/Components/Elements/market-countdown-timer.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>O});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("react"),a=r("../../node_modules/prop-types/index.js"),s=r.n(a),c=r("../../node_modules/moment/moment.js"),l=r.n(c),u=r("@deriv/components"),f=r("@deriv/shared"),p=r("@deriv/translations"),d=r("./src/Stores/connect.js"),h=r("./src/Stores/Modules/Trading/Helpers/active-symbols.js");function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(){v=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(k([])));m&&m!==e&&r.call(m,o)&&(h=m);var g=d.prototype=f.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==_(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),s(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function g(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function b(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){g(i,n,o,a,s,"next",t)}function s(t){g(i,n,o,a,s,"throw",t)}a(void 0)}))}}var w=function(){var t=b(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.WS.tradingTimes(e);case 2:if(!(r=t.sent).error){t.next=5;break}return t.abrupt("return",{api_initial_load_error:r.error.message});case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(t,e){for(var r,n=e.markets,o=0;o<n.length;o++)for(var i=n[o].submarkets,a=0;a<i.length;a++)if(void 0!==(r=i[a].symbols.find((function(e){return e.symbol===t}))))return r},E=function(t){var e=t-Date.now();return e>0?{days:Math.floor(e/864e5),hours:Math.floor(e/36e5%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}:{}},S=function(t){var e=t.active_symbols,r=t.is_main_page,n=t.setIsTimerLoading,a=t.onMarketOpen,s=t.symbol,c=(0,f.useIsMounted)(),d=y(i.useState({}),2),_=d[0],m=d[1],g=y(i.useState(E(null==_?void 0:_.remaining_time_to_open)),2),S=g[0],O=g[1],k=y(i.useState(!0),2),P=k[0],j=k[1];i.useEffect((function(){if(!r||r&&(0,h.pp)(e,s)){j(!0);var t=function(){var e=b(v().mark((function e(r,n){var o,i,a,u,f,p,d,h,_,y;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r>7)){e.next=2;break}return e.abrupt("return",{});case 2:return i=l()(new Date).add(r,"days"),e.next=5,w(i.format("YYYY-MM-DD"));case 5:if((a=e.sent).api_initial_load_error){e.next=25;break}if(u=x(n,a.trading_times),f=u.times,p=f.open,d=f.close,1!==(null==p?void 0:p.length)||"--"!==p[0]||"--"!==d[0]){e.next=12;break}return e.abrupt("return",t(r+1,n));case 12:h=i.toISOString().substring(0,11),_=function(t){return new Date("".concat(h).concat(t,"Z"))},y=0;case 15:if(!(y<(null==p?void 0:p.length))){e.next=24;break}if(!(+_(p[y])-Date.now()>0)){e.next=21;break}if(o=+_(p[y]),!c()||n!==s){e.next=21;break}return e.abrupt("return",m({days_offset:r,opening_time:p[y],remaining_time_to_open:o}));case 21:y++,e.next=15;break;case 24:t(r+1,n);case 25:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t(0,s)}}),[s]),i.useEffect((function(){var t;return null!=_&&_.remaining_time_to_open&&(t=setTimeout((function(){O(E(_.remaining_time_to_open)),new Date(_.remaining_time_to_open)-+new Date<1e3&&(j(!0),r&&a(!1))}),1e3)),function(){t&&clearTimeout(t)}}),[S,_,a,r]),i.useEffect((function(){P||n(!1)}),[P,n]);var L="";if(Object.keys(S).length){var C=(24*S.days+S.hours).toString().padStart(2,"0"),T=S.minutes.toString().padStart(2,"0"),A=S.seconds.toString().padStart(2,"0");L="".concat(C,":").concat(T,":").concat(A)}if(!_||!L)return null;var N=_.opening_time,D=_.days_offset,I=null;if(N){var M=(0,f.convertTimeFormat)(N),z=l()(new Date).add(D,"days"),R=z.format("DD MMM YYYY"),U=z.format("dddd");I=i.createElement(u.Text,{align:"center",as:"p",className:"market-is-closed-overlay__open-date",line_height:"m",color:"prominent",size:r?"s":"xs",weight:"bold"},i.createElement(p.Localize,{i18n_default_text:"{{formatted_opening_time}} (GMT) on {{opening_day}},<0></0> {{opening_date}}.",components:[i.createElement("div",{key:0})],values:{formatted_opening_time:M,opening_day:U,opening_date:R}}))}return P&&j(!1),i.createElement(i.Fragment,null,i.createElement(u.Text,{as:"p",className:o()("market-is-closed-overlay__open-at",{"market-is-closed-overlay__open-at--main-page":r}),line_height:"x",size:r?"xs":"xxs"},i.createElement(p.Localize,{i18n_default_text:"It will reopen at"})),I,i.createElement(u.Text,{align:"center",as:"p",className:o()("market-is-closed-overlay__come-back",{"market-is-closed-overlay__come-back--main-page":r}),line_height:"x",size:r?"xs":"xxs"},i.createElement(p.Localize,{i18n_default_text:"Please come back in"})),i.createElement(u.Text,{as:"p",className:o()("market-is-closed-overlay__timer",{"market-is-closed-overlay__timer--main-page":r}),line_height:"m",color:"prominent",size:r?"s":"xs",weight:"bold"},L),i.createElement("div",{className:"market-is-closed-overlay__separator"}))};S.propTypes={is_main_page:s().bool,setIsTimerLoading:s().func,onMarketOpen:s().func,symbol:s().string.isRequired};const O=(0,d.$j)((function(t){return{active_symbols:t.modules.trade.active_symbols}}))(S)},"./src/App/Components/Routes/helpers.js":(t,e,r)=>{"use strict";r.d(e,{AH:()=>i,U_:()=>a,uT:()=>s});var n=r("react-router"),o=r("@deriv/shared"),i=function(t){return/^\//.test(t)?t:"/".concat(t||"")},a=function t(e,r){var o;return r.some((function(r){var i;try{i=(0,n.matchPath)(e,r)}catch(t){if(/undefined/.test(t.message))return}return i?(o=r,!0):!!r.routes&&(o=t(e,r.routes))})),o},s=function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,r){return t.replace(":".concat(r),e[r])}),t)}(o.routes.contract,{contract_id:t})}},"./src/App/index.tsx":(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>Yi});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r("../../node_modules/react-loadable/lib/index.js"),s=r.n(a),c=r("mobx-react"),l=r("react-router"),u=r("@deriv/components"),f=r("@deriv/shared"),p=r("react-router-dom"),d=r("./src/App/Components/Routes/helpers.js"),h=r("@deriv/translations"),_=r("./src/App/Components/Elements/chart-loader.jsx"),y=r("./src/Modules/Trading/Helpers/digits.js"),m=r("./src/Stores/connect.js"),v=r("../../node_modules/classnames/index.js"),g=r.n(v),b=r("../../node_modules/react-transition-group/esm/CSSTransition.js");const w=function(t){var e=t.error;return i.createElement("div",{className:"portfolio-empty"},i.createElement("div",{className:"portfolio-empty__wrapper"},e?i.createElement(u.Text,{color:"disabled",size:"xs"},e):i.createElement(i.Fragment,null,i.createElement(u.Icon,{icon:"IcPortfolio",className:"portfolio-empty__icon",size:96,color:"disabled"}),i.createElement(u.Text,{align:"center",className:"portfolio-empty__text",color:"disabled",size:"xs"},(0,h.localize)("You have no open positions for this asset. To view other open positions, click Go to Reports")))))};var x=r("./src/App/Components/Elements/PositionsDrawer/PositionsDrawerCard/positions-drawer-card.jsx"),E=r("./src/App/Components/Elements/PositionsDrawer/helpers/index.js");function S(){return S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},S.apply(this,arguments)}var O=function(t){var e=t.row,r=t.measure,n=t.onHoverPosition,o=t.is_new_row,a=(0,f.useNewRowTransition)(o).in_prop;return i.useEffect((function(){r()}),[e.contract_info.is_sold,r]),i.createElement(b.Z,{in:a,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},onEntered:r,unmountOnExit:!0},i.createElement("div",{className:"dc-contract-card__wrapper"},i.createElement(x.Z,S({},e,{onMouseEnter:function(){n(!0,e)},onMouseLeave:function(){n(!1,e)},onFooterEntered:r,should_show_transition:o}))))},k=function(t){var e=t.all_positions,r=t.error,n=t.is_positions_drawer_on,o=t.onHoverPosition,a=t.symbol,s=t.toggleDrawer,c=t.trade_contract_type,l=t.onMount,d=i.useRef(null),_=i.useRef(null),y=i.useRef(null);i.useEffect((function(){l()}),[l]),i.useEffect((function(){var t,e;null==_||null===(t=_.current)||void 0===t||t.scrollTo(0),null==y||null===(e=y.current)||void 0===e||e.scrollToTop()}),[a,c]);var m=e.filter((function(t){return t.contract_info&&a===t.contract_info.underlying&&(0,E._M)(t.contract_info,c)})),v=i.createElement(u.DataList,{data_source:m,rowRenderer:function(t){return i.createElement(O,S({onHoverPosition:o},t))},keyMapper:function(t){return t.id},row_gap:8});return i.createElement(i.Fragment,null,i.createElement("div",{className:g()("positions-drawer__bg",{"positions-drawer__bg--open":n})}),i.createElement("div",{id:"dt_positions_drawer",className:g()("positions-drawer",{"positions-drawer--open":n})},i.createElement("div",{className:"positions-drawer__header"},i.createElement(u.Text,{color:"prominent",weight:"bold",size:"xs"},(0,h.localize)("Recent positions")),i.createElement("div",{id:"dt_positions_drawer_close_icon",className:"positions-drawer__icon-close",onClick:s},i.createElement(u.Icon,{icon:"IcMinusBold"}))),i.createElement("div",{className:"positions-drawer__body",ref:d},0===m.length||r?i.createElement(w,{error:r}):v),i.createElement("div",{className:"positions-drawer__footer"},i.createElement(p.NavLink,{id:"dt_positions_drawer_report_button",className:"dc-btn dc-btn--secondary dc-btn__large",to:f.routes.reports},i.createElement(u.Text,{size:"xs",weight:"bold"},(0,h.localize)("Go to Reports"))))))};k.propTypes={all_positions:c.PropTypes.arrayOrObservableArray,children:o().any,error:o().string,is_mobile:o().bool,is_positions_drawer_on:o().bool,onChangeContractUpdate:o().func,onClickContractUpdate:o().func,onMount:o().func,symbol:o().string,toggleDrawer:o().func};const P=(0,m.$j)((function(t){var e=t.modules,r=t.ui;return{all_positions:e.portfolio.all_positions,error:e.portfolio.error,onHoverPosition:e.portfolio.onHoverPosition,onMount:e.portfolio.onMount,symbol:e.trade.symbol,trade_contract_type:e.trade.contract_type,is_mobile:r.is_mobile,is_positions_drawer_on:r.is_positions_drawer_on,toggleDrawer:r.togglePositionsDrawer}}))(k);var j=r("./src/App/Components/Elements/market-countdown-timer.jsx");function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var C=function(t){var e=t.is_eu,r=t.is_market_available,n=t.is_synthetics_available,o=t.onClick,a=t.onMarketOpen,s=t.symbol,c=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return L(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState(!0),2),l=c[0],f=c[1],p=i.createElement(h.Localize,{i18n_default_text:"In the meantime, try our synthetic indices. They simulate real-market volatility and are open 24/7."}),d=(0,h.localize)("Try Synthetic Indices");return n||(p=null,d=(0,h.localize)("See open markets")),i.createElement("div",{className:g()("market-is-closed-overlay",{"market-is-closed-overlay--loading":l})},i.createElement(u.Text,{as:"p",className:"market-is-closed-overlay__main-heading",color:"prominent",weight:"bold"},i.createElement(h.Localize,{i18n_default_text:"This market is closed"})),i.createElement(j.Z,{is_main_page:!0,setIsTimerLoading:f,onMarketOpen:a,symbol:s}),p&&i.createElement(u.Text,{align:"center",as:"p",className:"market-is-closed-overlay__main-message",size:"xs"},p),(!e||e&&r)&&i.createElement(u.Button,{className:"market-is-closed-overlay__button",onClick:o,text:d,primary:!0}))};C.propTypes={is_eu:o().bool,is_market_available:o().bool,is_synthetics_available:o().bool,onClick:o().func,onMarketOpen:o().func,symbol:o().string};const T=C;var A=r("mobx");function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function I(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return R(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var U={container:{fontSize:"10px",lineHeight:"15px",position:"absolute",zIndex:1,background:"rgba(0, 0, 0, 0.8)",color:"#ccc",padding:"10px",marginTop:"-10px",display:"none",overflowY:"auto",height:"100%",width:"100%"},prop_name:{color:"yellowgreen"},tabs:{display:"flex",textAlign:"center",marginBottom:"10px"},tab:{fontSize:"18px",border:"1px solid grey",width:"100%",padding:"10px"}},F=function(t){var e=z(i.useState(!1),2),r=e[0],n=e[1],o=z(i.useState("trade"),2),a=o[0],s=o[1];i.useEffect((function(){return document.addEventListener("keyup",c,!1),function(){document.removeEventListener("keyup",c)}}));var c=function(t){t.ctrlKey&&83===t.keyCode&&n(!r)},l=U.container,u=U.tab,f=U.tabs;return i.createElement("code",{id:"state_info",style:D(D({},l),{},{display:r?"block":"none"})},i.createElement("div",{style:f},Object.keys(t).map((function(t){return i.createElement("p",{key:t,onClick:function(){return s(t)},style:D(D({},u),{},{fontWeight:t===a&&"bold"})},t)}))),t[a].sort().map((function(t){var e=z(t,2),r=e[0],n=e[1];return"root_store"!==r&&"function"!=typeof n&&i.createElement("div",{key:r},i.createElement("span",{style:U.prop_name},r,":")," ",n&&"object"===M(n)?JSON.stringify((0,A.toJS)(n),null,1):n)})))};F.propTypes={entries:o().array};const G=(0,m.$j)((function(t){var e=t.modules,r=t.client,n=t.ui;return{trade:Object.entries(e.trade),client:Object.entries(r),ui:Object.entries(n),portfolio:Object.entries(e.portfolio)}}))(F);var B=r("./src/Modules/Contract/Components/Digits/index.js"),H=r("./src/Modules/SmartChart/Components/bottom-widgets.jsx"),W=r("./src/Modules/SmartChart/index.js"),Y=function(t){var e=t.updateChartType,r=t.updateGranularity;return i.createElement(i.Fragment,null,i.createElement(u.DesktopWrapper,null,i.createElement(W.oY,{portalNodeId:"modal_root",onChartType:function(t){return e(t)},onGranularity:function(t){return r(t)}}),i.createElement(W.as,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),i.createElement(W.NU,{portalNodeId:"modal_root"}),i.createElement(W.kO,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),i.createElement(W.mB,{portalNodeId:"modal_root"})))};Y.propTypes={updateChartType:o().func,updateGranularity:o().func};const V=Y;var q=r("./src/Modules/SmartChart/Components/top-widgets.jsx"),Z=function(t){return t&&function(e){t({target:{name:"symbol",value:e}})}},X=(0,m.$j)((function(t){var e=t.modules;return{contract_info:e.contract_trade.last_contract.contract_info||{},digits_info:e.contract_trade.last_contract.digits_info||{},display_status:e.contract_trade.last_contract.display_status,is_digit_contract:e.contract_trade.last_contract.is_digit_contract,is_ended:e.contract_trade.last_contract.is_ended,selected_digit:e.trade.last_digit,onDigitChange:e.trade.onChange,underlying:e.trade.symbol,trade_type:e.trade.contract_type}}))((function(t){var e=t.contract_info,r=t.digits,n=t.digits_info,o=t.display_status,a=t.is_digit_contract,s=t.is_ended,c=t.onDigitChange,l=t.selected_digit,u=t.tick,f=t.trade_type,p=t.underlying;return i.createElement(B.Z,{contract_info:e,digits_array:r,digits_info:n,display_status:o,is_digit_contract:a,is_ended:s,onDigitChange:c,is_trade_page:!0,tick:u,trade_type:f,selected_digit:l,underlying:p})})),J=(0,m.$j)((function(t){var e=t.modules,r=t.ui;return{onSymbolChange:e.trade.onChange,theme:r.is_dark_mode_on?"dark":"light"}}))((function(t){var e,r=t.onSymbolChange,n=t.charts_ref,o=t.theme,a=t.is_digits_widget_active,s=t.open_market,c=t.open;return n&&n.chart&&(e=n.chart.yAxiswidth),i.createElement(q.Z,{open_market:s,open:c,is_mobile:(0,f.isMobile)(),is_digits_widget_active:a,onSymbolChange:Z(r),theme:o,y_axis_width:e})})),$=function(t){var e=t.digits,r=t.tick;return i.createElement(H.Z,{Digits:i.createElement(X,{digits:e,tick:r})})},K=((0,m.$j)((function(t){var e=t.modules;return{updateChartType:e.contract_trade.updateChartType,updateGranularity:e.contract_trade.updateGranularity}}))((function(t){var e=t.updateChartType,r=t.updateGranularity;return i.createElement(V,{updateChartType:e,updateGranularity:r})})),s()({loader:function(){return(0,f.isMobile)()?Promise.all([r.e("src_Modules_Trading_Components_Form_TradeParams_Multiplier_expiration_jsx-src_Modules_Trading-4a2390"),r.e("screen-small")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-small.jsx")):Promise.all([r.e("src_Modules_Trading_Components_Form_TradeParams_Multiplier_expiration_jsx-src_Modules_Trading-4a2390"),r.e("screen-large")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-large.jsx"))},loading:function(){return null},render:function(t,e){var r=t.default;return i.createElement(r,e)}})),Q=function(t){var e=t.is_market_closed,r=t.is_trade_enabled;return i.createElement(i.Fragment,null,i.createElement(K,{is_trade_enabled:r,is_market_closed:(0,f.isMobile)()?void 0:e}))};Q.propTypes={is_market_closed:o().bool,is_trade_enabled:o().bool};const tt=i.memo(Q);var et=function(t){if(!window.DOMParser)return null;var e=(new window.DOMParser).parseFromString(t,"image/svg+xml").children[0],r=e.attributes,n=r.width,o=r.height;n=1*n.value,o=1*o.value;var i=[];return[].forEach.call(e.children,(function(t){var e=t.attributes,r=e.d,n=e.fill,o=e.stroke;i.push({points:r.value.match(/M|C|H|A|L|V|-?\d*(\.\d+)?/g).filter((function(t){return t})).map((function(t){return-1==="MCHALV".indexOf(t)?1*t:t})),fill:n&&n.value,stroke:o&&o.value})})),{width:n,height:o,paths:i,with_color:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white";return{width:n,height:o,paths:i.map((function(r){var n=r.points,o=r.fill;return{points:n,stroke:r.stroke,fill:"white"!==o?t:e}}))}}}},rt=et('\n<svg width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7,20 C11.2,14.4 14,10.8659932 14,7 C14,3.13400675 10.8659932,0 7,0 C3.13400675,0 0,3.13400675 0,7 C0,10.8659932 2.8,14.4 7,20 Z" fill="#333333"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="A7 7 4.2 0 6.283185307179586" fill="white" />\n</svg>'),nt=et('\n<svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L18 2L18 12L2 12Z" fill="white" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2,0 L2,1 L19,1 L19,12 L2,12 L2,20 L1,20 L1,0 L2,0 Z M18,8 L15,8 L15,11 L18,11 L18,8 Z M12,8 L9,8 L9,11 L12,11 L12,8 Z M6,8 L3,8 L3,11 L6,11 L6,8 Z M15,5 L12,5 L12,8 L15,8 L15,5 Z M9,5 L6,5 L6,8 L9,8 L9,5 Z M6,2 L3,2 L3,5 L6,5 L6,2 Z M18,2 L15,2 L15,5 L18,5 L18,2 Z M12,2 L9,2 L9,5 L12,5 L12,2 Z" fill="#333333"/>\n</svg>\n'),ot=["epoch_array","price_array"];function it(t,e){return ut(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||ct(t,e)||st()}function at(t){return ut(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ct(t)||st()}function st(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ct(t,e){if(t){if("string"==typeof t)return lt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(t,e):void 0}}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ut(t){if(Array.isArray(t))return t}function ft(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(r),!0).forEach((function(e){dt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function dt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ht=navigator.userAgent.search("Firefox")>0,_t=function(t){return function(e){var r=e.epoch_array,n=e.price_array,o=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(e,ot);return i.createElement(W.If,{epoch_array:r,price_array:n,draw_callback:function(e){return t(pt(pt({},e),o))}})}};function yt(t){var e=t.status,r=t.profit,n=t.is_dark_theme?{open:"#377cfc",won:"#00a79e",lost:"#cc2e3d",sold:"#ffad3a",fg:"#ffffff",bg:"#0e0e0e"}:{open:"#377cfc",won:"#4bb4b3",lost:"#ec3f3f",sold:"#ffad3a",fg:"#333333",bg:"#ffffff"},o=n[e||"open"];return"open"===e&&r&&(o=n[r>0?"won":"lost"]),o}var mt=function(t){return t?Math.max(Math.min(Math.sqrt(t/18),1.2),.8):1},vt=[],gt=function(t,e){if(0===vt.length)for(var r=255;r>=0;--r)vt[r]=(r<16?"0":"")+r.toString(16);var n=Math.floor(255*Math.min(Math.max(e-t-10,0)/6,1));return vt[n]},bt=function(t,e){var r=e.zoom,n=e.top,o=e.left,i=e.icon;t.save();var a=mt(r);t.translate(o-i.width*a/2,n-i.height*a/2),t.scale(a,a),i.paths.forEach((function(e){var r,n,o=e.points,i=e.fill,a=e.stroke;i&&(t.fillStyle=i),a&&(t.strokeStyle=a),t.beginPath();for(var s=0;s<o.length;s++){var c=void 0,l=void 0,u=void 0,f=void 0,p=void 0,d=void 0,h=void 0;if("M"===o[s])c=o[++s],l=o[++s],t.moveTo(c,l);else if("L"===o[s])c=o[++s],l=o[++s],t.lineTo(c,l);else if("V"===o[s])l=o[++s],t.lineTo(r,l);else if("H"===o[s])c=o[++s],t.lineTo(c,n);else if("Q"===o[s])u=o[++s],p=o[++s],c=o[++s],l=o[++s],t.quadraticCurveTo(u,p,c,l);else if("C"===o[s])u=o[++s],p=o[++s],f=o[++s],d=o[++s],c=o[++s],l=o[++s],t.bezierCurveTo(u,p,f,d,c,l);else if("A"===o[s]){c=o[++s],l=o[++s],h=o[++s];var _=o[++s],y=o[++s];t.arc(c,l,h,_,y)}r=c,n=l}t.closePath(),i&&t.fill(),a&&t.stroke()})),t.scale(1,1),t.restore()},wt=function(t){var e=t.ctx,r=t.text,n=t.tick,o=n.zoom,i=n.left,a=n.top,s=mt(o),c=Math.floor(3*s+7);e.font="".concat(c,"px Roboto"),r.split(/\n/).forEach((function(t,r){var n=Math.ceil(e.measureText(t).width);e.fillText(t,i-5-n,a+r*c+1)}))},xt=function(t){var e=t.ctx,r=t.is_dark_theme,n=t.text,o=t.left,i=t.top,a=t.scale;e.textAlign="center";var s=Math.floor(12*a);e.font="bold ".concat(s,"px BinarySymbols, Roboto"),ht||(e.shadowColor=r?"rgba(16,19,31,1)":"rgba(255,255,255,1)",e.shadowBlur=12);for(var c=0;c<(ht?1:5);++c)e.fillText(n,o,i)},Et=_t((function(t){var e=t.ctx,r=t.canvas_height,n=at(t.points),o=n[0],i=n.slice(1),a=it(t.prices,1)[0],s=t.is_last_contract,c=t.is_dark_theme,l=t.granularity,u=t.contract_info,f=u.status,p=u.profit,d=u.is_sold,h=u.is_expired,_=u.tick_count,y=e,m=yt({is_dark_theme:c,status:f,profit:d?p:null});y.save(),y.strokeStyle=m,y.fillStyle=m;var v=s&&o.visible&&!d,g=mt(o.zoom),b=r/window.devicePixelRatio;if(a&&(a=Math.min(Math.max(a,2),b-32)),v&&(wt({ctx:y,text:"Start\nTime",tick:{zom:o.zoom,left:o.left-1*g,top:b-50}}),y.beginPath(),y.setLineDash([3,3]),y.moveTo(o.left-1*g,0),i.length&&a&&(y.lineTo(o.left-1*g,a-34*g),y.moveTo(o.left-1*g,a+4*g)),y.lineTo(o.left-1*g,r),y.stroke()),i.length&&a){var w=i[0],x=i[i.length-1],E=d?gt(o.left,x.left):"";(o.visible||w.visible||x.visible)&&(y.strokeStyle=m+E,y.beginPath(),y.setLineDash([1,1]),y.moveTo(o.left,a),y.lineTo(w.left,a),y.stroke(),y.beginPath(),y.setLineDash([]),y.moveTo(w.left,a),y.lineTo(x.left,a),y.stroke(),y.strokeStyle=m),s&&0===l&&!d&&(i.filter((function(t){return t.visible})).forEach((function(t){var e=t===x?m:yt({status:"fg",is_dark_theme:c});y.fillStyle=e+E,y.beginPath(),y.arc(t.left-1*g,t.top,1.5*g,0,2*Math.PI),y.fill()})),y.fillStyle=m),0===l&&([w,h?x:null].forEach((function(t){t&&t.visible&&(y.strokeStyle=m+E,y.setLineDash([2,2]),y.beginPath(),y.moveTo(t.left-1*g,t.top),y.lineTo(t.left-1*g,a),y.stroke(),y.fillStyle=m+E,y.beginPath(),y.arc(t.left-1*g,t.top,3*g,0,2*Math.PI),y.fill(),t===w&&(y.beginPath(),y.fillStyle=yt({status:"bg",is_dark_theme:c})+E,y.arc(t.left-1*g,t.top,2*g,0,2*Math.PI),y.fill()))})),y.strokeStyle=m,y.fillStyle=m),o.visible&&!d&&xt({ctx:y,scale:g,is_dark_theme:c,text:"".concat(i.length-1,"/").concat(_),left:o.left,top:a-27*g}),o.visible&&bt(y,{top:a-9*g,left:o.left-1*g,zoom:o.zoom,icon:rt.with_color(m+(d?E:""),yt({status:"bg",is_dark_theme:c})+(d?E:""))}),x.visible&&d&&bt(y,{top:a-9*g,left:x.left+8*g,zoom:x.zoom,icon:nt.with_color(m,yt({status:"bg",is_dark_theme:c}))}),y.restore()}else y.restore()})),St={AUD:"A$",EUR:"€",GBP:"£",JPY:"¥",USD:"$",BTC:"₿",BCH:"",ETH:"E",ETC:"",LTC:"Ł",UST:"₮"},Ot=_t((function(t){var e=t.ctx,r=t.canvas_height,n=it(t.points,4),o=n[0],i=n[1],a=n[2],s=n[3],c=t.is_last_contract,l=it(t.prices,3),u=l[0],p=l[1],d=l[2],h=t.is_dark_theme,_=t.granularity,y=t.currency,m=t.contract_info,v=m.is_sold,g=m.status,b=m.profit,w=e;0!==_&&(a&&(a.top=p),s&&(s.top=d));var x=yt({status:g,profit:b,is_dark_theme:h});w.save(),w.strokeStyle=x,w.fillStyle=x;var E=c&&o.visible&&!v,S=c&&!v&&b&&o.visible&&u,O=mt(o.zoom),k=v?gt(o.left,i.left):"",P=r/window.devicePixelRatio;if(u&&(u=Math.min(Math.max(u,2),P-32)),E&&(wt({ctx:w,text:"Start\nTime",tick:{zom:o.zoom,left:o.left-1*O,top:P-50}}),w.beginPath(),w.setLineDash([3,3]),w.moveTo(o.left-1*O,0),u&&(w.lineTo(o.left-1*O,u-(S?38:20)*O),w.moveTo(o.left-1*O,u+4*O)),w.lineTo(o.left-1*O,r),w.stroke()),u&&a&&(o.visible||i.visible||Math.sign(o.left)!==Math.sign(i.left))&&(w.strokeStyle=x+k,w.beginPath(),w.setLineDash([1,1]),w.moveTo(o.left,u),w.lineTo(a.left,u),w.stroke(),w.beginPath(),w.setLineDash([]),w.moveTo(a.left,u),w.lineTo(i.left,u),w.stroke(),w.strokeStyle=x),[a,s].forEach((function(t){t&&t.visible&&(w.strokeStyle=x+k,w.setLineDash([2,2]),w.beginPath(),w.moveTo(t.left-1*O,t.top),w.lineTo(t.left-1*O,u),w.stroke(),w.fillStyle=x+k,w.beginPath(),w.arc(t.left-1*O,t.top,3*O,0,2*Math.PI),w.fill(),t===a&&(w.beginPath(),w.fillStyle=yt({status:"bg",is_dark_theme:h})+k,w.arc(t.left-1*O,t.top,2*O,0,2*Math.PI),w.fill()),w.fillStyle=x,w.strokeStyle=x)})),o&&o.visible&&u&&bt(w,{top:u-9*O,left:o.left-1*O,zoom:o.zoom,icon:rt.with_color(x+k)}),S){var j=St[y]||"",L=(0,f.getDecimalPlaces)(y),C="".concat(b<0?"-":b>0?"+":" ").concat(j).concat(Math.abs(b).toFixed(L));xt({ctx:w,scale:O,text:C,is_dark_theme:h,left:o.left,top:u-28*O})}i.visible&&bt(w,{top:u-9*O,left:i.left+8*O,zoom:i.zoom,icon:nt.with_color(x,yt({status:"bg",is_dark_theme:h}))}),w.restore()}));const kt={TickContract:Et,NonTickContract:Ot,DigitContract:_t((function(t){var e=t.ctx,r=at(t.points),n=r[0],o=r.slice(1),i=it(t.prices,2),a=i[0],s=i[1],c=t.is_last_contract,l=t.is_dark_theme,u=t.granularity,f=t.contract_info,p=f.status,d=f.profit,h=f.is_sold,_=f.tick_stream,y=f.tick_count,m=e,v=yt({is_dark_theme:l,status:p,profit:h?d:null});m.save(),m.strokeStyle=v,m.fillStyle=v;var g=c&&n.visible&&!h,b=mt(n.zoom);if(0!==u&&n&&a&&(n.top=a),g&&(m.beginPath(),m.setLineDash([3,3]),m.moveTo(n.left-1*b,0),o.length&&(m.lineTo(n.left-1*b,n.top-34*b),m.moveTo(n.left-1*b,n.top+4*b)),m.lineTo(n.left-1*b,m.canvas.height),m.stroke()),o.length){var w=o[o.length-1],x=h?gt(n.left,w.left):"";0!==u&&w&&s&&(w.top=s),n.visible&&n.top&&!h&&xt({ctx:m,scale:b,is_dark_theme:l,text:"".concat(o.length,"/").concat(y),left:n.left-1*b,top:n.top-27*b}),!n.visible||0!==u&&h||bt(m,{top:n.top-9*b,left:n.left-1*b,zoom:n.zoom,icon:rt.with_color(v+x,yt({status:"bg",is_dark_theme:l})+x)}),o.forEach((function(t,e){if(t===w&&t.visible&&(0===u||t===w)&&(0===u||t!==w||h)){var r=t!==w?yt({status:"fg",is_dark_theme:l}):v;m.beginPath(),m.fillStyle=r,m.arc(t.left,t.top,7*b,0,2*Math.PI),m.fill(),m.beginPath(),m.fillStyle=h?v:yt({status:"bg",is_dark_theme:l}),m.arc(t.left,t.top,6*b,0,2*Math.PI),m.fill();var n=_[e].tick_display_value.slice(-1);m.fillStyle=h?"white":r,m.textAlign="center",m.shadowBlur=0,m.font="bold ".concat(12*b,"px BinarySymbols, Roboto"),m.fillText(n,t.left,t.top)}})),w.visible&&h&&(m.fillStyle=v,bt(m,{top:w.top-16*b,left:w.left+8*b,zoom:w.zoom,icon:nt.with_color(v,yt({status:"bg",is_dark_theme:l}))})),m.restore()}else m.restore()}))};var Pt=function(t){var e=t.position,r=t.updateChartType,n=t.updateGranularity;return i.createElement(W.av,{position:e||(0,f.isMobile)()?"bottom":null},i.createElement(W.oY,{portalNodeId:"modal_root",onChartType:r,onGranularity:n}),(0,f.isDesktop)()&&i.createElement(W.as,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,f.isDesktop)()&&i.createElement(W.kO,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,f.isDesktop)()&&i.createElement(W.NU,{portalNodeId:"modal_root"}),(0,f.isDesktop)()&&i.createElement(W.mB,{portalNodeId:"modal_root"}))};Pt.propTypes={position:o().string,updateChartType:o().func,updateGranularity:o().func};const jt=i.memo(Pt);function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Ct(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tt(){return Tt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tt.apply(this,arguments)}function At(){At=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Lt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Nt(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Dt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Nt(i,n,o,a,s,"next",t)}function s(t){Nt(i,n,o,a,s,"throw",t)}a(void 0)}))}}function It(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||Mt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(t,e){if(t){if("string"==typeof t)return zt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zt(t,e):void 0}}function zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Rt=function(t){var e=t.tick,r=t.digits,n=t.setTick,o=t.setDigits;return i.useEffect((function(){n(e)}),[e]),i.useEffect((function(){o(r)}),[r]),null};const Ut=(0,m.$j)((function(t){var e=t.client,r=t.common,n=t.modules,o=t.ui;return{getFirstOpenMarket:n.trade.getFirstOpenMarket,is_eu:e.is_eu,is_synthetics_available:n.trade.is_synthetics_available,network_status:r.network_status,contract_type:n.trade.contract_type,form_components:n.trade.form_components,should_show_active_symbols_loading:n.trade.should_show_active_symbols_loading,is_chart_loading:n.trade.is_chart_loading,is_market_closed:n.trade.is_market_closed,show_digits_stats:n.trade.show_digits_stats,is_trade_enabled:n.trade.is_trade_enabled,prepareTradeStore:n.trade.prepareTradeStore,setMobileDigitView:n.trade.setMobileDigitView,symbol:n.trade.symbol,onMount:n.trade.onMount,onUnmount:n.trade.onUnmount,purchase_info:n.trade.purchase_info,NotificationMessages:o.notification_messages_ui,is_market_unavailable_visible:o.has_only_forward_starting_contracts,should_show_multipliers_onboarding:o.should_show_multipliers_onboarding,onChange:n.trade.onChange,setContractTypes:n.trade.setContractTypes}}))((function(t){var e=t.contract_type,r=t.form_components,n=t.getFirstOpenMarket,o=t.should_show_active_symbols_loading,a=t.is_chart_loading,s=t.is_dark_theme,c=t.is_eu,l=t.is_market_closed,p=t.is_market_unavailable_visible,d=t.is_trade_enabled,h=t.network_status,m=t.NotificationMessages,v=t.onChange,g=t.onMount,b=t.onUnmount,w=t.prepareTradeStore,x=t.setContractTypes,E=t.setMobileDigitView,S=t.show_digits_stats,O=t.should_show_multipliers_onboarding,k=t.symbol,j=t.is_synthetics_available,L=It(i.useState([]),2),C=L[0],A=L[1],N=It(i.useState({}),2),D=N[0],I=N[1],M=It(i.useState(!1),2),z=M[0],R=M[1],U=It(i.useState(!1),2),F=U[0],B=U[1],H=It(i.useState(null),2),W=H[0],Y=H[1],V=It(i.useState(null),2),q=V[0],Z=V[1],J=It(i.useState(!1),2),$=J[0],K=J[1],Q=i.useMemo((function(){return z?{category:"synthetic_index"}:F&&W?{category:W,subcategory:q}:null}),[z,F,W,q]);i.useEffect((function(){if(g(),!j){var t=function(){var t=Dt(At().mark((function t(){var e,r,o,i,a;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=["forex","indices","commodities"],t.next=3,n(r);case 3:if(t.t1=e=t.sent,t.t0=null!==t.t1,!t.t0){t.next=7;break}t.t0=void 0!==e;case 7:if(!t.t0){t.next=11;break}t.t2=e,t.next=12;break;case 11:t.t2={};case 12:o=t.t2,i=o.category,a=o.subcategory,i&&(Y(i),Z(a));case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}return function(){return b()}}),[g,b,n,j]),i.useEffect((function(){(0,f.isMobile)()&&A([]),R(!1),B(!1)}),[k,A,R,j]),i.useEffect((function(){var t=function(){var t=Dt(At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:v({target:{name:"contract_type",value:"multiplier"}});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();!O||a||!j&&l||t()}),[O,a]);var et=i.useCallback((function(t){var e=t.digits,r=t.tick;return i.createElement(Rt,{digits:e,tick:r,setTick:I,setDigits:A})}),[]),rt=function(){var t=Dt(At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j?(R(!0),setTimeout((function(){return R(!1)}))):(B(!0),setTimeout((function(){return B(!1)})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),nt=(0,f.isMobile)()?"mobile-wrapper":"sidebar__container desktop-only";return i.createElement("div",{id:"trade_container",className:"trade-container"},i.createElement(u.DesktopWrapper,null,i.createElement(P,null)),i.createElement(u.Div100vhContainer,{id:"chart_container",className:"chart-container",is_disabled:(0,f.isDesktop)(),height_offset:"259px"},i.createElement(m,null),i.createElement(i.Suspense,{fallback:i.createElement(_.Z,{is_dark:s,is_visible:!k||a})},i.createElement(u.DesktopWrapper,null,i.createElement("div",{className:"chart-container__wrapper"},i.createElement(_.Z,{is_visible:a||o}),i.createElement(Wt,{try_synthetic_indices:z,try_open_markets:F,open_market:Q}))),i.createElement(u.MobileWrapper,null,i.createElement(_.Z,{is_visible:a||o||(0,y.A)(e)&&!C[0]}),i.createElement(u.SwipeableWrapper,{onChange:function(t){E(0===t),K(0===t)},is_disabled:!S||!d||0===r.length||a||o},S&&i.createElement(X,{digits:C,tick:D}),i.createElement(Wt,{bottomWidgets:S?et:void 0,is_digits_widget_active:S?$:void 0,try_synthetic_indices:z,try_open_markets:F,open_market:Q})))),i.createElement(G,null)),i.createElement("div",{className:nt},l&&!p&&i.createElement(T,Tt({is_eu:c,is_synthetics_available:j},c&&W&&{is_market_available:!0},{onClick:rt,onMarketOpen:w,symbol:k})),i.createElement(tt,{is_market_closed:l,is_trade_enabled:d&&r.length>0&&"online"===h.class})))}));var Ft=i.forwardRef((function(t,e){return i.createElement(W.Xb,Tt({innerRef:e},t))})),Gt=(0,m.$j)((function(t){var e=t.modules,r=t.ui,n=t.client;return{markers_array:e.contract_trade.markers_array,is_digit_contract:e.contract_trade.is_digit_contract,granularity:e.contract_trade.granularity,is_dark_theme:r.is_dark_mode_on,currency:n.currency}}))((function(t){var e=t.markers_array,r=t.is_dark_theme,n=t.granularity,o=t.currency,a=t.config;return e.map((function(t){var e=kt[t.type];return i.createElement(e,Tt({key:t.key,is_dark_theme:r,granularity:n,currency:o,config:a},t))}))})),Bt=function(t){var e,r=t.updateGranularity,n=t.updateChartType,o=t.active_symbols,a=t.chart_layout,s=t.chart_type,c=t.chartStateChange,l=t.exportLayout,u=t.extra_barriers,p=void 0===u?[]:u,d=t.end_epoch,h=t.granularity,_=t.has_alternative_source,y=t.is_trade_enabled,m=t.is_socket_opened,v=t.main_barrier,g=t.refToAddTick,b=t.setChartStatus,w=t.settings,x=t.show_digits_stats,E=t.symbol,S=t.wsForget,O=t.wsForgetStream,k=t.wsSendRequest,P=t.wsSubscribe,j=i.useRef(),L=i.useRef();L.current=t;var C=i.useCallback((function(t){var e=t.digits,r=t.tick;return i.createElement($,{digits:e,tick:r})}),[]),T=i.useCallback((function(t){var e=Tt({},t),r=L.current,n=r.is_digits_widget_active,o=r.try_synthetic_indices,a=r.try_open_markets,s=r.open_market;return i.createElement(J,Tt({open_market:s,open:o||a,charts_ref:j,is_digits_widget_active:n},e))}),[]),A=v?[v].concat(function(t){return function(t){if(Array.isArray(t))return zt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Mt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(p)):p,N=0===h?8:24;return E&&0!==o.length?i.createElement(Ft,(Ct(e={ref:j,initialData:{activeSymbols:o},chartData:{activeSymbols:o},barriers:A,bottomWidgets:x&&(0,f.isDesktop)()?C:t.bottomWidgets,crosshair:(0,f.isMobile)()?0:void 0,crosshairTooltipLeftAllow:560,showLastDigitStats:!!(0,f.isDesktop)()&&x,chartControlsWidgets:null,chartStatusListener:function(t){return b(!t)},chartType:s},"initialData",{activeSymbols:JSON.parse(JSON.stringify(o))}),Ct(e,"chartData",{activeSymbols:JSON.parse(JSON.stringify(o))}),Ct(e,"feedCall",{activeSymbols:!1}),Ct(e,"enabledNavigationWidget",(0,f.isDesktop)()),Ct(e,"enabledChartFooter",!1),Ct(e,"id","trade"),Ct(e,"isMobile",(0,f.isMobile)()),Ct(e,"maxTick",(0,f.isMobile)()?N:void 0),Ct(e,"granularity",h),Ct(e,"requestAPI",k),Ct(e,"requestForget",S),Ct(e,"requestForgetStream",O),Ct(e,"requestSubscribe",P),Ct(e,"settings",w),Ct(e,"stateChangeListener",c),Ct(e,"symbol",E),Ct(e,"topWidgets",y?T:null),Ct(e,"isConnectionOpened",m),Ct(e,"clearChart",!1),Ct(e,"toolbarWidget",(function(){return i.createElement(jt,{updateChartType:n,updateGranularity:r})})),Ct(e,"importedLayout",a),Ct(e,"onExportLayout",l),Ct(e,"shouldFetchTradingTimes",!d),Ct(e,"hasAlternativeSource",_),Ct(e,"refToAddTick",g),Ct(e,"getMarketsOrder",(function(t){var e="synthetic_index",r=!!t.find((function(t){return t.market===e}));return t.slice().sort((function(t,e){return t.display_name<e.display_name?-1:1})).map((function(t){return t.market})).reduce((function(t,e){return-1===t.indexOf(e)&&t.push(e),t}),r?[e]:[])})),Ct(e,"yAxisMargin",{top:(0,f.isMobile)()?76:106}),e),i.createElement(Gt,null)):null};Bt.propTypes={bottomWidgets:o().func,chart_type:o().string,chart_layout:o().any,chartStateChange:o().func,exportLayout:o().func,end_epoch:o().number,granularity:o().number,is_digits_widget_active:o().bool,is_trade_enabled:o().bool,is_socket_opened:o().bool,has_alternative_source:o().bool,main_barrier:o().any,refToAddTick:o().func,setChartStatus:o().func,settings:o().object,symbol:o().string,try_synthetic_indices:o().bool,wsForget:o().func,wsForgetStream:o().func,wsSendRequest:o().func,wsSubscribe:o().func};var Ht,Wt=(0,m.$j)((function(t){var e=t.modules,r=t.ui,n=t.common;return{is_socket_opened:n.is_socket_opened,granularity:e.contract_trade.granularity,chart_type:e.contract_trade.chart_type,chartStateChange:e.trade.chartStateChange,updateChartType:e.contract_trade.updateChartType,updateGranularity:e.contract_trade.updateGranularity,settings:{assetInformation:!1,countdown:r.is_chart_countdown_visible,isHighestLowestMarkerEnabled:!1,language:n.current_language.toLowerCase(),position:r.is_chart_layout_default?"bottom":"left",theme:r.is_dark_mode_on?"dark":"light"},last_contract:{is_digit_contract:e.contract_trade.last_contract.is_digit_contract,is_ended:e.contract_trade.last_contract.is_ended},is_trade_enabled:e.trade.is_trade_enabled,main_barrier:e.trade.main_barrier_flattened,extra_barriers:e.trade.barriers_flattened,show_digits_stats:e.trade.show_digits_stats,contract_type:e.trade.contract_type,symbol:e.trade.symbol,exportLayout:e.trade.exportLayout,setChartStatus:e.trade.setChartStatus,chart_layout:e.trade.chart_layout,wsForget:e.trade.wsForget,wsForgetStream:e.trade.wsForgetStream,wsSendRequest:e.trade.wsSendRequest,wsSubscribe:e.trade.wsSubscribe,active_symbols:e.trade.active_symbols,has_alternative_source:e.trade.has_alternative_source,refToAddTick:e.trade.refToAddTick}}))(Bt),Yt=i.lazy((function(){return(0,f.moduleLoader)((function(){return r.e("contract").then(r.bind(r,"./src/Modules/Contract/index.js"))}))})),Vt=i.lazy((function(){return(0,f.moduleLoader)((function(){return Promise.resolve().then(r.bind(r,"./src/Modules/Page404/index.js"))}))})),qt=(0,f.makeLazyLoader)((function(){return(0,f.moduleLoader)((function(){return r.e("reports").then(r.bind(r,"./src/Modules/Reports/index.js"))}))}),(function(){return i.createElement(u.Loading,null)})),Zt={component:Vt,getTitle:function(){return(0,h.localize)("Error 404")}};const Xt=function(){return Ht||(Ht=[{path:f.routes.contract,component:Yt,getTitle:function(){return(0,h.localize)("Contract Details")},is_authenticated:!0},{path:f.routes.reports,component:qt("Reports"),is_authenticated:!0,getTitle:function(){return(0,h.localize)("Reports")},icon_component:"IcReports",routes:[{path:f.routes.positions,component:qt("OpenPositions"),getTitle:function(){return(0,h.localize)("Open positions")},icon_component:"IcOpenPositions",default:!0},{path:f.routes.profit,component:qt("ProfitTable"),getTitle:function(){return(0,h.localize)("Profit table")},icon_component:"IcProfitTable"},{path:f.routes.statement,component:qt("Statement"),getTitle:function(){return(0,h.localize)("Statement")},icon_component:"IcStatement"}]},{path:f.routes.trade,component:Ut,getTitle:function(){return(0,h.localize)("Trader")},exact:!0}]).push(Zt),Ht};var Jt=["active_class","to","children"];function $t(){return $t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$t.apply(this,arguments)}var Kt=function(t){var e=t.active_class,r=t.to,n=t.children,o=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,Jt),a=(0,d.AH)(r),s=(0,d.U_)(a,Xt());if(!s)throw new Error("Route not found: ".concat(r));return r?i.createElement(p.NavLink,$t({to:a,activeClassName:e||"active",exact:s.exact},o),n):i.createElement("a",o,n)};Kt.propTypes={active_class:o().string,children:o().oneOfType([o().object,o().array,o().string]),to:o().string};const Qt=Kt;var te=r("./src/Modules/Page404/index.js");function ee(){return ee=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ee.apply(this,arguments)}const re=function(t){return i.createElement(p.Route,{exact:t.exact,path:t.path,render:function(e){var r,n=null,o=(0,f.removeBranchName)(location.pathname).replace(/\/$/,""),a=function(e){var r;return""===e||(null!==(r=t.path)&&void 0!==r&&r.includes(":")?e.substring(0,e.lastIndexOf("/")+1)===t.path.substring(0,t.path.indexOf(":")):t.path===e||!(!t.routes||!t.routes.find((function(t){return e===t.path}))))}(o);if(t.component===p.Redirect){var s=t.to;t.path===f.routes.index&&(s=e.location.pathname.toLowerCase().replace(t.path,"")),n=i.createElement(p.Redirect,{to:s})}else if(a&&t.is_authenticated&&!t.is_logging_in&&!t.is_logged_in)(0,f.redirectToLogin)(t.is_logged_in,(0,h.getLanguage)());else{var c=t.routes?t.routes.find((function(t){return t.default})):{},l=!(0,f.isEmptyObject)(c);n=i.createElement(i.Fragment,null,l&&o===t.path&&i.createElement(p.Redirect,{to:c.path}),a?i.createElement(t.component,ee({},e,{routes:t.routes})):i.createElement(te.default,null))}var u=(null===(r=t.getTitle)||void 0===r?void 0:r.call(t))||"";return document.title="".concat(u," | ").concat(f.default_title),(0,f.alternateLinkTagChange)(),(0,f.canonicalLinkTagChange)(),n}})};function ne(){return ne=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ne.apply(this,arguments)}const oe=function(t){return i.createElement(i.Suspense,{fallback:i.createElement("div",null)},i.createElement(p.Switch,null,Xt().map((function(e,r){return i.createElement(re,ne({key:r},e,t))}))))};var ie=function(t,e){return t.some((function(t){return!!(0,l.matchPath)(e,{path:t,exact:!0})}))},ae=function(t){var e=t.path_from,r=t.path_to,n=t.action,o=t.match_patterns,i=t.callback;return"PUSH"!==n&&"POP"!==n||i(o.some((function(t){return ie(t.from,e)&&ie(t.to,r)}))),!0},se=s()({loader:function(){return r.e("error-component").then(r.bind(r,"./src/App/Components/Elements/Errors/index.js"))},loading:u.UILoader,render:function(t,e){var r=t.default;return i.createElement(r,e)}}),ce=function(t){var e=t.onUnmountPortfolio,r=t.error,n=t.has_error,o=t.history,a=t.is_logged_in,s=t.is_logging_in,c=t.passthrough,l=t.setPromptHandler,u=t.setTradeMountingPolicy;return i.useEffect((function(){return l&&l(!0,(function(t,r){return ae({path_from:o.location.pathname,path_to:t.pathname,match_patterns:[{from:Xt().flatMap((function(t){return t.routes?t.routes.map((function(t){return t.path})):[t.path]})).filter((function(t){return t&&t!==f.routes.mt5&&t!==f.routes.dxtrade})),to:[f.routes.mt5,f.routes.dxtrade]}],action:r,callback:function(t){t&&e()}}),ae({path_from:o.location.pathname,path_to:t.pathname,match_patterns:[{from:[f.routes.contract],to:[f.routes.trade]},{from:[f.routes.trade],to:[f.routes.contract]}],action:r,callback:u})})),function(){null==l||l(!1)}}),[]),i.useEffect((function(){return function(){return e()}}),[e]),n?i.createElement(se,r):i.createElement(oe,{is_logged_in:a,is_logging_in:s,passthrough:c})};ce.propTypes={error:c.PropTypes.objectOrObservableObject,has_error:o().bool,history:o().object,is_logged_in:o().bool,is_logging_in:o().bool,passthrough:o().object,setPromptHandler:o().func,setTradeMountingPolicy:o().func};const le=(0,l.withRouter)((0,m.$j)((function(t){var e=t.client,r=t.common,n=t.modules,o=t.ui;return{onUnmountPortfolio:n.portfolio.onUnmount,error:r.error,has_error:r.has_error,is_logged_in:e.is_logged_in,is_logging_in:e.is_logging_in,setPromptHandler:o.setPromptHandler,setTradeMountingPolicy:n.trade.setSkipPrePostLifecycle}}))(ce));var ue=r("../../node_modules/react-transition-group/esm/TransitionGroup.js"),fe=r("./src/Stores/Modules/Trading/Helpers/active-symbols.js"),pe=r("./src/Stores/Modules/Contract/Helpers/multiplier.js"),de=r("./src/Stores/Modules/Contract/Helpers/logic.js"),he=r("./src/App/Components/Elements/ContentLoader/index.js"),_e=r("./src/Constants/contract.js"),ye=r("./src/Modules/Reports/Helpers/market-underlying.js"),me=function(t){var e=t.is_visible,r="won"===t.result;return i.createElement(i.Fragment,null,i.createElement(b.Z,{in:e,timeout:250,classNames:{enter:"positions-modal-card__result--enter",enterDone:"positions-modal-card__result--enter-done",exit:"positions-modal-card__result--exit"},unmountOnExit:!0},i.createElement("div",{className:"positions-modal-card__caption-wrapper","data-testid":"result_mobile"},i.createElement("span",{className:g()("positions-modal-card__caption",{"positions-modal-card__caption--won":r,"positions-modal-card__caption--lost":!r})},r?i.createElement(i.Fragment,null,(0,h.localize)("Won"),i.createElement(u.Icon,{icon:"IcCheckmarkCircle",className:"positions-modal-card__icon",color:"green"})):i.createElement(i.Fragment,null,(0,h.localize)("Lost"),i.createElement(u.Icon,{icon:"IcCrossCircle",className:"positions-modal-card__icon",color:"red"}))))))};me.propTypes={is_visible:o().bool,result:o().string};const ve=me;var ge=function(t){var e,r=t.active_symbols,n=t.addToast,o=t.className,a=t.contract_info,s=t.contract_update,c=t.currency,l=t.current_focus,p=t.current_tick,d=t.getContractById,_=t.id,y=t.indicative,m=t.is_loading,v=t.is_mobile,w=t.is_sell_requested,x=t.is_unsupported,E=t.onClickSell,S=t.profit_loss,O=t.onClickCancel,k=t.removeToast,P=t.result,j=t.sell_price,L=t.server_time,C=t.setCurrentFocus,T=t.should_show_cancellation_warning,A=t.status,N=t.toggleCancellationWarning,D=t.togglePositions,I=t.toggleUnsupportedContractModal,M=t.type,z=i.createElement("div",{className:"positions-modal-card__content-loader"},i.createElement(he.rl,{speed:2})),R=(0,f.isMultiplierContract)(a.contract_type),U=(0,f.isCryptoContract)(a.underlying),F=!R||U&&R,G=!!(0,de.NQ)(a),B=S>=0?"won":"lost",H=(0,f.hasContractEntered)(a)&&(0,f.isOpen)(a),W=(0,fe.rh)(r,(0,ye.cS)(a.shortcode).underlying),Y=i.createElement(i.Fragment,null,i.createElement("div",{className:g()("positions-modal-card__grid","positions-modal-card__grid-header")},i.createElement("div",{className:"positions-modal-card__underlying-name"},i.createElement(u.Icon,{icon:a.underlying?"IcUnderlying".concat(a.underlying):"IcUnknown",size:34}),i.createElement(u.Text,{size:"xxs",className:"positions-modal-card__symbol",weight:"bold"},a.display_name)),i.createElement("div",{className:"positions-modal-card__type"},i.createElement(u.ContractCard.ContractTypeCell,{getContractTypeDisplay:_e.h8,is_high_low:(0,f.isHighLow)({shortcode:a.shortcode}),multiplier:a.multiplier,type:M})),i.createElement(b.Z,{in:H,timeout:250,classNames:{enter:"positions-modal-card__sell-button--enter",enterDone:"positions-modal-card__sell-button--enter-done",exit:"positions-modal-card__sell-button--exit"},unmountOnExit:!0},i.createElement("div",{className:"positions-modal-card__sell-button"},i.createElement(u.ContractCard.Sell,{contract_info:a,is_sell_requested:w,getCardLabels:_e.gk,onClickSell:E})))),i.createElement(u.CurrencyBadge,{currency:null!==(e=null==a?void 0:a.currency)&&void 0!==e?e:""}),i.createElement("div",{className:g()("positions-modal-card__grid","positions-modal-card__grid-body")},i.createElement("div",{className:g()("positions-modal-card__grid-profit-payout")},i.createElement("div",{className:g()("positions-modal-card__profit-loss","positions-modal-card__profit-loss-label")},P?(0,h.localize)("Profit/Loss:"):(0,h.localize)("Potential profit/loss:")),i.createElement("div",{className:g()("positions-modal-card__indicative","positions-modal-card__indicative-label")},P?(0,h.localize)("Payout:"):(0,h.localize)("Indicative price:")),i.createElement("div",{className:g()("positions-modal-card__profit-loss",{"positions-modal-card__profit-loss--is-crypto":(0,f.isCryptocurrency)(c),"positions-modal-card__profit-loss--negative":S<0,"positions-modal-card__profit-loss--positive":S>0})},i.createElement(u.Money,{amount:Math.abs(S),currency:c}),i.createElement("div",{className:g()("positions-modal-card__indicative--movement",{"positions-modal-card__indicative--movement-complete":!!P})},"profit"===A&&i.createElement(u.Icon,{icon:"IcProfit"}),"loss"===A&&i.createElement(u.Icon,{icon:"IcLoss"}))),i.createElement("div",{className:"positions-modal-card__indicative"},i.createElement(u.Money,{amount:j||y,currency:c}),i.createElement("div",{className:g()("positions-modal-card__indicative--movement",{"positions-modal-card__indicative--movement-complete":!!P})},"profit"===A&&i.createElement(u.Icon,{icon:"IcProfit"}),"loss"===A&&i.createElement(u.Icon,{icon:"IcLoss"})))),i.createElement("div",{className:g()("positions-modal-card__grid-price-payout")},i.createElement("div",{className:"positions-modal-card__purchase-price"},i.createElement(u.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},(0,h.localize)("Purchase price:")),i.createElement(u.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},i.createElement(u.Money,{amount:a.buy_price,currency:c}))),i.createElement("div",{className:"positions-modal-card__payout-price"},i.createElement(u.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},(0,h.localize)("Potential payout:")),i.createElement(u.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},a.payout?i.createElement(u.Money,{amount:a.payout,currency:c}):i.createElement("strong",null,"-i")))),P||a.is_sold?i.createElement(ve,{contract_id:_,is_visible:!!a.is_sold,result:P||B}):i.createElement(u.ProgressSliderMobile,{className:"positions-modal-card__progress",current_tick:p,getCardLabels:_e.gk,is_loading:m,start_time:a.date_start,expiry_time:a.date_expiry,server_time:L,ticks_count:a.tick_count}))),V=i.createElement(u.ContractCard.Header,{contract_info:a,display_name:W,getCardLabels:_e.gk,getContractTypeDisplay:_e.h8,has_progress_slider:!v&&F,is_mobile:v,is_sell_requested:w,onClickSell:E,server_time:L}),q=i.createElement(u.ContractCard.Body,{addToast:n,connectWithContractUpdate:pe.tP,contract_info:a,contract_update:s,currency:c,current_focus:l,getCardLabels:_e.gk,getContractById:d,is_mobile:v,is_multiplier:R,has_progress_slider:v&&F&&!G,removeToast:k,server_time:L,setCurrentFocus:C,should_show_cancellation_warning:T,status:A,toggleCancellationWarning:N}),Z=i.createElement(u.ContractCard.Footer,{contract_info:a,getCardLabels:_e.gk,is_multiplier:R,is_sell_requested:w,onClickCancel:O,onClickSell:E,server_time:L,status:A}),X=i.createElement(i.Fragment,null,i.createElement(u.ContractCard,{contract_info:a,getCardLabels:_e.gk,is_multiplier:R,profit_loss:S,should_show_result_overlay:!1},V,q,Z)),J=R?X:Y;return i.createElement("div",{id:"dt_drawer_card_".concat(_),className:g()("positions-modal-card__wrapper",o)},x?i.createElement("div",{className:g()("positions-modal-card"),onClick:function(){return I(!0)}},a.underlying?J:z):i.createElement(i.Fragment,null,i.createElement(Qt,{onClick:D,className:g()("positions-modal-card",{"positions-modal-card--multiplier":R}),to:(0,f.getContractPath)(_)},a.underlying?J:z)))};ge.propTypes={className:o().string,contract_info:o().object,currency:o().string,current_focus:o().string,current_tick:o().number,duration:o().oneOfType([o().number,o().string]),duration_unit:o().string,exit_spot:o().oneOfType([o().number,o().string]),id:o().number,indicative:o().number,is_loading:o().bool,is_mobile:o().bool,is_sell_requested:o().bool,is_unsupported:o().bool,is_valid_to_sell:o().oneOfType([o().number,o().bool]),onClickRemove:o().func,onClickSell:o().func,onClickCancel:o().func,profit_loss:o().number,result:o().string,sell_time:o().number,server_time:o().object,setCurrentFocus:o().func,status:o().string,togglePositions:o().func,toggleUnsupportedContractModal:o().func,type:o().string};const be=(0,m.$j)((function(t){var e=t.common,r=t.ui,n=t.modules;return{active_symbols:n.trade.active_symbols,addToast:r.addToast,current_focus:r.current_focus,getContractById:n.contract_trade.getContractById,is_mobile:r.is_mobile,removeToast:r.removeToast,server_time:e.server_time,setCurrentFocus:r.setCurrentFocus,should_show_cancellation_warning:r.should_show_cancellation_warning,toggleCancellationWarning:r.toggleCancellationWarning,updateLimitOrder:n.contract_trade.updateLimitOrder}}))(ge);var we=function(t){var e=t.positions_count,r=t.is_open,n=t.togglePositions,o=g()("positions-toggle",{"positions-toggle--active":r,"positions-toggle--has-count":e>0});return i.createElement("a",{id:"dt_positions_toggle",className:o,onClick:n,"data-count":e},i.createElement(u.Icon,{icon:"IcPortfolio",className:"positions-toggle__icon"}))};we.propTypes={is_positions_drawer_on:o().bool,positions_count:o().number,togglePositionsDrawer:o().func};const xe=we;function Ee(){return Ee=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ee.apply(this,arguments)}const Se=(0,m.$j)((function(t){var e=t.modules,r=t.ui;return{symbol:e.trade.symbol,trade_contract_type:e.trade.contract_type,onClickRemove:e.portfolio.removePositionById,togglePositionsDrawer:r.togglePositionsDrawer,is_positions_drawer_on:r.is_positions_drawer_on}}))((function(t){var e=t.active_positions_count,r=t.all_positions,n=t.currency,o=t.disableApp,a=t.enableApp,s=t.error,c=t.is_empty,l=t.is_positions_drawer_on,p=t.onClickSell,d=t.onClickRemove,_=t.onClickCancel,y=t.symbol,m=t.togglePositionsDrawer,v=t.toggleUnsupportedContractModal,g=t.trade_contract_type,x=[],S=function(){x.slice(0,5).map((function(t){var e=t.contract_info;null!=e&&e.is_sold&&d(e.contract_id)})),m()};x=r.filter((function(t){return t.contract_info&&y===t.contract_info.underlying&&(0,E._M)(t.contract_info,g)}));var O=i.createElement(i.Fragment,null,i.createElement(ue.Z,{component:"div"},x.slice(0,5).map((function(t){return i.createElement(b.Z,{appear:!0,key:t.id,in:!0,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},unmountOnExit:!0},i.createElement(be,Ee({onClickSell:p,onClickCancel:_,onClickRemove:d,key:t.id,currency:n,toggleUnsupportedContractModal:v,togglePositions:m},t)))}))));return i.createElement(i.Fragment,null,i.createElement(xe,{is_open:l,togglePositions:m,positions_count:e}),i.createElement(u.Modal,{is_open:l,toggleModal:S,id:"dt_mobile_positions",is_vertical_top:!0,has_close_icon:!0,enableApp:a,disableApp:o,width:"calc(100vw - 32px)"},i.createElement(u.Div100vhContainer,{className:"positions-modal",height_offset:"48px"},i.createElement("div",{className:"positions-modal__header"},i.createElement(u.Text,{size:"xxxs",className:"positions-modal__title"},i.createElement(u.Icon,{icon:"IcPortfolio",className:"positions-modal__title-icon"}),(0,h.localize)("Recent positions")),i.createElement("div",{className:"positions-modal__close-btn",onClick:S},i.createElement(u.Icon,{icon:"IcMinusBold"}))),i.createElement("div",{className:"positions-modal__body"},c||s?i.createElement(w,{error:s}):O),i.createElement("div",{className:"positions-modal__footer"},i.createElement(Qt,{onClick:S,className:"dc-btn dc-btn--secondary dc-btn__large positions-modal__footer-btn",to:f.routes.positions},i.createElement("span",{className:"dc-btn__text"},(0,h.localize)("Go to Reports")))))))}));function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function ke(){ke=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Oe(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Pe(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var je=function(t){var e=t.disableApp,r=t.enableApp,n=t.onMountCashier,o=t.onMountPositions,a=t.onPositionsCancel,s=t.onPositionsRemove,c=t.onPositionsSell,l=t.populateHeaderExtensions,p=t.setAccountSwitchListener,d=t.store,h=i.useRef();h.current=t;var _=location.pathname!==f.routes.mt5,y=i.useCallback((function(){var t=h.current,n=t.is_logged_in,o=t.active_positions_count,f=t.positions,p=t.positions_currency,y=t.positions_error,v=t.trade_contract_type,g=t.symbol,b=f.filter((function(t){return t.contract_info&&g===t.contract_info.underlying&&(0,E._M)(t.contract_info,v)})),w=n&&_&&i.createElement(u.MobileWrapper,null,i.createElement(m.z1,{store:d},i.createElement(Se,{active_positions_count:o,all_positions:f,currency:p,disableApp:e,is_empty:!b.length,enableApp:r,error:y,onClickSell:c,onClickRemove:s,onClickCancel:a})));l(w)}),[e,r,a,s,c,l,d,_]);return i.useEffect((function(){var t=function(){var t,e=(t=ke().mark((function t(){var e;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,f.isMobile)()||!_){t.next=10;break}return e=d.client,t.next=4,(0,A.when)((function(){return!e.is_populating_account_list}));case 4:if(!h.current.is_logged_in){t.next=10;break}return t.next=7,f.WS.wait("authorize");case 7:o(),n(!0),p();case 10:y();case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Pe(i,n,o,a,s,"next",t)}function s(t){Pe(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return t(),function(){l(null)}}),[n,o,y,l,p,d,_]),i.useEffect((function(){y()})),null};je.propTypes={is_logged_in:o().bool,populateHeaderExtensions:o().func};const Le=(0,m.$j)((function(t){var e=t.client,r=t.modules,n=t.ui;return{positions_currency:e.currency,is_logged_in:e.is_logged_in,positions:r.portfolio.all_positions,onPositionsSell:r.portfolio.onClickSell,positions_error:r.portfolio.error,onPositionsRemove:r.portfolio.removePositionById,onPositionsCancel:r.portfolio.onClickCancel,onMountCashier:r.cashier.general_store.onMountCommon,onMountPositions:r.portfolio.onMount,active_positions_count:r.portfolio.active_positions_count,trade_contract_type:r.trade.contract_type,symbol:r.trade.symbol,disableApp:n.disableApp,enableApp:n.enableApp,populateHeaderExtensions:n.populateHeaderExtensions,toggleUnsupportedContractModal:n.toggleUnsupportedContractModal,setAccountSwitchListener:r.cashier.general_store.setAccountSwitchListener}}))(je);var Ce=function(t){var e=t.active_positions_count,r=t.is_logged_in,n=t.is_positions_drawer_on,o=t.location,a=t.populateFooterExtensions,s=t.togglePositionsDrawer;i.useEffect((function(){return l()})),i.useEffect((function(){return function(){return a([])}}),[]);var c=function(){return i.createElement(xe,{is_open:n,togglePositions:s,positions_count:e})},l=function(){var t=o.pathname===f.routes.trade;a(r&&t?[{position:"left",Component:c}]:[])};return null};Ce.propTypes={active_positions_count:o().number,is_logged_in:o().bool,is_positions_drawer_on:o().bool,location:o().object,populateFooterExtensions:o().func,togglePositionsDrawer:o().func};const Te=(0,m.$j)((function(t){var e=t.client,r=t.modules,n=t.ui;return{active_positions_count:r.portfolio.active_positions_count,is_logged_in:e.is_logged_in,is_positions_drawer_on:n.is_positions_drawer_on,populateFooterExtensions:n.populateFooterExtensions,togglePositionsDrawer:n.togglePositionsDrawer}}))((0,p.withRouter)(Ce));var Ae=s()({loader:function(){return r.e("settings-chart").then(r.bind(r,"./src/App/Containers/SettingsModal/settings-chart.jsx"))},loading:u.UILoader}),Ne=function(t){var e=t.populateSettingsExtensions,r=t.store;return i.useEffect((function(){return function(){return e(null)}}),[e]),i.useEffect((function(){return function(){var t=[{icon:"IcChart",label:(0,h.localize)("Charts"),value:function(t){return function(t,e){return i.createElement(m.z1,{store:e},i.createElement(Ae,t))}(t,r)}}];e(t)}()})),null};Ne.propTypes={populateSettingsExtensions:o().func,store:o().object};const De=(0,m.$j)((function(t){return{populateSettingsExtensions:t.ui.populateSettingsExtensions}}))(Ne);var Ie=r("./src/Modules/Trading/Containers/toast-popup.jsx"),Me=r("../../node_modules/extend/index.js"),ze=r.n(Me),Re=function(t){var e=t.label,r=t.line_style,n=t.marker_config,o=t.status;return n?i.createElement("div",{className:g()("chart-marker-line__wrapper","chart-marker-line--".concat(r))},e===n.LINE_END.content_config.label&&i.createElement(u.Icon,{icon:"IcContractExitTimeCircle",className:"chart-marker-line__icon",color:"lost"===o?"red":"green",size:24}),e===n.LINE_START.content_config.label&&i.createElement(u.Icon,{icon:"IcContractStartTimeCircle",className:"chart-marker-line__icon chart-marker-line__icon--time",color:"secondary",size:24})):i.createElement("div",null)};Re.propTypes={label:o().string,line_style:o().string,marker_config:o().object,status:o().oneOf(["won","lost"])};const Ue=(0,c.observer)(Re);var Fe=function(t){var e=t.className,r=t.spot_count;return i.createElement("div",{className:g()("chart-spot",e)},r)};Fe.propTypes={className:o().string,spot_count:o().oneOfType([o().number,o().string])};const Ge=(0,c.observer)(Fe);function Be(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var He=function(t){var e=t.align_label,r=t.has_hover_toggle,n=t.spot_className,o=t.spot_count,a=t.spot_epoch,s=t.spot_value,c=t.status,l=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Be(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Be(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState(!r),2),p=l[0],d=l[1],h=function(){d(!p)},_=i.createElement(Ge,{className:n,spot_count:o});return r&&(_=i.createElement("div",{className:"marker-hover-container",onMouseEnter:h,onMouseLeave:h},_)),i.createElement("div",{className:"chart-spot-label"},p&&i.createElement("div",{className:"chart-spot-label__info-container"},i.createElement("div",{className:"chart-spot-label__time-value-container chart-spot-label__time-value-container--".concat(e)},i.createElement("div",{className:"chart-spot-label__time-container"},i.createElement(u.Icon,{icon:"IcClockOutline",height:10,width:10,className:"chart-spot-label__time-icon"}),i.createElement(u.Text,{as:"p",color:"prominent",size:"xxxs"},(0,f.toMoment)(+a).format("HH:mm:ss"))),i.createElement("div",{className:g()("chart-spot-label__value-container",{"chart-spot-label__value-container--won":"won"===c,"chart-spot-label__value-container--lost":"lost"===c})},i.createElement("p",null,(0,f.addComma)(s))))),_)};He.defaultProps={align_label:"top"},He.propTypes={align_label:o().oneOf(["top","bottom"]),has_hover_toggle:o().bool,spot_className:o().string,spot_count:o().oneOfType([o().number,o().string]),spot_epoch:o().oneOfType([o().number,o().string]),spot_value:o().oneOfType([o().number,o().string]),status:o().oneOf(["won","lost"])};const We=(0,c.observer)(He);var Ye,Ve,qe={LINE_END:{type:"LINE_END",marker_config:{ContentComponent:Ue,className:"chart-marker-line"},content_config:{line_style:"dash",label:(0,h.localize)("End Time")}},LINE_PURCHASE:{type:"LINE_PURCHASE",marker_config:{ContentComponent:Ue,className:"chart-marker-line"},content_config:{line_style:"solid",label:(0,h.localize)("Purchase Time")}},LINE_START:{type:"LINE_START",marker_config:{ContentComponent:Ue,className:"chart-marker-line"},content_config:{line_style:"solid",label:(0,h.localize)("Start Time")}},SPOT_ENTRY:{type:"SPOT_ENTRY",marker_config:{ContentComponent:Ge},content_config:{className:"chart-spot__entry"}},SPOT_SELL:{type:"SPOT_SELL",marker_config:{ContentComponent:Ge},content_config:{className:"chart-spot__sell"}},SPOT_EXIT:{type:"SPOT_EXIT",marker_config:{ContentComponent:We},content_config:{spot_className:"chart-spot__spot"}},SPOT_MIDDLE:{type:"SPOT_MIDDLE",marker_config:{ContentComponent:We},content_config:{spot_className:"chart-spot__spot"}}},Ze=function(t,e,r,n){return ze()(!0,{},qe[t],{marker_config:{x:+e,y:r},content_config:n})},Xe=function(t,e){return(0,f.isDigitContract)(t.contract_type)?e+1:e},Je=function(t){if(!t.entry_tick_time)return!1;var e=qe.SPOT_ENTRY.type,r={},n=t.entry_tick_display_value;return(0,f.isDigitContract)(t.contract_type)&&(e=qe.SPOT_MIDDLE.type,r={spot_value:"".concat(n),spot_epoch:"".concat(t.entry_tick_time),spot_count:1}),Ze(e,t.entry_tick_time,n,r)},$e=function(t,e,r){if(!t.exit_tick_time)return!1;var n,o,i=(0,f.isUserSold)(t);e&&(n=Xe(t,r),o=e.align_label);var a=t.exit_tick_display_value,s=!i||(0,f.isMultiplierContract)(t.contract_type),c=s?qe.SPOT_EXIT.type:qe.SPOT_SELL.type,l=s?{spot_value:"".concat(a),spot_epoch:"".concat(t.exit_tick_time),status:"".concat(+t.profit>=0?"won":"lost"),align_label:o,spot_count:n}:{};return Ze(c,+t.exit_tick_time,+a,l)};function Ke(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qe(t){return function(t){if(Array.isArray(t))return tr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return tr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var er=(Ke(Ye={},qe.SPOT_ENTRY.type,Je),Ke(Ye,qe.SPOT_EXIT.type,$e),Ye),rr=(Ke(Ve={},qe.LINE_START.type,(function(t){return!!t.date_start&&Ze(qe.LINE_START.type,+t.date_start,null,{marker_config:qe})})),Ke(Ve,qe.LINE_END.type,(function(t){var e=(0,de.NQ)(t);return!!e&&Ze(qe.LINE_END.type,+e,null,{status:"".concat(t.profit>=0?"won":"lost"),marker_config:qe})})),Ke(Ve,qe.LINE_PURCHASE.type,(function(t){return!(!t.purchase_time||!t.date_start||+t.purchase_time==+t.date_start)&&Ze(qe.LINE_PURCHASE.type,+t.purchase_time)})),Ve),nr=function(t,e,r){if(e>0&&r.length){var n=r[e-1];+t>+n.tick&&(t.align_label="top"),+t.tick<+n.tick&&(t.align_label="bottom"),+t.tick==+n.tick&&(t.align_label=n.align_label)}return t},or={CALL:"ABOVE",PUT:"BELOW",CALLE:"ABOVE",PUTE:"BELOW",EXPIRYRANGE:"BETWEEN",EXPIRYMISS:"OUTSIDE",RANGE:"BETWEEN",UPORDOWN:"OUTSIDE",ONETOUCH:"NONE_SINGLE",NOTOUCH:"NONE_SINGLE",ASIANU:"ABOVE",ASIAND:"BELOW",MULTUP:"ABOVE",MULTDOWN:"BELOW"},ir={1:"NONE_SINGLE",2:"NONE_DOUBLE"},ar="#999999",sr="#6E6E6E",cr="solid",lr=function(t){return t in or},ur=function(t,e){var r=t.findIndex((function(t){return t.key===e}));r>-1&&t.splice(r,1)};function fr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var hr=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.color,a=o.line_style,s=o.not_draggable;pr(this,t),this.color=void 0,this.lineStyle=void 0,this.shade=void 0,this.shadeColor=void 0,this.high=void 0,this.low=void 0,this.relative=void 0,this.draggable=void 0,this.hidePriceLines=void 0,this.hideBarrierLine=void 0,this.hideOffscreenLine=void 0,this.title=void 0,this.onChartBarrierChange=void 0,(0,A.makeObservable)(this,{color:A.observable,lineStyle:A.observable,shade:A.observable,shadeColor:A.observable,high:A.observable,low:A.observable,relative:A.observable,draggable:A.observable,hidePriceLines:A.observable,hideBarrierLine:A.observable,hideOffscreenLine:A.observable,title:A.observable,updateBarriers:A.action.bound,updateBarrierShade:A.action.bound,onBarrierChange:A.action.bound,updateBarrierColor:A.action.bound,barrier_count:A.computed,default_shade:A.computed}),this.color=i,this.lineStyle=a||cr,this.onChange=this.onBarrierChange,this.onChartBarrierChange="function"==typeof n?n.bind(this):function(){},this.high=+e||0,r&&(this.low=+r),this.shade=this.default_shade;var c=!!e;this.relative=!c||/^[+-]/.test(e),this.draggable=!s&&c,this.hidePriceLines=!c}var e,r;return e=t,r=[{key:"updateBarriers",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r||(this.relative=/^[+-]/.test(t)),this.high=+t||void 0,this.low=+e||void 0}},{key:"updateBarrierShade",value:function(t,e){this.shade=t&&or[e]||this.default_shade}},{key:"onBarrierChange",value:function(t){var e=t.high,r=t.low;this.updateBarriers(e,r,!0),this.onChartBarrierChange.apply(this,function(t){return function(t){if(Array.isArray(t))return fr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return fr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.filter((function(t){return null!=t})).map((function(e){return"".concat(t&&!/^[+-]/.test(e)?"+":"").concat(e)}))}(this.relative,e,r)))}},{key:"updateBarrierColor",value:function(t){this.color=t?sr:ar}},{key:"barrier_count",get:function(){return(void 0!==this.high)+(void 0!==this.low)}},{key:"default_shade",get:function(){return ir[this.barrier_count]}}],r&&dr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_r={STOP_OUT:"stop_out",TAKE_PROFIT:"take_profit",STOP_LOSS:"stop_loss"},yr=function(t){var e=t.barriers,r=t.contract_type,n=t.contract_info,o=void 0===n?{}:n;if(t.is_over&&function(t,e){return(0,f.isMultiplierContract)(t)&&e.limit_order}(r,o)){var i=Object.values(_r),a=Object.keys(o.limit_order).some((function(t){return t===_r.STOP_LOSS&&o.limit_order[t].value}));i.forEach((function(t){var r=o.limit_order[t];if(r&&r.value){var n=e.find((function(e){return e.key===t}));if(n){if(n.high===+r.value)return;n.onChange({high:r.value})}else{var i={key:t,title:"".concat(r.display_name),color:t===_r.TAKE_PROFIT?"#4bb4b3":"#ff6444",draggable:!1,lineStyle:t===_r.STOP_OUT?"dotted":cr,hidePriceLines:a&&t===_r.STOP_OUT,hideOffscreenLine:!0,showOffscreenArrows:!0,isSingleBarrier:!0,opacityOnOverlap:t===_r.STOP_OUT&&.15};n=new hr(r.value),Object.assign(n,i),e.push(n)}}else ur(e,t)}))}else Object.values(_r).forEach((function(t){return ur(e,t)}))};var mr=r("./src/_common/utility.js");function vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const gr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}var e,r;return e=t,(r=[{key:"add",value:function(t,e){this.has(t)||(this.errors[t]=[]),-1===this.errors[t].indexOf(e)&&this.errors[t].push(e)}},{key:"all",value:function(){return this.errors}},{key:"first",value:function(t){return this.has(t)?this.errors[t][0]:null}},{key:"get",value:function(t){return this.has(t)?this.errors[t]:[]}},{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.errors,t)}}])&&vr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const xr=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;br(this,t),this.input=e,this.rules=r,this.store=n,this.errors=new gr,this.error_count=0}var e,r,n;return e=t,n=[{key:"getRuleObject",value:function(t){var e="string"==typeof t,r={name:e?t:t[0],options:e?{}:t[1]||{}};return r.validator="custom"===r.name?t[1].func:(0,f.getPreBuildDVRs)()[r.name].func,r}}],(r=[{key:"addFailure",value:function(t,e,r){var n=r||e.options.message||(0,f.getPreBuildDVRs)()[e.name].message();"length"===e.name?n=(0,mr.template)(n,[e.options.min===e.options.max?e.options.min:"".concat(e.options.min,"-").concat(e.options.max)]):"min"===e.name?n=(0,mr.template)(n,[e.options.min]):"not_equal"===e.name&&(n=(0,mr.template)(n,[e.options.name1,e.options.name2])),this.errors.add(t,n),this.error_count++}},{key:"check",value:function(){var e=this;return Object.keys(this.input).forEach((function(r){Object.prototype.hasOwnProperty.call(e.rules,r)&&e.rules[r].forEach((function(n){var o=t.getRuleObject(n);if((o.validator||"function"==typeof o.validator)&&(!o.options.condition||o.options.condition(e.store))&&(""!==e.input[r]||"req"===o.name)){var i,a;if("number"===o.name){var s=o.validator(e.input[r],o.options,e.store,e.input);i=s.is_ok,a=s.message}else i=o.validator(e.input[r],o.options,e.store,e.input);i||e.addFailure(r,o,a)}}))})),!this.error_count}},{key:"isPassed",value:function(){return this.check()}}])&&wr(e.prototype,r),n&&wr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Er(t){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Er(t)}function Sr(){Sr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Er(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Or(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function kr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Or(i,n,o,a,s,"next",t)}function s(t){Or(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Pr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pr(Object(r),!0).forEach((function(e){Lr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Lr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ar=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Cr(this,t),this.validation_errors={},this.validation_rules={},this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.partial_fetch_time=0,(0,A.makeObservable)(this,{validation_errors:A.observable,validation_rules:A.observable,partial_fetch_time:A.observable,retrieveFromStorage:A.action,setValidationErrorMessages:A.action,setValidationRules:A.action,addRule:A.action,validateProperty:A.action,validateAllProperties:A.action,onSwitchAccount:A.action.bound,onPreSwitchAccount:A.action.bound,onLogout:A.action.bound,onClientInit:A.action.bound,onNetworkStatusChange:A.action.bound,onThemeChange:A.action.bound,onRealAccountSignupEnd:A.action.bound,disposePreSwitchAccount:A.action.bound,disposeSwitchAccount:A.action.bound,disposeLogout:A.action.bound,disposeClientInit:A.action.bound,disposeNetworkStatusChange:A.action.bound,disposeThemeChange:A.action.bound,disposeRealAccountSignupEnd:A.action.bound,onUnmount:A.action.bound,assertHasValidCache:A.action.bound});var r=e.root_store,n=e.local_storage_properties,o=e.session_storage_properties,i=e.validation_rules,a=e.store_name;Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0});var s=n&&n.length||o&&o.length;if(s){if(!a)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:a,enumerable:!1,writable:!1})}this.root_store=r,this.local_storage_properties=n||[],this.session_storage_properties=o||[],this.setValidationRules(i),this.setupReactionForLocalStorage(),this.setupReactionForSessionStorage(),this.retrieveFromStorage()}var e,r;return e=t,r=[{key:"getSnapshot",value:function(t){var e=(0,A.toJS)(this);return(0,f.isEmptyObject)(this.root_store)||(e.root_store=this.root_store),t&&t.length&&(e=t.reduce((function(t,r){return Object.assign(t,Lr({},r,e[r]))}),{})),e}},{key:"setupReactionForLocalStorage",value:function(){var e=this;this.local_storage_properties.length&&(0,A.reaction)((function(){return e.local_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.local_storage_properties,t.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var e=this;this.session_storage_properties.length&&(0,A.reaction)((function(){return e.session_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.session_storage_properties,t.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(e,r){var n=JSON.stringify(this.getSnapshot(e),(function(t,e){if(null!==e)return e}));r===t.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,n):r===t.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,n)}},{key:"retrieveFromStorage",value:function(){var t=this,e=JSON.parse(localStorage.getItem(this.store_name,{})),r=JSON.parse(sessionStorage.getItem(this.store_name,{})),n=jr(jr({},e),r);Object.keys(n).forEach((function(e){return t[e]=n[e]}))}},{key:"setValidationErrorMessages",value:function(t,e){var r=this;this.validation_errors[t]&&!r.validation_errors[t].filter((function(t){return!e.includes(t)})).concat(e.filter((function(e){return!r.validation_errors[t].includes(e)}))).length||(this.validation_errors[t]=e)}},{key:"setValidationRules",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(r){t.addRule(r,e[r])}))}},{key:"addRule",value:function(t,e){var r=this;this.validation_rules[t]=e,(0,A.isObservable)(this[t])&&(0,A.intercept)(this,t,(function(e){return r.validateProperty(t,e.newValue),e}))}},{key:"validateProperty",value:function(t,e){var r=this,n=this.validation_rules[t].trigger,o=Lr({},t,void 0!==e?e:this[t]),i=Lr({},t,this.validation_rules[t].rules||[]);n&&Object.hasOwnProperty.call(this,n)&&(o[n]=this[n],i[n]=this.validation_rules[n].rules||[]);var a=new xr(o,i,this);a.isPassed(),Object.keys(o).forEach((function(t){r.setValidationErrorMessages(t,a.errors.get(t))}))}},{key:"validateAllProperties",value:function(){var t=this,e=Object.keys(this.validation_rules),r=Object.keys(this.validation_errors);e.forEach((function(e){t.validateProperty(e,t[e])})),r.forEach((function(r){e.includes(r)||delete t.validation_errors[r]}))}},{key:"onSwitchAccount",value:function(t){var e=this;t&&(this.switch_account_listener=t,this.switchAccountDisposer=(0,A.when)((function(){return e.root_store.client.switch_broadcast}),(function(){try{var t=e.switch_account_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Switching account listeners are required to return a promise.");t.then((function(){e.root_store.client.switchEndSignal(),e.onSwitchAccount(e.switch_account_listener)}))}catch(t){(0,f.isProduction)()||console.error(t)}})))}},{key:"onPreSwitchAccount",value:function(t){var e=this;t&&(this.pre_switch_account_listener=t,this.preSwitchAccountDisposer=(0,A.when)((function(){return e.root_store.client.pre_switch_broadcast}),(function(){try{var t=e.pre_switch_account_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Pre-switch account listeners are required to return a promise.");t.then((function(){e.root_store.client.setPreSwitchAccount(!1),e.onPreSwitchAccount(e.pre_switch_account_listener)}))}catch(t){(0,f.isProduction)()||console.error(t)}})))}},{key:"onLogout",value:function(t){var e=this;this.logoutDisposer=(0,A.when)((function(){return e.root_store.client.has_logged_out}),kr(Sr().mark((function t(){var r;return Sr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(r=e.logout_listener())||!r.then||"function"!=typeof r.then){t.next=6;break}r.then((function(){e.root_store.client.setLogout(!1),e.onLogout(e.logout_listener)})),t.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,f.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.logout_listener=t}},{key:"onClientInit",value:function(t){var e=this;this.clientInitDisposer=(0,A.when)((function(){return e.root_store.client.initialized_broadcast}),kr(Sr().mark((function t(){var r;return Sr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(r=e.client_init_listener())||!r.then||"function"!=typeof r.then){t.next=6;break}r.then((function(){e.root_store.client.setInitialized(!1),e.onClientInit(e.client_init_listener)})),t.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,f.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.client_init_listener=t}},{key:"onNetworkStatusChange",value:function(t){var e=this;this.networkStatusChangeDisposer=(0,A.reaction)((function(){return e.root_store.common.is_network_online}),(function(t){try{e.network_status_change_listener(t)}catch(t){(0,f.isProduction)()||console.error(t)}})),this.network_status_change_listener=t}},{key:"onThemeChange",value:function(t){var e=this;this.themeChangeDisposer=(0,A.reaction)((function(){return e.root_store.ui.is_dark_mode_on}),(function(t){try{e.theme_change_listener(t)}catch(t){(0,f.isProduction)()||console.error(t)}})),this.theme_change_listener=t}},{key:"onRealAccountSignupEnd",value:function(t){var e=this;this.realAccountSignupEndedDisposer=(0,A.when)((function(){return e.root_store.ui.has_real_account_signup_ended}),(function(){try{var t=e.real_account_signup_ended_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Real account signup listeners are required to return a promise.");t.then((function(){e.root_store.ui.setRealAccountSignupEnd(!1),e.onRealAccountSignupEnd(e.real_account_signup_ended_listener)}))}catch(t){(0,f.isProduction)()||console.error(t)}})),this.real_account_signup_ended_listener=t}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(t){if(this.root_store.client.loginid!==t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach((function(t){return t()})),this.partial_fetch_time=!1}}}],r&&Tr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Nr(t){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nr(t)}function Dr(t){return function(t){if(Array.isArray(t))return Ir(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ir(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ir(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ur(t,e){return Ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ur(t,e)}function Fr(t,e){if(e&&("object"===Nr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Gr(t)}function Gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Br(t){return Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Br(t)}Ar.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")});var Hr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ur(t,e)}(o,t);var e,r,n=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Br(t);if(e){var o=Br(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Fr(this,r)}}(o);function o(t,e){var r,i=e.contract_id;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=n.call(this,{root_store:t,validation_rules:{has_contract_update_stop_loss:{trigger:"contract_update_stop_loss"},contract_update_stop_loss:{rules:[["req",{condition:function(t){return!t.contract_update_stop_loss},message:(0,h.localize)("Please enter a stop loss amount.")}],["custom",{func:function(t,e,r){var n=(0,f.getTotalProfit)(r.contract_info);return!(n<0&&-t>n)},message:(0,h.localize)("Please enter a stop loss amount that's higher than the current potential loss.")}],["custom",{func:function(t,e,r){return t<(0,de.f)(r)+1},message:(0,h.localize)("Invalid stop loss. Stop loss cannot be more than stake.")}]]},has_contract_update_take_profit:{trigger:"contract_update_take_profit"},contract_update_take_profit:{rules:[["req",{condition:function(t){return!t.contract_update_take_profit},message:(0,h.localize)("Please enter a take profit amount.")}],["custom",{func:function(t,e,r){var n=(0,f.getTotalProfit)(r.contract_info);return!(n>0&&+t<n)},message:(0,h.localize)("Please enter a take profit amount that's higher than the current potential profit.")}]]}}})).digits_info=A.observable.object({}),r.sell_info=A.observable.object({}),r.contract_config={},r.display_status="purchased",r.is_ended=!1,r.is_digit_contract=!1,r.error_message="",r.contract_info=A.observable.object({}),r.is_static_chart=!1,r.end_time=null,r.contract_update_take_profit="",r.contract_update_stop_loss="",r.has_contract_update_take_profit=!1,r.has_contract_update_stop_loss=!1,r.contract_update_history=[],r.contract_update_config={},r.margin=void 0,r.barriers_array=[],r.markers_array=[],r.marker=null,r.is_ongoing_contract=!1,r.cacheProposalOpenContractResponse=function(t){var e=t.proposal_open_contract.contract_id;f.WS.storage.set({proposal_open_contract:1,contract_id:e},t)},r.createBarriersArray=function(t,e){var r=[];if(t){var n=t.contract_type,o=t.barrier,i=t.entry_spot,a=t.high_barrier,s=t.low_barrier;if(lr(n)&&(o||a||i)){var c=new hr(o||a||i,s,null,{color:e?sr:ar,line_style:cr,not_draggable:!0});c.updateBarrierShade(!0,n),r=[c]}}return r},(0,A.makeObservable)(Gr(r),{digits_info:A.observable,sell_info:A.observable,contract_config:A.observable.ref,display_status:A.observable,is_ended:A.observable,is_digit_contract:A.observable,error_message:A.observable,contract_info:A.observable.ref,is_static_chart:A.observable,end_time:A.observable,contract_update_take_profit:A.observable,contract_update_stop_loss:A.observable,has_contract_update_take_profit:A.observable,has_contract_update_stop_loss:A.observable,contract_update_history:A.observable.ref,margin:A.observable,barriers_array:A.observable.shallow,markers_array:A.observable.shallow,marker:A.observable.ref,populateConfig:A.action.bound,populateContractUpdateConfig:A.action.bound,populateContractUpdateHistory:A.action.bound,clearContractUpdateConfigValues:A.action.bound,onChange:A.action.bound,updateLimitOrder:A.action.bound}),r.root_store=t,r.contract_id=i,r}return e=o,r=[{key:"populateConfig",value:function(t){var e=this.contract_info;this.contract_info=t,this.end_time=(0,de.NQ)(this.contract_info),this.updateBarriersArray(t,this.root_store.ui.is_dark_mode_on),this.markers_array=function(t){var e=[];if(t){var r,n=(0,de.NQ)(t),o=(0,de.aG)(t.date_start,n);if(t.tick_count){var i,a=function(t){var e=(0,f.unique)(t.tick_stream,"epoch").map(nr),r=[];return e.forEach((function(e,n){var o,i=0===n&&+e.epoch!==t.exit_tick_time,a=n>0&&+e.epoch!=+t.exit_tick_time,s=+e.epoch==+t.exit_tick_time||Xe(t,n)===t.tick_count;i?o=Je(t):a?o=function(t,e,r){var n=Xe(t,r),o=e.tick_display_value,i=Ze(qe.SPOT_MIDDLE.type,+e.epoch,+o,{spot_value:"".concat(o),spot_epoch:"".concat(e.epoch),align_label:e.align_label,spot_count:n});return i.type="".concat(i.type,"_").concat(r),(0,f.isMobile)()&&n>1?null:i}(t,e,n):s&&(e.align_label="top",o=$e(t,e,n)),o&&r.push(o)})),r}(t);(i=e).push.apply(i,Qe(a))}else if("candle"!==o){var s,c=Object.keys(er).map((function(e){return er[e](t)}));(s=e).push.apply(s,Qe(c))}var l=Object.keys(rr).map((function(e){return rr[e](t)}));(r=e).push.apply(r,Qe(l)),e=e.filter((function(t){return!!t}))}return e.forEach((function(e){var r=t.contract_id;e.react_key="".concat(r,"-").concat(e.type)})),e}(this.contract_info),this.marker=function(t){if(!t||(0,f.isMultiplierContract)(t.contract_type))return null;var e=t.transaction_ids,r=t.tick_stream,n=t.contract_id,o=t.date_start,i=t.date_expiry,a=t.entry_tick,s=t.exit_tick,c=t.entry_tick_time,l=t.exit_tick_time,u=t.contract_type,p=t.tick_count,d=t.barrier_count,h=t.barrier,_=t.high_barrier,y=t.low_barrier,m=r?r.map((function(t){return t.epoch})):[],v=(0,f.isDigitContract)(u),g=[];if(v?g=[]:1==+d&&h?g=[+h]:2==+d&&_&&y&&(g=[+y,+_]),a&&g.push(a),s&&g.push(s),!o)return null;if(!e)return{type:v?"DigitContract":"TickContract",contract_info:(0,A.toJS)(t),key:"".concat(n,"-date_start"),epoch_array:[o],price_array:g};if(p>=1)return(0,f.isDigitContract)(u)?{contract_info:(0,A.toJS)(t),type:"DigitContract",key:"".concat(n,"-date_start"),epoch_array:[o].concat(Dr(m)),price_array:g}:{contract_info:(0,A.toJS)(t),type:"TickContract",key:"".concat(n,"-date_start"),epoch_array:[o].concat(Dr(m)),price_array:g};if(!p){var b=[o,(0,de.NQ)(t)||i];return c&&b.push(c),l&&b.push(l),{contract_info:(0,A.toJS)(t),type:"NonTickContract",key:"".concat(n,"-date_start"),epoch_array:b,price_array:g}}return null}(this.contract_info),this.contract_config=(0,de.f6)(this.contract_info),this.display_status=(0,f.getDisplayStatus)(this.contract_info),this.is_ended=(0,f.isEnded)(this.contract_info),this.is_digit_contract=(0,f.isDigitContract)(this.contract_info.contract_type),!this.contract_info.barrier&&e.barrier&&this.is_digit_contract&&(this.contract_info.barrier=e.barrier),this.is_digit_contract&&(0,A.extendObservable)(this.digits_info,(0,f.getDigitInfo)(this.digits_info,this.contract_info)),1!=+t.is_settleable||t.is_sold||f.WS.send({sell_expired:1}),(0,f.isMultiplierContract)(this.contract_info.contract_type)&&t.contract_id&&t.limit_order&&this.populateContractUpdateConfig(this.contract_info)}},{key:"populateContractUpdateConfig",value:function(t){var e=(0,de.W9)(t);if(!(0,f.isEqualObject)(this.contract_update_config,e)){Object.assign(this,e),this.contract_update_config=e;var r=t.contract_update,n=t.error;r&&!n&&(this.contract_info.limit_order=Object.assign(this.contract_info.limit_order||{},r))}}},{key:"populateContractUpdateHistory",value:function(t){var e=t.contract_update_history;this.root_store.modules.contract_replay.contract_store.contract_update_history=e.sort((function(t,e){return e.order_date-t.order_date}))}},{key:"updateBarriersArray",value:function(t,e){if(this.barriers_array.length){var r=this.barriers_array[0];if(t){var n=t.contract_type,o=t.barrier,i=t.high_barrier,a=t.low_barrier;lr(n)&&(o||i)&&(r.updateBarriers(o||i,a),r.updateBarrierColor(e)),t.contract_id&&t.contract_id===this.root_store.modules.contract_replay.contract_id&&yr({barriers:this.barriers_array,contract_info:t,contract_type:n,is_over:!0})}}else this.barriers_array=this.createBarriersArray(t,e)}},{key:"clearContractUpdateConfigValues",value:function(){Object.assign(this,(0,de.W9)(this.contract_info)),this.validation_errors.contract_update_stop_loss=[],this.validation_errors.contract_update_take_profit=[]}},{key:"onChange",value:function(t){var e=t.name,r=t.value;this[e]=r,this.validateProperty(e,this[e])}},{key:"updateLimitOrder",value:function(){var t=this,e=function(t){var e,r,n,o,i=t.has_contract_update_stop_loss,a=t.has_contract_update_take_profit,s=t.contract_update_stop_loss,c=t.contract_update_take_profit,l=t.contract_info,u={},f=a?+c:null;Math.abs(null===(e=l.limit_order)||void 0===e||null===(r=e.take_profit)||void 0===r?void 0:r.order_amount)!==Math.abs(f)&&(u.take_profit=f);var p=i?+s:null;return Math.abs(null===(n=l.limit_order)||void 0===n||null===(o=n.stop_loss)||void 0===o?void 0:o.order_amount)!==Math.abs(p)&&(u.stop_loss=p),u}(this);f.WS.contractUpdate(this.contract_id,e).then((function(e){e.error?t.root_store.common.setServicesError(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mr(Object(r),!0).forEach((function(e){zr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({type:e.msg_type},e.error)):(t.populateContractUpdateConfig(e),t.root_store.ui.is_history_tab_active&&f.WS.contractUpdateHistory(t.contract_id).then(t.populateContractUpdateHistory),t.root_store.modules.portfolio.populateContractUpdate(e,t.contract_id))}))}}],r&&Rr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ar),Wr=function(t,e){return{key:"contract_sold",header:(0,h.localize)("Contract sold"),message:i.createElement(h.Localize,{i18n_default_text:"Contract was sold for <0 />.",components:[i.createElement(u.Money,{key:e,amount:e,currency:t,show_currency:!0})]}),type:"contract_sold",size:"small",should_hide_close_btn:!0,is_auto_close:!0}},Yr=function(){return{key:"contract_sold",header:(0,h.localize)("Contract cancelled"),message:i.createElement(h.Localize,{i18n_default_text:"Contract was cancelled."}),type:"contract_sold",size:"small",should_hide_close_btn:!0,is_auto_close:!0}};function Vr(t){return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(t)}function qr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qr(Object(r),!0).forEach((function(e){Xr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jr(){Jr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Vr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function $r(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Kr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qr(t,e){return Qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qr(t,e)}function tn(t,e){if(e&&("object"===Vr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return en(t)}function en(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rn(t){return rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rn(t)}var nn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qr(t,e)}(o,t);var e,r,n=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rn(t);if(e){var o=rn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tn(this,r)}}(o);function o(t){var e,r=t.root_store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,{root_store:r})).chart_state="",e.contract_store={contract_info:{}},e.is_market_closed=!1,e.is_sell_requested=!1,e.has_error=!1,e.error_message="",e.error_code="",e.is_chart_loading=!0,e.is_chart_scaling=!1,e.is_forward_starting=!1,e.margin=void 0,e.contract_id=void 0,e.indicative_status=void 0,e.contract_info=A.observable.object({}),e.is_static_chart=!1,e.is_ongoing_contract=!1,e.prev_indicative=0,e.contract_update=A.observable.object({}),e.should_forget_first=!1,e.handleSubscribeProposalOpenContract=function(){var t,r=(t=Jr().mark((function t(r,n){return Jr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.WS.storage.has({proposal_open_contract:1,contract_id:r});case 2:if(!t.sent){t.next=6;break}return f.WS.storage.proposalOpenContract({contract_id:r}).then(n),t.abrupt("return");case 6:if(!e.should_forget_first){t.next=10;break}return t.next=9,f.WS.forgetAll("proposal_open_contract");case 9:e.should_forget_first=!1;case 10:e.subscriber=f.WS.subscribeProposalOpenContract(r,n);case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){$r(i,n,o,a,s,"next",t)}function s(t){$r(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t,e){return r.apply(this,arguments)}}(),e.subscribeProposalOpenContract=function(){f.WS.wait("authorize").then((function(){e.handleSubscribeProposalOpenContract(e.contract_id,e.populateConfig)}))},e.forgetProposalOpenContract=function(){e.subscriber&&(e.subscriber.unsubscribe(),delete e.subscriber)},e.setAccountSwitcherListener=function(t,r){e.onSwitchAccount((function(){return e.accountSwitcherListener(t,r)}))},e.accountSwitcherListener=function(t,r){return e.has_error?(e.removeErrorMessage(),e.onMount(t)):r.push(f.routes.reports),Promise.resolve()},e.removeAccountSwitcherListener=function(){e.disposeSwitchAccount()},(0,A.makeObservable)(en(e),{chart_state:A.observable,contract_store:A.observable,is_market_closed:A.observable,is_sell_requested:A.observable,has_error:A.observable,error_message:A.observable,error_code:A.observable,is_chart_loading:A.observable,is_chart_scaling:A.observable,is_forward_starting:A.observable,margin:A.observable,contract_id:A.observable,indicative_status:A.observable,contract_info:A.observable.ref,is_static_chart:A.observable,contract_update:A.observable.ref,onMount:A.action.bound,onUnmount:A.override,populateConfig:A.action.bound,updateMargin:A.action.bound,chartStateChange:A.action.bound,onClickCancel:A.action.bound,onClickSell:A.action.bound,handleSell:A.action.bound,removeErrorMessage:A.action.bound}),e}return e=o,(r=[{key:"onMount",value:function(t){var e=this;t&&(this.contract_id=t,this.contract_store=new Hr(this.root_store,{contract_id:t}),this.subscribeProposalOpenContract(),f.WS.storage.activeSymbols("brief"),f.WS.setOnReconnect((function(){e.root_store.client.is_switching||e.subscribeProposalOpenContract()})))}},{key:"onUnmount",value:function(){this.forgetProposalOpenContract(this.contract_id,this.populateConfig),this.contract_id=null,this.is_ongoing_contract=!1,this.is_static_chart=!1,this.is_chart_loading=!0,this.contract_info={},this.indicative_status=null,this.prev_indicative=0,this.chart_state="",this.root_store.ui.toggleHistoryTab(!1),f.WS.removeOnReconnect()}},{key:"populateConfig",value:function(t){if(this.switch_account_listener){if("error"in t){var e=t.error,r=e.code,n=e.message;return this.has_error=!0,this.is_chart_loading=!1,this.error_message=n,void(this.error_code=r)}if((0,f.isEmptyObject)(t.proposal_open_contract))return this.has_error=!0,this.error_message=(0,h.localize)("Sorry, you can't view this contract because it doesn't belong to this account."),this.should_forget_first=!0,void(this.is_chart_loading=!1);if(+t.proposal_open_contract.contract_id===this.contract_id){this.contract_info=t.proposal_open_contract,this.contract_update=t.proposal_open_contract.limit_order;var o=this.prev_indicative,i=+this.contract_info.bid_price;this.indicative_status=i>o?"profit":i<o?"loss":null,this.prev_indicative=i;var a=!!this.contract_info.is_forward_starting||(0,f.isForwardStarting)(this.contract_info.shortcode,this.contract_info.purchase_time);this.is_forward_starting=a,this.contract_store.populateConfig(this.contract_info);var s=this.contract_store.end_time;this.updateMargin((s||this.contract_info.date_expiry)-this.contract_info.date_start),s||(this.is_ongoing_contract=!0),s&&(this.is_ongoing_contract?this.is_static_chart=!1:this.is_static_chart=!0),this.contract_info.is_sold&&this.contract_store.cacheProposalOpenContractResponse(t)}}}},{key:"updateMargin",value:function(t){var e=this.contract_store.contract_config.granularity;this.margin=Math.floor(e?3*e:Math.max(300,30*t/3600||0))}},{key:"chartStateChange",value:function(t,e){var r=this;this.chart_state=t;switch(t){case"INITIAL":this.is_chart_scaling=!1,this.is_chart_loading||(this.is_chart_loading=!0);break;case"READY":setTimeout((0,A.action)((function(){return r.is_chart_scaling=!0})),10);break;case"SCROLL_TO_LEFT":setTimeout((0,A.action)((function(){r.is_chart_loading=!1})),20);break;case"MARKET_STATE_CHANGE":e&&"isClosed"in e&&(this.is_market_closed=e.isClosed)}}},{key:"onClickCancel",value:function(t){var e=this;t&&f.WS.cancelContract(t).then((function(t){t.error?e.root_store.common.setServicesError(Zr({type:t.msg_type},t.error)):e.root_store.notifications.addNotificationMessage(Yr())}))}},{key:"onClickSell",value:function(t){var e=this.contract_info.bid_price;t&&e&&(this.is_sell_requested=!0,f.WS.sell(t,e).then(this.handleSell))}},{key:"handleSell",value:function(t){t.error?(this.is_sell_requested=!1,this.root_store.common.setServicesError(Zr({type:t.msg_type},t.error))):!t.error&&t.sell&&(this.is_sell_requested=!1,this.sell_info={sell_price:t.sell.sold_for,transaction_id:t.sell.transaction_id},this.root_store.notifications.addNotificationMessage(Wr(this.root_store.client.currency,t.sell.sold_for)))}},{key:"removeErrorMessage",value:function(){this.error_message="",this.has_error=!1}}])&&Kr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ar),on={key:"switch_to_tick_chart",header:(0,h.localize)("This chart display is not ideal for tick contracts"),message:i.createElement(h.Localize,{i18n_default_text:"Please change the chart duration to tick for a better trading experience."}),type:"info"},an=r("./src/Stores/Modules/Contract/Helpers/contract-type.js"),sn=r("./src/Stores/Modules/Trading/Constants/contract.js");function cn(t){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(t)}function ln(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function un(t,e){return un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},un(t,e)}function fn(t,e){if(e&&("object"===cn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pn(t)}function pn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dn(t){return dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dn(t)}var hn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&un(t,e)}(o,t);var e,r,n=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=dn(t);if(e){var o=dn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return fn(this,r)}}(o);function o(t){var e,r=t.root_store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,{root_store:r})).contracts=[],e.contracts_map={},e.has_error=!1,e.error_message="",e.granularity=+f.LocalStore.get("contract_trade.granularity")||0,e.chart_type=f.LocalStore.get("contract_trade.chart_type")||"mountain",e.applicable_contracts=function(){var t=e.root_store.modules.trade,r=t.symbol,n=t.contract_type;if(!n||!r)return[];var o=(0,sn.r2)()[n].trade_types,i=(0,an.a)(n);return i&&(o=["CALLE","PUTE","CALL","PUT"]),e.contracts.filter((function(t){return t.contract_info.underlying===r})).filter((function(t){var e=t.contract_info;return!((0,f.isMultiplierContract)(e.contract_type)&&(0,f.isEnded)(t.contract_info))})).filter((function(t){var e=t.contract_info,r=-1!==o.indexOf(e.contract_type);return r&&e.barrier&&e.entry_tick&&i?"".concat(+e.entry_tick)==="".concat(+e.barrier)?"rise_fall"===n||"rise_fall_equal"===n:"high_low"===n:r}))},(0,A.makeObservable)(pn(e),{contracts:A.observable.shallow,has_error:A.observable,error_message:A.observable,granularity:A.observable,chart_type:A.observable,updateChartType:A.action.bound,updateGranularity:A.action.bound,markers_array:A.computed,addContract:A.action.bound,removeContract:A.action.bound,accountSwitchListener:A.action.bound,onUnmount:A.override,updateProposal:A.action.bound,last_contract:A.computed,clearError:A.action.bound,getContractById:A.action.bound}),e.onSwitchAccount(e.accountSwitchListener),e}return e=o,r=[{key:"updateChartType",value:function(t){f.LocalStore.set("contract_trade.chart_type",t),this.chart_type=t}},{key:"updateGranularity",value:function(t){0===t&&-1===["mountain","line","colored_line","spline","baseline"].indexOf(this.chart_type)&&(this.chart_type="mountain"),f.LocalStore.set("contract_trade.granularity",t),this.granularity=t,0===this.granularity&&this.root_store.notifications.removeNotificationMessage(on)}},{key:"markers_array",get:function(){var t=this.applicable_contracts().map((function(t){return t.marker})).filter((function(t){return t})).map((function(t){return(0,A.toJS)(t)}));return t.length&&(t[t.length-1].is_last_contract=!0),t}},{key:"addContract",value:function(t){var e=t.barrier,r=t.contract_id,n=t.contract_type,o=t.start_time,i=t.longcode,a=t.underlying,s=t.is_tick_contract,c=t.limit_order,l=void 0===c?{}:c;if(!this.contracts_map[r]){var u=new Hr(this.root_store,{contract_id:r});u.populateConfig({date_start:o,barrier:e,contract_type:n,longcode:i,underlying:a,limit_order:l}),this.contracts.push(u),this.contracts_map[r]=u,s&&!this.root_store.modules.trade.is_multiplier&&0!==this.granularity&&(0,f.isDesktop)()&&this.root_store.notifications.addNotificationMessage(on)}}},{key:"removeContract",value:function(t){var e=t.contract_id;this.contracts=this.contracts.filter((function(t){return t.contract_id!==e})),delete this.contracts_map[e]}},{key:"accountSwitchListener",value:function(){return this.has_error&&this.clearError(),Promise.resolve()}},{key:"onUnmount",value:function(){this.disposeSwitchAccount()}},{key:"updateProposal",value:function(t){if("error"in t)return this.has_error=!0,void(this.error_message=t.error.message);if(t.proposal_open_contract){var e=+t.proposal_open_contract.contract_id,r=this.contracts_map[e];r.populateConfig(t.proposal_open_contract),t.proposal_open_contract.is_sold&&(this.root_store.notifications.removeNotificationMessage(on),r.cacheProposalOpenContractResponse(t))}}},{key:"last_contract",get:function(){var t=this.applicable_contracts(),e=t.length;return e>0?t[e-1]:{}}},{key:"clearError",value:function(){this.error_message="",this.has_error=!1}},{key:"getContractById",value:function(t){return this.contracts_map[t]||this.root_store.modules.contract_replay.contract_store}}],r&&ln(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(Ar),_n=r("../../node_modules/lodash.throttle/index.js"),yn=r.n(_n),mn=r("../../node_modules/mobx-utils/mobx-utils.module.js"),vn=r("./src/Constants/index.js"),gn=function(t){return!!(0,vn.n2)()[t.contract_type]||!!t.is_forward_starting},bn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=parseFloat(t.buy_price),o=parseFloat(t.payout),i=(0,fe.rh)(e,(0,ye.cS)(t.shortcode).underlying),a=t.transaction_id||t.transaction_ids&&t.transaction_ids.buy;return{contract_info:t,details:t.longcode.replace(/\n/g,"<br />"),display_name:i,id:t.contract_id,indicative:isNaN(r)||!r?0:r,payout:o,purchase:n,reference:+a,type:t.contract_type,is_unsupported:gn(t),contract_update:t.limit_order}},wn=r("./src/Stores/Modules/Portfolio/Helpers/details.js");function xn(t){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(t)}function En(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Sn(){Sn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==xn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function On(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function kn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){On(i,n,o,a,s,"next",t)}function s(t){On(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Pn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pn(Object(r),!0).forEach((function(e){Ln(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ln(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Tn(t,e){return Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tn(t,e)}function An(t,e){if(e&&("object"===xn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Nn(t)}function Nn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dn(t){return Dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dn(t)}var In=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tn(t,e)}(s,t);var e,r,n,o,i,a=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Dn(t);if(e){var o=Dn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return An(this,r)}}(s);function s(t){var e,r=t.root_store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,{root_store:r})).positions=[],e.all_positions=[],e.positions_map={},e.is_loading=!1,e.error="",e.getPositionById=(0,mn.kq)((function(t){return e.positions.find((function(e){return+e.id==+t}))})),e.responseQueue=[],e.active_positions=[],e.deepClone=function(t){return JSON.parse(JSON.stringify(t))},e.proposalOpenContractQueueHandler=function(t){e.responseQueue.push(t),e.throttledUpdatePositions()},e.populateResultDetailsFromTransaction=function(t){var r=t.transaction,n=r.contract_id,o=r.amount,i=e.getPositionIndexById(n),a=e.positions[i];if(a){var s=jn(jn({},a.contract_info),{},{is_sold:1,is_expired:1,status:"complete"});a.contract_info=s,a.is_valid_to_sell=!1,a.result=o>s.buy_price?"won":"lost",a.status="complete",a.is_sold=1,a.is_loading=!1,s.exit_tick_time=s.date_expiry,s.sell_price=String(o),s.profit=o-s.buy_price,e.updatePositions()}},e.populateResultDetails=function(t){var r=t.proposal_open_contract,n=e.getPositionIndexById(r.contract_id);e.positions[n]&&(e.positions[n].contract_info=r,e.positions[n].duration=(0,wn.Cc)(r),e.positions[n].duration_unit=(0,wn.BX)((0,wn.H3)(r)),e.positions[n].exit_spot=r.exit_tick||r.current_spot,e.positions[n].is_valid_to_sell=(0,f.isValidToSell)(r),e.positions[n].result=(0,f.getDisplayStatus)(r),e.positions[n].profit_loss=+r.profit,e.positions[n].sell_time=(0,de.NQ)(r)||r.current_spot_time,e.positions[n].sell_price=r.sell_price,e.positions[n].status="complete",e.positions[n].contract_info.barrier&&e.positions[n].contract_info.entry_spot||(e.positions[n].contract_info.barrier=e.positions[n].barrier,e.positions[n].contract_info.entry_spot=e.positions[n].entry_spot),(0,f.isUserSold)(r)&&(e.positions[n].exit_spot="-"),e.positions[n].is_loading=!1)},e.updatePositions=function(){e.responseQueue.forEach((function(t){return e.proposalOpenContractHandler(t)})),e.responseQueue=[],e.setActivePositions()},e.throttledUpdatePositions=yn()(e.updatePositions,500),(0,A.makeObservable)(Nn(e),{positions:A.observable.shallow,all_positions:A.observable.shallow,is_loading:A.observable,error:A.observable,active_positions:A.observable.shallow,initializePortfolio:A.action.bound,clearTable:A.action.bound,portfolioHandler:A.action.bound,onBuyResponse:A.action.bound,transactionHandler:A.action.bound,proposalOpenContractHandler:A.action.bound,onClickCancel:A.action.bound,onClickSell:A.action.bound,handleSell:A.action.bound,populateResultDetailsFromTransaction:A.action.bound,populateResultDetails:A.action.bound,populateContractUpdate:A.action.bound,pushNewPosition:A.action.bound,removePositionById:A.action.bound,onHoverPosition:A.action.bound,logoutListener:A.action.bound,networkStatusChangeListener:A.action.bound,onMount:A.action.bound,onUnmount:A.override,totals:A.computed,setActivePositions:A.action.bound,is_active_empty:A.computed,active_positions_count:A.computed,is_empty:A.computed}),e}return e=s,r=[{key:"initializePortfolio",value:(i=kn(Sn().mark((function t(){return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.has_subscribed_to_poc_and_transaction&&this.clearTable(),this.is_loading=!0,t.next=4,f.WS.wait("authorize");case 4:f.WS.portfolio().then(this.portfolioHandler),f.WS.subscribeProposalOpenContract(null,this.proposalOpenContractQueueHandler),f.WS.subscribeTransaction(this.transactionHandler),this.has_subscribed_to_poc_and_transaction=!0;case 8:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"clearTable",value:function(){this.positions=[],this.positions_map={},this.is_loading=!1,this.error="",this.updatePositions(),this.has_subscribed_to_poc_and_transaction&&f.WS.forgetAll("proposal_open_contract","transaction"),this.has_subscribed_to_poc_and_transaction=!1}},{key:"portfolioHandler",value:function(t){var e=this;this.is_loading=!1,"error"in t?this.error=t.error.message:(this.error="",t.portfolio.contracts&&(this.positions=t.portfolio.contracts.map((function(t){return bn(t,e.root_store.modules.trade.active_symbols)})).sort((function(t,e){return e.reference-t.reference})),this.positions.forEach((function(t){e.positions_map[t.id]=t})),this.updatePositions()))}},{key:"onBuyResponse",value:function(t){var e={contract_id:t.contract_id,longcode:t.longcode,contract_type:t.contract_type};this.pushNewPosition(e)}},{key:"transactionHandler",value:(o=kn(Sn().mark((function t(e){var r,n,o,i,a,s,c=this;return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("error"in e&&(this.error=e.error.message),e.transaction){t.next=3;break}return t.abrupt("return");case 3:if(r=e.transaction,n=r.contract_id,o=r.action,i=r.longcode,"buy"!==o){t.next=8;break}this.onBuyResponse({contract_id:n,longcode:i,contract_type:""}),t.next=14;break;case 8:if("sell"!==o){t.next=14;break}if(a=this.getPositionIndexById(n),this.positions[a]){t.next=12;break}return t.abrupt("return");case 12:this.positions[a].is_loading=!0,s=f.WS.subscribeProposalOpenContract(n,(function(t){t.error?c.populateResultDetailsFromTransaction(e):(c.updateContractTradeStore(t),c.updateContractReplayStore(t),c.populateResultDetails(t)),s.unsubscribe()}));case 14:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"updateContractTradeStore",value:function(t){var e=this.root_store.modules.contract_trade,r=!(0,f.isEmptyObject)(t.proposal_open_contract),n=!!t.error;(r||n)&&r&&(e.addContract(this.deepClone(t.proposal_open_contract)),e.updateProposal(this.deepClone(t)))}},{key:"updateContractReplayStore",value:function(t){var e,r=this.root_store.modules.contract_replay;r.contract_id===(null===(e=t.proposal_open_contract)||void 0===e?void 0:e.contract_id)&&r.populateConfig(t)}},{key:"updateTradeStore",value:function(t,e,r){var n=this.root_store.modules.trade;r||n.setPurchaseSpotBarrier(t,e),n.updateLimitOrderBarriers(t,e)}},{key:"proposalOpenContractHandler",value:function(t){if("error"in t)return this.updateContractTradeStore(t),void this.updateContractReplayStore(t);var e=t.proposal_open_contract,r=this.positions_map[e.contract_id];if(r){this.updateContractTradeStore(t),this.updateContractReplayStore(t);var n=bn(e,this.root_store.modules.trade.active_symbols,r.indicative);Object.assign(r,n);var o=r.indicative,i=+e.bid_price,a=+e.profit;if(e.barrier&&(r.barrier=+e.barrier),e.entry_spot&&(r.entry_spot=+e.entry_spot),r.indicative=i,r.profit_loss=a,r.is_valid_to_sell=(0,f.isValidToSell)(e),r.contract_info=e,e.tick_count){var s=r.current_tick>(0,f.getCurrentTick)(e)?r.current_tick:(0,f.getCurrentTick)(e);r.current_tick=s}r.status=i>o?"profit":i<o?"loss":null,this.hovered_position_id===r.id&&(1===r.contract_info.is_sold?this.updateTradeStore(!1,r):this.updateTradeStore(!0,r,!0)),1===r.contract_info.is_sold&&this.populateResultDetails(t)}}},{key:"onClickCancel",value:function(t){var e=this,r=this.getPositionIndexById(t);this.positions[r].is_sell_requested||(this.positions[r].is_sell_requested=!0,t&&f.WS.cancelContract(t).then((function(t){t.error?e.root_store.common.setServicesError(jn({type:t.msg_type},t.error)):e.root_store.notifications.addNotificationMessage(Yr())})))}},{key:"onClickSell",value:function(t){var e=this.getPositionIndexById(t);if(!this.positions[e].is_sell_requested){var r=this.positions[e].contract_info.bid_price;this.positions[e].is_sell_requested=!0,t&&"number"==typeof r&&f.WS.sell(t,r).then(this.handleSell)}}},{key:"handleSell",value:function(t){if(t.error){var e=this.getPositionIndexById(t.echo_req.sell);this.positions[e].is_sell_requested=!1,"InvalidToken"!==t.error.code&&this.root_store.common.setServicesError(jn({type:t.msg_type},t.error))}else!t.error&&t.sell&&(this.root_store.modules.contract_trade.sell_info={sell_price:t.sell.sold_for,transaction_id:t.sell.transaction_id},this.root_store.notifications.addNotificationMessage(Wr(this.root_store.client.currency,t.sell.sold_for)))}},{key:"populateContractUpdate",value:function(t,e){var r=t.contract_update,n=this.getPositionById(e);n&&(Object.assign(n.contract_update||{},r),this.updatePositions())}},{key:"pushNewPosition",value:function(t){var e=bn(t,this.root_store.modules.trade.active_symbols);this.positions_map[e.id]||(this.positions.unshift(e),this.positions_map[e.id]=e,this.updatePositions())}},{key:"removePositionById",value:function(t){var e=this.getPositionIndexById(t);this.positions.splice(e,1),delete this.positions_map[t],this.updatePositions(),this.root_store.modules.contract_trade.removeContract({contract_id:t})}},{key:"accountSwitcherListener",value:(n=kn(Sn().mark((function t(){return Sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initializePortfolio();case 2:return t.abrupt("return",Promise.resolve());case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"onHoverPosition",value:function(t,e){var r=this.root_store.modules.trade.symbol;e.contract_info.underlying===r&&!(0,f.isEnded)(e.contract_info)&&(0,f.isMultiplierContract)(e.type)&&(this.hovered_position_id=t?e.id:null,this.updateTradeStore(t,e))}},{key:"preSwitchAccountListener",value:function(){return this.clearTable(),Promise.resolve()}},{key:"logoutListener",value:function(){return this.clearTable(),Promise.resolve()}},{key:"networkStatusChangeListener",value:function(t){this.is_loading=!t}},{key:"onMount",value:function(){var t=this;this.onPreSwitchAccount(this.preSwitchAccountListener),this.onSwitchAccount(this.accountSwitcherListener),this.onNetworkStatusChange(this.networkStatusChangeListener),this.onLogout(this.logoutListener),0!==this.positions.length||this.has_subscribed_to_poc_and_transaction||(this.root_store.client.is_logged_in?this.initializePortfolio():(0,A.reaction)((function(){return t.root_store.client.is_logged_in}),(function(){t.root_store.client.is_logged_in&&t.initializePortfolio()})))}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.clearTable()}},{key:"getPositionIndexById",value:function(t){return this.positions.findIndex((function(e){return+e.id==+t}))}},{key:"totals",get:function(){var t=0,e=0,r=0;return this.positions.forEach((function(n){t+=+n.indicative,e+=+n.payout,r+=+n.purchase})),{indicative:t,payout:e,purchase:r}}},{key:"setActivePositions",value:function(){this.active_positions=this.positions.filter((function(t){return!(0,de.NQ)(t.contract_info)})),this.all_positions=function(t){return function(t){if(Array.isArray(t))return En(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return En(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?En(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.positions)}},{key:"is_active_empty",get:function(){return!this.is_loading&&0===this.active_positions.length}},{key:"active_positions_count",get:function(){return this.active_positions.length||0}},{key:"is_empty",get:function(){return!this.is_loading&&0===this.all_positions.length}}],r&&Cn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(Ar),Mn=r("../../node_modules/lodash.debounce/index.js"),zn=r.n(Mn);function Rn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Un(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rn(Object(r),!0).forEach((function(e){Fn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Gn=function(t,e){var r=(0,f.toMoment)().startOf("day").unix();return e&&r>e?e:(0,f.epochToMoment)(r).add(1,"d").subtract(1,"s").unix()},Bn=function(t,e,r,n){return(0,f.toMoment)().startOf("day").unix()>n?r:t&&e?e:r},Hn=function(t,e,r,n){return(0,f.toMoment)().startOf("day").unix()>n?!!t||e:e?r||t:!!t||!1};const Wn=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Un(Un({},Hn(t,n,r,e)&&{date_from:Bn(n,r,t,e)}),(e||n)&&{date_to:Gn(0,e)})};function Yn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yn(Object(r),!0).forEach((function(e){qn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zn(t){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zn(t)}function Xn(t){return function(t){if(Array.isArray(t))return Jn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Jn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jn(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $n(){$n=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Zn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Kn(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Qn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Kn(i,n,o,a,s,"next",t)}function s(t){Kn(i,n,o,a,s,"throw",t)}a(void 0)}))}}function to(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function eo(t,e){return eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eo(t,e)}function ro(t,e){if(e&&("object"===Zn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return no(t)}function no(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oo(t){return oo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oo(t)}var io=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eo(t,e)}(a,t);var e,r,n,o,i=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=oo(t);if(e){var o=oo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ro(this,r)}}(a);function a(t){var e,r=t.root_store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,{root_store:r})).data=[],e.date_from=null,e.date_to=(0,f.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix(),e.error="",e.has_loaded_all=!1,e.is_loading=!1,e.filtered_date_range=void 0,e.client_loginid="",e.fetchOnScroll=zn()((function(t){t<1500&&e.fetchNextBatch()}),150),(0,A.makeObservable)(no(e),{data:A.observable,date_from:A.observable,date_to:A.observable,error:A.observable,has_loaded_all:A.observable,is_loading:A.observable,filtered_date_range:A.observable,client_loginid:A.observable,total_profit:A.computed,is_empty:A.computed,has_selected_date:A.computed,fetchNextBatch:A.action.bound,profitTableResponseHandler:A.action.bound,handleScroll:A.action.bound,networkStatusChangeListener:A.action.bound,onMount:A.action.bound,onUnmount:A.override,totals:A.computed,accountSwitcherListener:A.action.bound,clearTable:A.action.bound,clearDateFilter:A.action.bound,handleDateChange:A.action.bound}),e}return e=a,r=[{key:"total_profit",get:function(){return this.data.reduce((function(t,e){var r=Number(parseFloat(e.buy_price));return t+(Number(parseFloat(e.sell_price))-r)}),0)}},{key:"is_empty",get:function(){return!this.is_loading&&0===this.data.length}},{key:"has_selected_date",get:function(){return!(!this.date_from&&!this.date_to)}},{key:"shouldFetchNextBatch",value:function(){return!this.has_loaded_all&&!this.is_loading}},{key:"fetchNextBatch",value:(o=Qn($n().mark((function t(){var e;return $n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shouldFetchNextBatch()){t.next=2;break}return t.abrupt("return");case 2:return this.is_loading=!0,t.next=5,f.WS.profitTable(50,this.data.length,Wn(this.date_from,this.date_to,0,!1));case 5:e=t.sent,this.profitTableResponseHandler(e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"profitTableResponseHandler",value:function(t){var e=this;if("error"in t)this.error=t.error.message;else{var r=t.profit_table.transactions.map((function(t){return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n="DD MMM YYYY HH:mm:ss",o="".concat((0,f.toMoment)(+t.purchase_time).format(n)),i=t.purchase_time,a="".concat((0,f.toMoment)(+t.sell_time).format(n)),s=parseFloat(t.payout),c=parseFloat(t.sell_price),l=parseFloat(t.buy_price),u=(0,f.formatMoney)(e,Number(c-l),!0),p=(0,fe.rh)(r,(0,ye.cS)(t.shortcode).underlying);return Vn(Vn({},t),{payout:s,sell_price:c,buy_price:l,profit_loss:u,sell_time:a,purchase_time:o,display_name:p,purchase_time_unix:i})}(t,e.root_store.client.currency,e.root_store.modules.trade.active_symbols)}));this.data=[].concat(Xn(this.data),Xn(r)),this.has_loaded_all=r.length<50,this.is_loading=!1}}},{key:"handleScroll",value:function(t){var e=t.target,r=e.scrollTop,n=e.scrollHeight-(r+e.clientHeight);this.fetchOnScroll(n)}},{key:"networkStatusChangeListener",value:function(t){this.is_loading=!t}},{key:"onMount",value:(n=Qn($n().mark((function t(){return $n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.assertHasValidCache(this.client_loginid,this.clearDateFilter,f.WS.forgetAll.bind(null,"proposal")),this.client_loginid=this.root_store.client.loginid,this.onSwitchAccount(this.accountSwitcherListener),this.onNetworkStatusChange(this.networkStatusChangeListener),t.next=6,f.WS.wait("authorize");case 6:this.clearTable(),this.fetchNextBatch();case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),f.WS.forgetAll("proposal")}},{key:"totals",get:function(){var t=0;return this.data.forEach((function(e){t+=parseFloat(e.profit_loss.replace(/,/g,""))})),{profit_loss:t.toString()}}},{key:"accountSwitcherListener",value:function(){var t=this;return new Promise((function(e){return t.clearTable(),t.clearDateFilter(),e(t.fetchNextBatch())}))}},{key:"clearTable",value:function(){this.data=[],this.has_loaded_all=!1,this.is_loading=!1}},{key:"clearDateFilter",value:function(){this.date_from=null,this.date_to=(0,f.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix()}},{key:"handleDateChange",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.date_range;this.filtered_date_range=o,this.date_from=null!==(e=null==t?void 0:t.from)&&void 0!==e?e:t.is_batch?null:this.date_from,this.date_to=null!==(r=null==t?void 0:t.to)&&void 0!==r?r:this.date_to,this.clearTable(),this.fetchNextBatch()}}],r&&to(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ar);function ao(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function so(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ao(Object(r),!0).forEach((function(e){co(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ao(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function co(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lo(t){return lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lo(t)}function uo(t){return function(t){if(Array.isArray(t))return fo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return fo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fo(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function po(){po=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==lo(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function ho(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function _o(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ho(i,n,o,a,s,"next",t)}function s(t){ho(i,n,o,a,s,"throw",t)}a(void 0)}))}}function yo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mo(t,e){return mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mo(t,e)}function vo(t,e){if(e&&("object"===lo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return go(t)}function go(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bo(t){return bo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bo(t)}var wo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mo(t,e)}(s,t);var e,r,n,o,i,a=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=bo(t);if(e){var o=bo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return vo(this,r)}}(s);function s(t){var e,r=t.root_store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,{root_store:r})).data=[],e.is_loading=!1,e.has_loaded_all=!1,e.date_from=null,e.date_to=(0,f.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix(),e.error="",e.action_type="all",e.filtered_date_range=void 0,e.client_loginid="",e.account_statistics={},e.fetchOnScroll=zn()((function(t){t<1500&&e.fetchNextBatch()}),150),(0,A.makeObservable)(go(e),{data:A.observable,is_loading:A.observable,has_loaded_all:A.observable,date_from:A.observable,date_to:A.observable,error:A.observable,action_type:A.observable,filtered_date_range:A.observable,client_loginid:A.observable,account_statistics:A.observable,is_empty:A.computed,has_selected_date:A.computed,clearTable:A.action.bound,clearDateFilter:A.action.bound,fetchNextBatch:A.action.bound,statementHandler:A.action.bound,handleDateChange:A.action.bound,handleFilterChange:A.action.bound,handleScroll:A.action.bound,loadAccountStatistics:A.action.bound,accountSwitcherListener:A.action.bound,networkStatusChangeListener:A.action.bound,onMount:A.action.bound,onUnmount:A.override}),e}return e=s,r=[{key:"is_empty",get:function(){return!this.is_loading&&0===this.data.length}},{key:"has_selected_date",get:function(){return!(!this.date_from&&!this.date_to)}},{key:"clearTable",value:function(){this.data=[],this.has_loaded_all=!1,this.is_loading=!1}},{key:"clearDateFilter",value:function(){this.date_from=null,this.date_to=(0,f.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix(),this.partial_fetch_time=0}},{key:"shouldFetchNextBatch",value:function(t){if(!t&&(this.has_loaded_all||this.is_loading))return!1;var e=(0,f.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix();return!(this.date_to<e)||!t&&this.partial_fetch_time}},{key:"fetchNextBatch",value:(i=_o(po().mark((function t(){var e,r,n,o=arguments;return po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]&&o[0],this.shouldFetchNextBatch(e)){t.next=3;break}return t.abrupt("return");case 3:return this.is_loading=!0,r=Wn(this.date_from,this.date_to,this.partial_fetch_time,e),"all"!==this.action_type&&(r.action_type=this.action_type),t.next=8,f.WS.statement(100,e?void 0:this.data.length,r);case 8:n=t.sent,this.statementHandler(n,e);case 10:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"statementHandler",value:function(t,e){var r=this;if("error"in t)this.error=t.error.message;else{var n=t.statement.transactions.map((function(t){return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n="DD MMM YYYY HH:mm:ss",o=(0,f.toMoment)(t.transaction_time).format(n),i=parseFloat(t.payout),a=parseFloat(t.amount),s=parseFloat(t.balance_after),c=!0,l=["buy","sell"].includes(t.action_type)?t.shortcode:null,u=l?(0,fe.rh)(r,(0,ye.cS)(l).underlying):"";return so({action:(0,h.localize)((0,f.toTitleCase)(t.action_type)),date:o,display_name:u,refid:t.transaction_id,payout:isNaN(i)?"-":(0,f.formatMoney)(e,i,c),amount:isNaN(a)?"-":(0,f.formatMoney)(e,a,c),balance:isNaN(s)?"-":(0,f.formatMoney)(e,s,c),desc:t.longcode.replace(/\n/g,"<br />"),id:t.contract_id,app_id:t.app_id,shortcode:l,action_type:t.action_type,purchase_time:t.purchase_time,transaction_time:t.transaction_time},t.withdrawal_details&&{withdrawal_details:t.withdrawal_details,longcode:t.longcode})}(t,r.root_store.client.currency,r.root_store.modules.trade.active_symbols)}));this.data=e?[].concat(uo(n),uo(this.data)):[].concat(uo(this.data),uo(n)),this.has_loaded_all=!e&&n.length<100,this.is_loading=!1,n.length>0&&(this.partial_fetch_time=(0,f.toMoment)().unix())}}},{key:"handleDateChange",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.date_range;this.filtered_date_range=o,this.date_from=null!==(e=null==t?void 0:t.from)&&void 0!==e?e:t.is_batch?null:this.date_from,this.date_to=null!==(r=null==t?void 0:t.to)&&void 0!==r?r:this.date_to,this.clearTable(),this.fetchNextBatch()}},{key:"handleFilterChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action_type=t,this.clearTable(),this.fetchNextBatch()}},{key:"handleScroll",value:function(t){var e=t.target,r=e.scrollTop,n=e.scrollHeight-(r+e.clientHeight);this.fetchOnScroll(n)}},{key:"loadAccountStatistics",value:(o=_o(po().mark((function t(){var e,r,n=this;return po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.account_statistics={},!(e=this.root_store.client).standpoint.iom&&!e.standpoint.malta){t.next=8;break}return t.next=6,f.WS.accountStatistics();case 6:r=t.sent,(0,A.runInAction)((function(){r.error?n.account_statistics={}:n.account_statistics=r.account_statistics}));case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"accountSwitcherListener",value:function(){var t=this;return new Promise((function(e){return t.clearTable(),t.clearDateFilter(),t.loadAccountStatistics(),e(t.fetchNextBatch())}))}},{key:"networkStatusChangeListener",value:function(t){this.is_loading=!t}},{key:"onMount",value:(n=_o(po().mark((function t(){return po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.assertHasValidCache(this.client_loginid,this.clearDateFilter,this.clearTable,f.WS.forgetAll.bind(null,"proposal")),this.client_loginid=this.root_store.client.loginid,this.onSwitchAccount(this.accountSwitcherListener),this.onNetworkStatusChange(this.networkStatusChangeListener),t.next=6,f.WS.wait("authorize");case 6:this.fetchNextBatch(!0),this.loadAccountStatistics();case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),f.WS.forgetAll("proposal")}}],r&&yo(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),s}(Ar),xo=r("./src/_common/base/server_time.js"),Eo=r.n(xo);function So(t){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},So(t)}function Oo(){Oo=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==So(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function ko(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Po(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ko(Object(r),!0).forEach((function(e){jo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ko(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lo(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var Co=function(){var t,e=(t=Oo().mark((function t(e,r,n){return Oo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.WS.buy(Po({proposal_id:e,price:r},n&&{passthrough:n})));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Lo(i,n,o,a,s,"next",t)}function s(t){Lo(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}(),To=r("./src/Stores/Modules/Trading/Helpers/contract-type.js");function Ao(t){return Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ao(t)}function No(){No=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Ao(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Do(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var Io=function(){var t,e=(t=No().mark((function t(e){return No().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,To.Z.buildContractTypesConfig(e);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Do(i,n,o,a,s,"next",t)}function s(t){Do(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),Mo=r("./src/Stores/Modules/Trading/Helpers/start-date.js");function zo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ro(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ro(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ro(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Uo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Fo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Go=function(){return{stop_loss:{rules:[["req",{condition:function(t){return t.has_stop_loss&&!t.stop_loss},message:(0,h.localize)("Please enter a stop loss amount.")}]]},take_profit:{rules:[["req",{condition:function(t){return t.has_take_profit&&!t.take_profit},message:(0,h.localize)("Please enter a take profit amount.")}]]}}};var Bo=r("./src/Stores/Modules/Trading/Helpers/duration.js"),Ho=function(t){var e=t.contract_types_list,r=t.contract_type;return To.Z.getContractType(e,r)},Wo=function(t){return To.Z.getContractValues(t)};function Yo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Vo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vo(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qo(Object(r),!0).forEach((function(e){Xo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Jo=function(t){var e=(0,Bo.QJ)(t);return Zo({contract_expiry_type:e},t.contract_expiry_type!==e&&To.Z.getBarriers(t.contract_type,e))},$o=function(t){var e=(0,Bo.QJ)(t),r=t.duration,n=t.duration_min_max,o=t.duration_unit;return Zo({},Ko({contract_expiry_type:e,duration:r,duration_min_max:n,duration_unit:o}))},Ko=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.contract_expiry_type,r=t.duration,n=t.duration_min_max,o=t.duration_unit,i=(0,Bo.P7)(n,e,o),a=Yo(i,2),s=a[0],c=a[1];return r<s?{duration:s}:r>c?{duration:c}:{}};function Qo(t){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qo(t)}function ti(){ti=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Qo(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function ei(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ri(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ei(Object(r),!0).forEach((function(e){ni(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ei(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ni(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oi(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function ii(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){oi(i,n,o,a,s,"next",t)}function s(t){oi(i,n,o,a,s,"throw",t)}a(void 0)}))}}var ai=function(){var t=ii(ti().mark((function t(e){var r,n,o,i,a,s,c,l,u,f,p,d,h,_,y,m,v,g;return ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.contract_type,n=e.duration_unit,o=e.start_date,i=e.root_store.common.server_time,a=e.start_time,s=e.expiry_date,c=e.expiry_type,a=a||i.clone().add(6,"minute").format("HH:mm"),l=To.Z.getStartType(o),u=l.contract_start_type,f=To.Z.getSessions(r,o),p=f.sessions,d=To.Z.getStartTime(p,o,a),a=d.start_time,h=To.Z.getDurationUnitsList(r,u),_=h.duration_units_list,y=To.Z.getDurationUnit(n,r,u),m=To.Z.getExpiryType(_,c),c=m.expiry_type,v=To.Z.getExpiryDate(_,s,c,o),s=v.expiry_date,g=To.Z.getDurationMinMax(r,u),t.abrupt("return",ri(ri(ri(ri(ri(ri(ri(ri({},l),h),g),y),f),d),v),m));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),si=function(){var t=ii(ti().mark((function t(e){var r,n,o,i,a,s,c,l,u,f,p,d;return ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.start_time,n=e.expiry_date,o=e.expiry_type,i=e.expiry_time,a=e.start_date,s=e.symbol,c=e.sessions,t.next=3,To.Z.getTradingTimes(n,s);case 3:return l=t.sent,u={market_open_times:l.open},f={market_close_times:l.close},p=f.market_close_times,d=To.Z.getExpiryTime(n,i,o,p,c,a,r),t.abrupt("return",ri(ri(ri({},d),u),f));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function ci(t){return ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ci(t)}function li(t){return function(t){if(Array.isArray(t))return ui(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ui(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ui(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ui(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fi(){fi=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==ci(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function pi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function di(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pi(Object(r),!0).forEach((function(e){hi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _i(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function yi(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_i(i,n,o,a,s,"next",t)}function s(t){_i(i,n,o,a,s,"throw",t)}a(void 0)}))}}var mi=function(){var t=yi(fi().mark((function t(e,r){var n,o;return fi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getSnapshot(),o=0;case 2:if(!(o<r.length)){t.next=12;break}return t.t0=Object,t.t1=n,t.next=7,r[o](n);case 7:t.t2=t.sent,t.t0.assign.call(t.t0,t.t1,t.t2);case 9:o++,t.next=2;break;case 12:e.updateStore(di({},n));case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),vi=function(){var t=yi(fi().mark((function t(e,r){var n,o;return fi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=gi(e,r),t.next=3,mi(e,n);case 3:return o=bi(),t.next=6,mi(e,o);case 6:e.updateStore({is_trade_enabled:!0});case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),gi=function(t,e){return[To.Z.getContractCategories,Ho].concat(li(/\b(symbol|contract_type|is_equal)\b/.test(Object.keys(e))||!t.contract_type?[Wo]:[]),[ai,Jo],li(/\b(symbol|contract_type|is_equal)\b/.test(Object.keys(e))||!t.contract_type?[$o]:[]))},bi=function(){return[si]},wi=r("./src/Stores/Modules/Trading/Helpers/proposal.js"),xi=r("./src/Stores/Modules/Trading/Helpers/barrier.js");function Ei(t){return Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ei(t)}function Si(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Oi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Si(Object(r),!0).forEach((function(e){ki(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Si(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ki(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pi(){Pi=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Ei(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function ji(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Li(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ji(i,n,o,a,s,"next",t)}function s(t){ji(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Ci(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ti(t,e){return Ti=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ti(t,e)}function Ai(t,e){if(e&&("object"===Ei(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ni(t)}function Ni(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Di(t){return Di=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Di(t)}var Ii={},Mi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ti(t,e)}(b,t);var e,r,n,o,i,a,s,c,l,u,p,d,_,m,v,g=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Di(t);if(e){var o=Di(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ai(this,r)}}(b);function b(t){var e,r=t.root_store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),(e=g.call(this,{root_store:r,local_storage_properties:["amount","currency","barrier_1","barrier_2","basis","contract_start_type","contract_type","duration","duration_unit","expiry_date","expiry_type","has_take_profit","has_stop_loss","has_cancellation","is_equal","last_digit","multiplier","start_date","start_time","symbol","stop_loss","take_profit","is_trade_params_expanded"],store_name:"trade_store",validation_rules:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Uo(Object(r),!0).forEach((function(e){Fo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({amount:{rules:[["req",{message:(0,h.localize)("Amount is a required field.")}],["number",{min:0,type:"float"}]]},barrier_1:{rules:[["req",{condition:function(t){return t.barrier_count&&t.form_components.indexOf("barrier")>-1},message:(0,h.localize)("Barrier is a required field.")}],["barrier",{condition:function(t){return t.barrier_count}}],["custom",{func:function(t,e,r,n){return!(r.barrier_count>1)||+t>+n.barrier_2},message:(0,h.localize)("Higher barrier must be higher than lower barrier.")}],["custom",{func:function(t,e,r,n){return!/^[+-]/.test(n.barrier_1)||0!=+n.barrier_1},message:(0,h.localize)("Barrier cannot be zero.")}]],trigger:"barrier_2"},barrier_2:{rules:[["req",{condition:function(t){return t.barrier_count>1&&t.form_components.indexOf("barrier")>-1},message:(0,h.localize)("Barrier is a required field.")}],["barrier",{condition:function(t){return t.barrier_count}}],["custom",{func:function(t,e,r,n){return/^[+-]/g.test(n.barrier_1)&&/^[+-]/g.test(t)||/^(?![+-])/g.test(n.barrier_1)&&/^(?![+-])/g.test(t)},message:(0,h.localize)("Both barriers should be relative or absolute")}],["custom",{func:function(t,e,r,n){return+n.barrier_1>+t},message:(0,h.localize)("Lower barrier must be lower than higher barrier.")}]],trigger:"barrier_1"},duration:{rules:[["req",{message:(0,h.localize)("Duration is a required field.")}]]},start_date:{trigger:"start_time"},expiry_date:{trigger:"expiry_time"},start_time:{rules:[["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,f.isTimeValid)(t)},message:(0,h.localize)('Please enter the start time in the format "HH:MM".')}],["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,f.isHourValid)(t)},message:(0,h.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,f.isMinuteValid)(t)},message:(0,h.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(t,e,r){if("spot"===r.contract_start_type)return!0;if(!(0,f.isTimeValid)(t))return!1;var n=(0,f.toMoment)(r.start_date),o=n.clone(),i=zo(t.split(":"),2),a=i[0],s=i[1];return(0,Mo.Y)(r.sessions,o.hour(a).minute(s),n)},message:(0,h.localize)("Start time cannot be in the past.")}]]},expiry_time:{rules:[["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,f.isTimeValid)(t)},message:(0,h.localize)('Please enter the start time in the format "HH:MM".')}],["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,f.isHourValid)(t)},message:(0,h.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,f.isMinuteValid)(t)},message:(0,h.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(t,e,r){if("spot"===r.contract_start_type)return!0;if(!(0,f.isTimeValid)(t))return!1;var n=(0,f.toMoment)(r.start_date),o=n.clone(),i=zo(t.split(":"),2),a=i[0],s=i[1];return(0,Mo.Y)(r.sessions,o.hour(a).minute(s),n)},message:(0,h.localize)("Expiry time cannot be in the past.")}]]}},Go())})).is_trade_component_mounted=!1,e.is_purchase_enabled=!1,e.is_trade_enabled=!1,e.is_equal=0,e.has_equals_only=!1,e.symbol=void 0,e.is_market_closed=!1,e.previous_symbol="",e.active_symbols=[],e.form_components=[],e.contract_expiry_type="",e.contract_start_type="",e.contract_type="",e.contract_types_list={},e.trade_types={},e.amount=10,e.basis="",e.basis_list=[],e.currency="",e.duration=5,e.duration_unit="",e.duration_units_list=[],e.duration_min_max={},e.expiry_date="",e.expiry_time="",e.expiry_type="duration",e.barrier_1="",e.barrier_2="",e.barrier_count=0,e.main_barrier=null,e.barriers=[],e.start_date=Number(0),e.start_dates_list=[],e.start_time=null,e.sessions=[],e.market_open_times=[],e.market_close_times=[],e.last_digit=5,e.is_mobile_digit_view_selected=!1,e.proposal_info={},e.purchase_info={},e.is_chart_loading=void 0,e.should_show_active_symbols_loading=!1,e.multiplier=void 0,e.multiplier_range_list=[],e.stop_loss=void 0,e.take_profit=void 0,e.has_stop_loss=!1,e.has_take_profit=!1,e.has_cancellation=!1,e.commission=void 0,e.cancellation_price=void 0,e.stop_out=void 0,e.expiration=void 0,e.hovered_contract_type=void 0,e.cancellation_duration="60m",e.cancellation_range_list=[],e.is_trade_params_expanded=!0,e.addTickByProposal=function(){return null},e.debouncedProposal=zn()(e.requestProposal,500),e.proposal_requests={},e.is_purchasing_contract=!1,e.initial_barriers=void 0,e.is_initial_barrier_applied=!1,e.should_skip_prepost_lifecycle=!1,e.clearContracts=function(){e.root_store.modules.contract_trade.contracts=[]},e.setMainBarrier=function(t){if(t){var r=t.contract_type,n=t.barrier,o=t.high_barrier,i=t.low_barrier;if(lr(r)){var a=e.root_store.ui.is_dark_mode_on?sr:ar;e.main_barrier=new hr(n||o,i,e.onChartBarrierChange,{color:a})}else e.main_barrier=null}},e.onPurchase=zn()(e.processPurchase,300),e.disablePurchaseButtons=function(){var t=document.getElementsByClassName("trade-container__price-info"),e=document.getElementsByClassName("btn-purchase");[].forEach.bind(e,(function(t){t.classList.add("btn-purchase--disabled")}))(),[].forEach.bind(t,(function(t){t.classList.add("trade-container__price-info--fade")}))()},e.prev_chart_layout=null,e.wsSubscribe=function(t,e){if(1===t.subscribe){var r=JSON.stringify(t),n=f.WS.subscribeTicksHistory(t,e);Ii[r]=n}},e.wsForget=function(t){var e=JSON.stringify(t);Ii[e]&&(Ii[e].unsubscribe(),delete Ii[e])},e.wsForgetStream=function(t){f.WS.forgetStream(t)},e.wsSendRequest=function(t){return t.time?Eo().timePromise().then((function(t){return t?{msg_type:"time",time:t.unix()}:f.WS.time()})):t.active_symbols?f.WS.activeSymbols("brief"):t.trading_times?f.WS.tradingTimes(t.trading_times):f.WS.storage.send(t)},e.refToAddTick=function(t){e.addTickByProposal=t},(0,A.makeObservable)(Ni(e),{is_trade_component_mounted:A.observable,is_purchase_enabled:A.observable,is_trade_enabled:A.observable,is_equal:A.observable,has_equals_only:A.observable,symbol:A.observable,is_market_closed:A.observable,previous_symbol:A.observable,active_symbols:A.observable,form_components:A.observable,contract_expiry_type:A.observable,contract_start_type:A.observable,contract_type:A.observable,contract_types_list:A.observable,trade_types:A.observable,amount:A.observable,basis:A.observable,basis_list:A.observable,currency:A.observable,duration:A.observable,duration_unit:A.observable,duration_units_list:A.observable,duration_min_max:A.observable,expiry_date:A.observable,expiry_time:A.observable,expiry_type:A.observable,barrier_1:A.observable,barrier_2:A.observable,barrier_count:A.observable,main_barrier:A.observable,barriers:A.observable,start_date:A.observable,start_dates_list:A.observable,start_time:A.observable,sessions:A.observable,market_open_times:A.observable,market_close_times:A.observable,last_digit:A.observable,is_mobile_digit_view_selected:A.observable,proposal_info:A.observable.ref,purchase_info:A.observable.ref,is_chart_loading:A.observable,should_show_active_symbols_loading:A.observable,multiplier:A.observable,multiplier_range_list:A.observable,stop_loss:A.observable,take_profit:A.observable,has_stop_loss:A.observable,has_take_profit:A.observable,has_cancellation:A.observable,commission:A.observable,cancellation_price:A.observable,stop_out:A.observable,expiration:A.observable,hovered_contract_type:A.observable,cancellation_duration:A.observable,cancellation_range_list:A.observable,is_trade_params_expanded:A.observable,should_skip_prepost_lifecycle:A.observable,is_symbol_in_active_symbols:A.computed,setSkipPrePostLifecycle:A.action.bound,setTradeStatus:A.action.bound,refresh:A.action.bound,clearContracts:A.action.bound,loadActiveSymbols:A.action.bound,setDefaultSymbol:A.action.bound,setActiveSymbols:A.action.bound,setContractTypes:A.action.bound,prepareTradeStore:A.action.bound,onChangeMultiple:A.action.bound,onChange:A.action.bound,setPreviousSymbol:A.action.bound,setAllowEqual:A.action.bound,setIsTradeParamsExpanded:A.action.bound,resetPreviousSymbol:A.action.bound,updateBarrierColor:A.action.bound,onHoverPurchase:A.action.bound,setPurchaseSpotBarrier:A.action.bound,updateLimitOrderBarriers:A.action.bound,clearLimitOrderBarriers:A.action.bound,barrier_pipsize:A.computed,main_barrier_flattened:A.computed,barriers_flattened:A.computed,onPurchase:A.action.bound,processPurchase:A.action.bound,enablePurchase:A.action.bound,updateStore:A.action.bound,is_synthetics_available:A.computed,show_digits_stats:A.computed,setMobileDigitView:A.action.bound,pushPurchaseDataToGtm:A.action.bound,clearPurchaseInfo:A.action.bound,requestProposal:A.action.bound,forgetAllProposal:A.action.bound,setMarketStatus:A.action.bound,onProposalResponse:A.action.bound,onChartBarrierChange:A.action.bound,onAllowEqualsChange:A.action.bound,updateSymbol:A.action.bound,changeDurationValidationRules:A.action.bound,accountSwitcherListener:A.action.bound,preSwitchAccountListener:A.action.bound,logoutListener:A.action.bound,clientInitListener:A.action.bound,networkStatusChangeListener:A.action.bound,themeChangeListener:A.action.bound,resetErrorServices:A.action.bound,onMount:A.action.bound,manageMxMltRemovalNotification:A.action.bound,setChartStatus:A.action.bound,initAccountCurrency:A.action.bound,onUnmount:A.override,exportLayout:A.action.bound,chartStateChange:A.action.bound,has_alternative_source:A.computed,is_multiplier:A.computed,getFirstOpenMarket:A.action.bound}),(0,A.reaction)((function(){return[e.contract_expiry_type,e.duration_min_max,e.duration_unit,e.expiry_type]}),(function(){e.changeDurationValidationRules()})),(0,A.reaction)((function(){return e.is_equal}),(function(){e.onAllowEqualsChange()})),(0,A.reaction)((function(){return e.symbol}),(function(){var t=(0,Bo.I7)(e.symbol,e.expiry_type);t&&(e.expiry_date=t)})),(0,A.reaction)((function(){return e.duration_unit}),(function(){e.contract_expiry_type="t"===e.duration_unit?"tick":"intraday"})),(0,A.reaction)((function(){return[e.has_stop_loss,e.has_take_profit]}),(function(){e.has_stop_loss||(e.validation_errors.stop_loss=[]),e.has_take_profit||(e.validation_errors.take_profit=[])})),(0,A.reaction)((function(){return[e.contract_type]}),(function(){"multiplier"===e.contract_type?Object.assign(e.validation_rules,Go()):(delete e.validation_rules.stop_loss,delete e.validation_rules.take_profit)})),e}return e=b,r=[{key:"is_symbol_in_active_symbols",get:function(){var t=this;return this.active_symbols.some((function(e){return e.symbol===t.symbol&&1===e.exchange_is_open}))}},{key:"setSkipPrePostLifecycle",value:function(t){!!t!=!!this.should_skip_prepost_lifecycle&&(this.should_skip_prepost_lifecycle=t)}},{key:"setTradeStatus",value:function(t){this.is_trade_enabled=t}},{key:"refresh",value:function(){this.forgetAllProposal(),this.proposal_info={},this.purchase_info={},this.proposal_requests={}}},{key:"loadActiveSymbols",value:(v=Li(Pi().mark((function t(){var e,r,n,o,i,a=this,s=arguments;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=!(s.length>0&&void 0!==s[0])||s[0],n=!(s.length>1&&void 0!==s[1])||s[1],this.should_show_active_symbols_loading=n,t.next=5,this.setActiveSymbols();case 5:if(!r){t.next=8;break}return t.next=8,this.setDefaultSymbol();case 8:return t.next=10,f.WS.storage.contractsFor(this.symbol);case 10:if(o=t.sent,!["InvalidSymbol","InputValidationFailed"].includes(null===(e=o.error)||void 0===e?void 0:e.code)){t.next=17;break}return t.next=14,(0,fe.jt)(this.active_symbols);case 14:return i=t.sent,t.next=17,this.processNewValuesAsync({symbol:i});case 17:(0,A.runInAction)((function(){a.should_show_active_symbols_loading=!1}));case 18:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"setDefaultSymbol",value:(m=Li(Pi().mark((function t(){var e;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.is_symbol_in_active_symbols){t.next=7;break}return this.is_trade_enabled=!1,t.next=4,(0,fe.jt)(this.active_symbols);case 4:return e=t.sent,t.next=7,this.processNewValuesAsync({symbol:e});case 7:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"setActiveSymbols",value:(_=Li(Pi().mark((function t(){var e,r,n,o,i,a,s,c,l,u;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="maltainvest"===this.root_store.client.landing_company_shortcode,r=!!parseInt(localStorage.getItem("hide_close_mx_mlt_account_notification")),n=this.root_store.client.is_logged_in,o=this.root_store.client.clients_country,i=this.root_store.common.showError,a=this.root_store.common.setError,["be","im"].includes(o)&&!n&&(0,fe.c)(i,n),t.next=9,f.WS.authorized.activeSymbols();case 9:if(s=t.sent,c=s.active_symbols,!s.error){t.next=15;break}return i({message:(0,h.localize)("Trading is unavailable at this time.")}),t.abrupt("return");case 15:if(c&&c.length){t.next=37;break}return t.next=18,f.WS.wait("get_settings");case 18:if(l=this.root_store.client.can_have_mx_account,!(u=this.root_store.client.can_have_mlt_account)&&!l||!n||r){t.next=25;break}a(!0,{type:"mx_mlt_removal"}),t.next=37;break;case 25:if(!n||!r){t.next=29;break}(0,fe.xZ)(i,u,l),t.next=37;break;case 29:if(e){t.next=34;break}return r?(0,fe.c)(i,n):a(!0,{type:"mx_mlt_removal"}),t.abrupt("return");case 34:if(!e){t.next=37;break}return(0,f.showDigitalOptionsUnavailableError)(i,{text:(0,h.localize)("We’re working to have this available for you soon. If you have another account, switch to that account to continue trading. You may add a DMT5 Financial."),title:(0,h.localize)("{{platform_name_trader}} is not available for this account",{platform_name_trader:(0,f.getPlatformSettings)("trader").name}),link:(0,h.localize)("Go to {{platform_name_mt5}} dashboard",{platform_name_mt5:(0,f.getPlatformSettings)("mt5").name})}),t.abrupt("return");case 37:return t.next=39,this.processNewValuesAsync({active_symbols:c});case 39:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"setContractTypes",value:(d=Li(Pi().mark((function t(){var e=this;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.symbol||!this.is_symbol_in_active_symbols){t.next=4;break}return t.next=3,Io(this.symbol);case 3:(0,A.runInAction)((function(){var t=To.Z.getContractCategories();e.processNewValuesAsync(Oi(Oi({},t),To.Z.getContractType(t.contract_types_list,e.contract_type))),e.processNewValuesAsync(To.Z.getContractValues(e))}));case 4:this.root_store.common.setSelectedContractType(this.contract_type);case 5:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"prepareTradeStore",value:(p=Li(Pi().mark((function t(){var e,r=this,n=arguments;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(n.length>0&&void 0!==n[0])||n[0],this.initial_barriers={barrier_1:this.barrier_1,barrier_2:this.barrier_2},t.next=4,(0,A.when)((function(){return!r.root_store.client.is_populating_account_list}));case 4:return t.next=6,f.WS.wait("website_status");case 6:return t.next=8,(0,A.runInAction)(Li(Pi().mark((function t(){return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.processNewValuesAsync({currency:r.root_store.client.currency||r.root_store.client.default_currency},!0,null,!1);case 2:case"end":return t.stop()}}),t)}))));case 8:return t.next=10,this.loadActiveSymbols(e);case 10:return t.next=12,this.setContractTypes();case 12:return t.next=14,this.processNewValuesAsync({is_market_closed:(0,fe.pp)(this.active_symbols,this.symbol)},!0,null,!1);case 14:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"onChangeMultiple",value:(u=Li(Pi().mark((function t(e){var r=this;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.keys(e).forEach((function(t){if(!(t in r))throw new Error("Invalid Argument: ".concat(t))})),t.next=3,this.processNewValuesAsync(Oi({},e),!0);case 3:this.validateAllProperties();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"onChange",value:(l=Li(Pi().mark((function t(e){var r,n,o;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.target,n=r.name,o=r.value,"symbol"!==n||!o){t.next=7;break}this.setChartStatus(!0),this.setMarketStatus(!1),this.is_trade_enabled=!1,t.next=17;break;case 7:if("currency"!==n){t.next=11;break}this.root_store.client.is_logged_in||this.root_store.client.selectCurrency(o),t.next=17;break;case 11:if("expiry_date"!==n){t.next=15;break}this.expiry_time=null,t.next=17;break;case 15:if(n in this){t.next=17;break}throw new Error("Invalid Argument: ".concat(n));case 17:return t.next=19,this.processNewValuesAsync(ki({},n,o),!0,"contract_type"===n?{contract_type:this.contract_type}:{},!0);case 19:this.validateAllProperties(),this.root_store.common.setSelectedContractType(this.contract_type);case 21:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"setPreviousSymbol",value:function(t){this.previous_symbol!==t&&(this.previous_symbol=t)}},{key:"setAllowEqual",value:function(t){this.is_equal=t}},{key:"setIsTradeParamsExpanded",value:function(t){this.is_trade_params_expanded=t}},{key:"resetPreviousSymbol",value:(c=Li(Pi().mark((function t(){var e=this;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setMarketStatus((0,fe.pp)(this.active_symbols,this.previous_symbol)),t.next=3,Io(this.previous_symbol);case 3:return t.next=5,this.updateSymbol(this.symbol);case 5:this.setChartStatus(!1),(0,A.runInAction)((function(){e.previous_symbol=""}));case 7:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"updateBarrierColor",value:function(t){this.main_barrier&&this.main_barrier.updateBarrierColor(t)}},{key:"onHoverPurchase",value:function(t,e){this.is_purchase_enabled&&this.main_barrier&&!this.is_multiplier?this.main_barrier.updateBarrierShade(t,e):t||!this.main_barrier||this.is_multiplier||this.main_barrier.updateBarrierShade(!1,e),this.hovered_contract_type=t?e:null,yr({barriers:this.barriers,is_over:t,contract_type:e,contract_info:this.proposal_info[e]})}},{key:"setPurchaseSpotBarrier",value:function(t,e){var r="PURCHASE_SPOT_BARRIER";if(t){var n=this.barriers.find((function(t){return t.key===r}));n?n.high!==+e.contract_info.entry_spot&&n.onChange({high:e.contract_info.entry_spot}):((n=new hr(e.contract_info.entry_spot)).key=r,n.draggable=!1,n.hideOffscreenBarrier=!0,n.isSingleBarrier=!0,n.updateBarrierColor(this.root_store.ui.is_dark_mode_on),this.barriers.push(n))}else ur(this.barriers,r)}},{key:"updateLimitOrderBarriers",value:function(t,e){var r=e.contract_info,n=this.barriers;yr({barriers:n,contract_info:r,contract_type:r.contract_type,is_over:t})}},{key:"clearLimitOrderBarriers",value:function(){this.hovered_contract_type=null;var t=this.barriers;yr({barriers:t,is_over:!1})}},{key:"barrier_pipsize",get:function(){return(0,xi.l)(this.barrier_1)}},{key:"main_barrier_flattened",get:function(){return(0,y.A)(this.contract_type)?null:(0,A.toJS)(this.main_barrier)}},{key:"barriers_flattened",get:function(){return this.barriers&&(0,A.toJS)(this.barriers)}},{key:"processPurchase",value:function(t,e,r){var n=this;if(this.is_purchase_enabled&&t){this.is_purchase_enabled=!1,this.is_purchasing_contract=!0;var o="t"===this.duration_unit;Co(t,e).then((0,A.action)((function(e){if(!n.is_trade_component_mounted)return n.enablePurchase(),void(n.is_purchasing_contract=!1);var i,a,s=+n.last_digit;if(e.error)n.disablePurchaseButtons(),"InvalidToken"!==e.error.code&&(n.root_store.common.setServicesError(Oi({type:e.msg_type},e.error)),(0,f.isMobile)()&&"buy"===(null===(i=n.root_store.common)||void 0===i||null===(a=i.services_error)||void 0===a?void 0:a.type)&&setTimeout((function(){n.clearPurchaseInfo(),n.requestProposal()}),3500));else if(e.buy){if(n.proposal_info[r]&&n.proposal_info[r].id!==t)throw new Error("Proposal ID does not match.");var c=Oi(Oi(Oi({},n.proposal_requests[r]),n.proposal_info[r]),{},{buy_price:e.buy.buy_price}),l=e.buy,u=l.contract_id,p=l.longcode,d=l.start_time;if(u){var h=e.buy.shortcode,_=(0,f.extractInfoFromShortcode)(h),m=_.category,v=_.underlying,g=(0,y.H)(m.toUpperCase()),b=m.toUpperCase();return n.root_store.modules.contract_trade.addContract({contract_id:u,start_time:d,longcode:p,underlying:v,barrier:g?s:null,contract_type:b,is_tick_contract:o}),n.root_store.modules.portfolio.onBuyResponse({contract_id:u,longcode:p,contract_type:b}),((0,f.isDesktop)()||(0,f.isMobile)()&&n.is_multiplier)&&n.root_store.ui.openPositionsDrawer(),n.proposal_info={},n.forgetAllProposal(),n.purchase_info=e,n.proposal_requests={},n.debouncedProposal(),n.clearLimitOrderBarriers(),n.pushPurchaseDataToGtm(c),void(n.is_purchasing_contract=!1)}}n.forgetAllProposal(),n.purchase_info=e,n.enablePurchase(),n.is_purchasing_contract=!1})))}}},{key:"enablePurchase",value:function(){this.root_store.client.is_unwelcome||(this.is_purchase_enabled=!0)}},{key:"updateStore",value:function(t){var e=this;return Object.keys((0,f.cloneObject)(t)||{}).forEach((function(r){"root_store"===r||["validation_rules","validation_errors","currency"].indexOf(r)>-1||(JSON.stringify(e[r])===JSON.stringify(t[r])?delete t[r]:("symbol"===r&&(e.is_purchase_enabled=!1,e.is_trade_enabled=!1),t.start_date&&"string"==typeof t.start_date&&(t.start_date=parseInt(t.start_date)),e[r]=t[r],"barrier_2"===r&&t.barrier_1&&(e.barrier_1=t.barrier_1)))})),t}},{key:"processNewValuesAsync",value:(s=Li(Pi().mark((function t(){var e,r,n,o,i,a,s,c,l,u=arguments;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=u.length>0&&void 0!==u[0]?u[0]:{},r=u.length>1&&void 0!==u[1]&&u[1],n=u.length>2&&void 0!==u[2]?u[2]:{},o=!(u.length>3&&void 0!==u[3])||u[3],e.contract_type&&"rise_fall"===e.contract_type&&this.is_equal&&(e.contract_type="rise_fall_equal"),/\bduration\b/.test(Object.keys(e))&&"string"==typeof e.duration&&(e.duration=+e.duration),o&&(this.forgetAllProposal(),this.proposal_requests={}),r&&/\bcurrency\b/.test(Object.keys(e))&&(i=(null==n?void 0:n.currency)||this.currency,a=e.currency!==i,s=(0,f.isCryptocurrency)(e.currency)||(0,f.isCryptocurrency)(e.currency)!==(0,f.isCryptocurrency)(i),a&&s&&(e.amount=e.amount||(0,f.getMinPayout)(e.currency)),this.currency=e.currency),!Object.keys(e).includes("symbol")){t.next=14;break}return this.setPreviousSymbol(this.symbol),t.next=12,Io(e.symbol);case 12:this.setMarketStatus((0,fe.pp)(this.active_symbols,e.symbol)),c=To.Z.getContractCategories().has_only_forward_starting_contracts;case 14:if(this.root_store.ui.setHasOnlyForwardingContracts(c),!c){t.next=17;break}return t.abrupt("return");case 17:if(l=this.updateStore((0,f.cloneObject)(e)),!r&&!/\b(symbol|contract_types_list)\b/.test(Object.keys(l))){t.next=27;break}return this.updateStore({is_purchase_enabled:!1,proposal_info:{}}),e.contract_type&&this.root_store.ui.is_advanced_duration&&(0,y.A)(e.contract_type)&&(this.barrier_1="",this.barrier_2="",this.expiry_type="duration",this.root_store.ui.is_advanced_duration=!1),t.next=23,vi(this,l);case 23:this.updateStore(Oi({},this.is_initial_barrier_applied?{}:this.initial_barriers)),this.is_initial_barrier_applied=!0,/\bcontract_type\b/.test(Object.keys(l))&&this.validateAllProperties(),this.debouncedProposal();case 27:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"is_synthetics_available",get:function(){var t;return!(null===(t=this.active_symbols)||void 0===t||!t.find((function(t){return"synthetic_index"===t.market})))}},{key:"show_digits_stats",get:function(){return(0,y.A)(this.contract_type)}},{key:"setMobileDigitView",value:function(t){this.is_mobile_digit_view_selected=t}},{key:"pushPurchaseDataToGtm",value:function(t){var e={event:"buy_contract",bom_ui:"new",contract:{amount:t.amount,barrier1:t.barrier,barrier2:t.barrier2,basis:t.basis,buy_price:t.buy_price,contract_type:t.contract_type,currency:t.currency,date_expiry:t.date_expiry,date_start:t.date_start,duration:t.duration,duration_unit:t.duration_unit,payout:t.payout,symbol:t.symbol},settings:{theme:this.root_store.ui.is_dark_mode_on?"dark":"light",positions_drawer:this.root_store.ui.is_positions_drawer_on?"open":"closed",chart:{toolbar_position:this.root_store.ui.is_chart_layout_default?"bottom":"left",chart_asset_info:this.root_store.ui.is_chart_asset_info_visible?"visible":"hidden",chart_type:this.root_store.modules.contract_trade.chart_type,granularity:this.root_store.modules.contract_trade.granularity}}};this.root_store.gtm.pushDataLayer(e)}},{key:"clearPurchaseInfo",value:function(){this.purchase_info={},this.proposal_requests={},this.proposal_info={}}},{key:"requestProposal",value:function(){var t=this,e=(0,wi.RX)(this);if(Object.values(this.validation_errors).some((function(t){return t.length})))return this.proposal_info={},this.purchase_info={},void this.forgetAllProposal();(0,f.isEmptyObject)(e)||(this.proposal_requests=e,this.purchase_info={},Object.keys(this.proposal_requests).forEach((function(e){f.WS.subscribeProposal(t.proposal_requests[e],t.onProposalResponse)}))),this.root_store.ui.resetPurchaseStates()}},{key:"forgetAllProposal",value:function(){Object.keys(this.proposal_requests).length>0&&f.WS.forgetAll("proposal")}},{key:"setMarketStatus",value:function(t){this.is_market_closed=t}},{key:"onProposalResponse",value:function(t){var e,r=t.echo_req.contract_type,n=(0,f.getPropertyValue)(this.proposal_info,r)||{},o=(0,f.getPropertyValue)(n,"obj_contract_basis")||{},i=null===(e=t.proposal)||void 0===e?void 0:e.date_expiry;if(!t.error&&i&&this.is_crypto_multiplier&&(this.expiration=i),this.proposal_info=Oi(Oi({},this.proposal_info),{},ki({},r,(0,wi._N)(this,t,o))),this.is_multiplier&&this.proposal_info&&this.proposal_info.MULTUP){var a,s=this.proposal_info.MULTUP,c=s.commission,l=s.cancellation,u=s.limit_order;c&&(this.commission=c),l&&(this.cancellation_price=l.ask_price),this.stop_out=null==u||null===(a=u.stop_out)||void 0===a?void 0:a.order_amount}if(this.main_barrier&&"NONE_SINGLE"!==this.main_barrier.shade||this.setMainBarrier(t.echo_req),this.hovered_contract_type===r&&(this.addTickByProposal(t),yr({barriers:this.barriers,contract_info:this.proposal_info[this.hovered_contract_type],contract_type:r,is_over:!0})),t.error){var p=(0,wi.yr)(t);if(p&&this.setValidationErrorMessages(p,[t.error.message]),this.is_multiplier){var d=t.error,h=d.message,_=d.details,y=(h||"").match(/\((\d+\.*\d*)\)/);"stop_loss"===(null==_?void 0:_.field)&&null!=y&&y[1]&&(this.commission=y[1])}if("AlreadySubscribed"===t.error.code)return this.refresh(),void(this.is_trade_component_mounted&&this.debouncedProposal())}else this.validateAllProperties();this.is_purchasing_contract||this.enablePurchase()}},{key:"onChartBarrierChange",value:function(t,e){this.processNewValuesAsync({barrier_1:t,barrier_2:e},!0)}},{key:"onAllowEqualsChange",value:function(){this.processNewValuesAsync({contract_type:parseInt(this.is_equal)?"rise_fall_equal":"rise_fall"},!0)}},{key:"updateSymbol",value:function(t){t&&this.onChange({target:{name:"symbol",value:t}})}},{key:"changeDurationValidationRules",value:function(){if("endtime"!==this.expiry_type){if(this.validation_rules.duration){var t=this.validation_rules.duration.rules.findIndex((function(t){return"number"===t[0]})),e=this.duration_min_max[this.contract_expiry_type]||!1;if(e){var r={min:(0,Bo.ln)(+e.min,this.duration_unit),max:(0,Bo.ln)(+e.max,this.duration_unit)};t>-1?this.validation_rules.duration.rules[t][1]=r:this.validation_rules.duration.rules.push(["number",r]),this.validateProperty("duration",this.duration)}}}else this.validation_errors.duration=[]}},{key:"accountSwitcherListener",value:(a=Li(Pi().mark((function t(){var e=this;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadActiveSymbols(!0,!1);case 2:return this.resetErrorServices(),t.next=5,this.setContractTypes();case 5:return(0,A.runInAction)(Li(Pi().mark((function t(){return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.processNewValuesAsync({currency:e.root_store.client.currency||e.root_store.client.default_currency},!0,{currency:e.currency},!1);case 1:case"end":return t.stop()}}),t)})))),t.abrupt("return",Promise.resolve());case 7:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"preSwitchAccountListener",value:function(){return this.clearContracts(),this.is_trade_enabled=!1,Promise.resolve()}},{key:"logoutListener",value:(i=Li(Pi().mark((function t(){return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clearContracts(),this.refresh(),this.resetErrorServices(),t.next=5,this.loadActiveSymbols();case 5:return t.next=7,this.setContractTypes();case 7:this.debouncedProposal();case 8:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"clientInitListener",value:function(){return this.initAccountCurrency(this.root_store.client.currency||this.root_store.client.default_currency),Promise.resolve()}},{key:"networkStatusChangeListener",value:function(t){this.setTradeStatus(t)}},{key:"themeChangeListener",value:function(t){this.updateBarrierColor(t)}},{key:"resetErrorServices",value:function(){this.root_store.ui.toggleServicesErrorModal(!1)}},{key:"onMount",value:function(){var t=this;this.is_trade_component_mounted&&this.should_skip_prepost_lifecycle||(this.root_store.notifications.setShouldShowPopups(!1),this.onPreSwitchAccount(this.preSwitchAccountListener),this.onSwitchAccount(this.accountSwitcherListener),this.onLogout(this.logoutListener),this.onClientInit(this.clientInitListener),this.onNetworkStatusChange(this.networkStatusChangeListener),this.onThemeChange(this.themeChangeListener),this.setChartStatus(!0),(0,A.runInAction)(Li(Pi().mark((function e(){return Pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.is_trade_component_mounted=!0,e.next=3,t.prepareTradeStore();case 3:t.root_store.notifications.setShouldShowPopups(!0);case 4:case"end":return e.stop()}}),e)})))),this.manageMxMltRemovalNotification())}},{key:"manageMxMltRemovalNotification",value:function(){var t=this.root_store.notifications,e=t.addNotificationMessage,r=t.client_notifications,n=t.notification_messages,o=t.unmarkNotificationMessage,i=JSON.parse(localStorage.getItem("notification_messages")),a=this.root_store.client,s=a.has_iom_account,c=a.has_malta_account,l=a.is_logged_in;o({key:"close_mx_mlt_account"}),null!==i&&l&&(s||c)&&(0,A.when)((function(){return l&&0===n.length}),(function(){var t=1===parseInt(localStorage.getItem("hide_close_mx_mlt_account_notification"));(s||c)&&!t&&e(r.close_mx_mlt_account)}))}},{key:"setChartStatus",value:function(t){this.is_chart_loading=t}},{key:"initAccountCurrency",value:(o=Li(Pi().mark((function t(e){return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currency!==e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.processNewValuesAsync({currency:e},!0,{currency:this.currency},!1);case 4:this.refresh(),this.debouncedProposal();case 6:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"onUnmount",value:function(){this.should_skip_prepost_lifecycle||(this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.is_trade_component_mounted=!1,this.root_store.modules.contract_trade.onUnmount(),this.refresh(),this.resetErrorServices(),this.root_store.notifications.is_notifications_visible&&this.root_store.notifications.toggleNotificationsModal(),this.prev_chart_layout&&(this.prev_chart_layout.is_used=!1))}},{key:"chart_layout",get:function(){var t=null;return this.prev_chart_layout&&!1===this.prev_chart_layout.is_used&&(t=this.prev_chart_layout),t}},{key:"is_crypto_multiplier",get:function(){return"multiplier"===this.contract_type&&/^cry/.test(this.symbol)}},{key:"exportLayout",value:function(t){var e=this;delete t.previousMaxTicks,this.prev_chart_layout=t,this.prev_chart_layout.isDone=function(){e.prev_chart_layout.is_used=!0,e.setChartStatus(!1)}}},{key:"chartStateChange",value:function(t,e){"MARKET_STATE_CHANGE"===t&&e&&"isClosed"in e&&this.is_trade_component_mounted&&e.isClosed!==this.is_market_closed&&this.prepareTradeStore(!1)}},{key:"has_alternative_source",get:function(){return this.is_multiplier&&!!this.hovered_contract_type}},{key:"is_multiplier",get:function(){return"multiplier"===this.contract_type}},{key:"getFirstOpenMarket",value:(n=Li(Pi().mark((function t(e){var r,n,o;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(r=this.active_symbols)||void 0===r||!r.length){t.next=2;break}return t.abrupt("return",(0,fe.Uf)(this.active_symbols,e));case 2:return t.next=4,f.WS.authorized.activeSymbols();case 4:if(n=t.sent,o=n.active_symbols,!n.error){t.next=10;break}return this.root_store.common.showError({message:(0,h.localize)("Trading is unavailable at this time.")}),t.abrupt("return",void 0);case 10:return t.abrupt("return",(0,fe.Uf)(o,e));case 11:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}],r&&Ci(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),b}(Ar);function zi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ri=function(t,e,r){return e&&zi(t.prototype,e),r&&zi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cashier=r.modules.cashier,this.contract_replay=new nn({root_store:e}),this.contract_trade=new hn({root_store:e}),this.portfolio=new In({root_store:e}),this.profit_table=new io({root_store:e}),this.statement=new wo({root_store:e}),this.trade=new Mi({root_store:e})}));function Ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Fi,Gi=function(t,e,r){return e&&Ui(t.prototype,e),r&&Ui(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.client=e.client,this.common=e.common,this.modules=new Ri(this,e),this.ui=e.ui,this.gtm=e.gtm,this.rudderstack=e.rudderstack,this.pushwoosh=e.pushwoosh,this.notifications=e.notifications}));(0,A.configure)({enforceActions:"observed"});function Bi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Hi=s()({loader:function(){return r.e("trade-modals").then(r.bind(r,"./src/App/Containers/Modals/index.js"))},loading:function(){return null}}),Wi=function(t){var e=t.passthrough,r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Bi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bi(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.useState(function(t,e){return Fi||(Eo().init(t.common),(0,f.setWebsocket)(e),Fi=new Gi(t))}(e.root_store,e.WS)),1)[0];return i.useEffect((function(){return function(){return r.ui.setPromptHandler(!1)}}),[]),i.createElement(m.z1,{store:r},i.createElement(i.Fragment,null,i.createElement(le,null),i.createElement(Hi,null),i.createElement(Ie.S,null),i.createElement(Le,{store:r}),i.createElement(Te,null),i.createElement(De,{store:r})))};Wi.propTypes={passthrough:o().shape({root_store:o().object,WS:o().object})};const Yi=Wi},"./src/Constants/contract.js":(t,e,r)=>{"use strict";r.d(e,{FT:()=>p,NC:()=>f,gk:()=>c,h8:()=>d,lA:()=>l,n2:()=>u,ng:()=>h});var n=r("react"),o=r("@deriv/translations");function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=function(){return{APPLY:(0,o.localize)("Apply"),STAKE:(0,o.localize)("Stake:"),CLOSE:(0,o.localize)("Close"),CANCEL:(0,o.localize)("Cancel"),CURRENT_STAKE:(0,o.localize)("Current stake:"),DEAL_CANCEL_FEE:(0,o.localize)("Deal cancel. fee:"),TAKE_PROFIT:(0,o.localize)("Take profit:"),BUY_PRICE:(0,o.localize)("Buy price:"),STOP_LOSS:(0,o.localize)("Stop loss:"),TOTAL_PROFIT_LOSS:(0,o.localize)("Total profit/loss:"),PROFIT_LOSS:(0,o.localize)("Profit/Loss:"),POTENTIAL_PROFIT_LOSS:(0,o.localize)("Potential profit/loss:"),INDICATIVE_PRICE:(0,o.localize)("Indicative price:"),PAYOUT:(0,o.localize)("Sell price:"),PURCHASE_PRICE:(0,o.localize)("Buy price:"),POTENTIAL_PAYOUT:(0,o.localize)("Payout limit:"),TICK:(0,o.localize)("Tick "),WON:(0,o.localize)("Won"),LOST:(0,o.localize)("Lost"),DAYS:(0,o.localize)("days"),DAY:(0,o.localize)("day"),SELL:(0,o.localize)("Sell"),INCREMENT_VALUE:(0,o.localize)("Increment value"),DECREMENT_VALUE:(0,o.localize)("Decrement value"),TAKE_PROFIT_LOSS_NOT_AVAILABLE:(0,o.localize)("Take profit and/or stop loss are not available while deal cancellation is active."),DONT_SHOW_THIS_AGAIN:(0,o.localize)("Don't show this again"),RESALE_NOT_OFFERED:(0,o.localize)("Resale not offered"),NOT_AVAILABLE:(0,o.localize)("N/A")}},l=function(){return{FRXAUDCAD:(0,o.localize)("AUD/CAD"),FRXAUDCHF:(0,o.localize)("AUD/CHF"),FRXAUDJPY:(0,o.localize)("AUD/JPY"),FRXAUDNZD:(0,o.localize)("AUD/NZD"),FRXAUDPLN:(0,o.localize)("AUD/PLN"),FRXAUDUSD:(0,o.localize)("AUD/USD"),FRXBROUSD:(0,o.localize)("Oil/USD"),FRXEURAUD:(0,o.localize)("EUR/AUD"),FRXEURCAD:(0,o.localize)("EUR/CAD"),FRXEURCHF:(0,o.localize)("EUR/CHF"),FRXEURGBP:(0,o.localize)("EUR/GBP"),FRXEURJPY:(0,o.localize)("EUR/JPY"),FRXEURNZD:(0,o.localize)("EUR/NZD"),FRXEURUSD:(0,o.localize)("EUR/USD"),FRXGBPAUD:(0,o.localize)("GBP/AUD"),FRXGBPCAD:(0,o.localize)("GBP/CAD"),FRXGBPCHF:(0,o.localize)("GBP/CHF"),FRXGBPJPY:(0,o.localize)("GBP/JPY"),FRXGBPNOK:(0,o.localize)("GBP/NOK"),FRXGBPUSD:(0,o.localize)("GBP/USD"),FRXNZDJPY:(0,o.localize)("NZD/JPY"),FRXNZDUSD:(0,o.localize)("NZD/USD"),FRXUSDCAD:(0,o.localize)("USD/CAD"),FRXUSDCHF:(0,o.localize)("USD/CHF"),FRXUSDJPY:(0,o.localize)("USD/JPY"),FRXUSDNOK:(0,o.localize)("USD/NOK"),FRXUSDPLN:(0,o.localize)("USD/PLN"),FRXUSDSEK:(0,o.localize)("USD/SEK"),FRXXAGUSD:(0,o.localize)("Silver/USD"),FRXXAUUSD:(0,o.localize)("Gold/USD"),FRXXPDUSD:(0,o.localize)("Palladium/USD"),FRXXPTUSD:(0,o.localize)("Platinum/USD"),OTC_AEX:(0,o.localize)("Dutch Index"),OTC_AS51:(0,o.localize)("Australian Index"),OTC_DJI:(0,o.localize)("Wall Street Index"),OTC_FCHI:(0,o.localize)("French Index"),OTC_FTSE:(0,o.localize)("UK Index"),OTC_GDAXI:(0,o.localize)("German Index"),OTC_HSI:(0,o.localize)("Hong Kong Index"),OTC_IBEX35:(0,o.localize)("Spanish Index"),OTC_N225:(0,o.localize)("Japanese Index"),OTC_NDX:(0,o.localize)("US Tech Index"),OTC_SPC:(0,o.localize)("US Index"),OTC_SSMI:(0,o.localize)("Swiss Index"),OTC_SX5E:(0,o.localize)("Euro 50 Index"),R_10:(0,o.localize)("Volatility 10 Index"),R_25:(0,o.localize)("Volatility 25 Index"),R_50:(0,o.localize)("Volatility 50 Index"),R_75:(0,o.localize)("Volatility 75 Index"),R_100:(0,o.localize)("Volatility 100 Index"),BOOM300N:(0,o.localize)("Boom 300 Index"),BOOM500:(0,o.localize)("Boom 500 Index"),BOOM1000:(0,o.localize)("Boom 1000 Index"),CRASH300N:(0,o.localize)("Crash 300 Index"),CRASH500:(0,o.localize)("Crash 500 Index"),CRASH1000:(0,o.localize)("Crash 1000 Index"),RDBEAR:(0,o.localize)("Bear Market Index"),RDBULL:(0,o.localize)("Bull Market Index"),STPRNG:(0,o.localize)("Step Index"),WLDAUD:(0,o.localize)("AUD Basket"),WLDEUR:(0,o.localize)("EUR Basket"),WLDGBP:(0,o.localize)("GBP Basket"),WLDXAU:(0,o.localize)("Gold Basket"),WLDUSD:(0,o.localize)("USD Basket"),"1HZ10V":(0,o.localize)("Volatility 10 (1s) Index"),"1HZ100V":(0,o.localize)("Volatility 100 (1s) Index"),"1HZ200V":(0,o.localize)("Volatility 200 (1s) Index"),"1HZ300V":(0,o.localize)("Volatility 300 (1s) Index"),JD10:(0,o.localize)("Jump 10 Index"),JD25:(0,o.localize)("Jump 25 Index"),JD50:(0,o.localize)("Jump 50 Index"),JD75:(0,o.localize)("Jump 75 Index"),JD100:(0,o.localize)("Jump 100 Index"),JD150:(0,o.localize)("Jump 150 Index"),JD200:(0,o.localize)("Jump 200 Index"),CRYBCHUSD:(0,o.localize)("BCH/USD"),CRYBNBUSD:(0,o.localize)("BNB/USD"),CRYBTCLTC:(0,o.localize)("BTC/LTC"),CRYIOTUSD:(0,o.localize)("IOT/USD"),CRYNEOUSD:(0,o.localize)("NEO/USD"),CRYOMGUSD:(0,o.localize)("OMG/USD"),CRYTRXUSD:(0,o.localize)("TRX/USD"),CRYBTCETH:(0,o.localize)("BTC/ETH"),CRYZECUSD:(0,o.localize)("ZEC/USD"),CRYXMRUSD:(0,o.localize)("ZMR/USD"),CRYXMLUSD:(0,o.localize)("XLM/USD"),CRYXRPUSD:(0,o.localize)("XRP/USD"),CRYBTCUSD:(0,o.localize)("BTC/USD"),CRYDSHUSD:(0,o.localize)("DSH/USD"),CRYETHUSD:(0,o.localize)("ETH/USD"),CRYEOSUSD:(0,o.localize)("EOS/USD"),CRYLTCUSD:(0,o.localize)("LTC/USD")}},u=function(){return{EXPIRYMISS:{name:n.createElement(o.Localize,{i18n_default_text:"Ends Outside"}),position:"top"},EXPIRYRANGE:{name:n.createElement(o.Localize,{i18n_default_text:"Ends Between"}),position:"bottom"},RANGE:{name:n.createElement(o.Localize,{i18n_default_text:"Stays Between"}),position:"top"},UPORDOWN:{name:n.createElement(o.Localize,{i18n_default_text:"Goes Outside"}),position:"bottom"},RESETCALL:{name:n.createElement(o.Localize,{i18n_default_text:"Reset Call"}),position:"top"},RESETPUT:{name:n.createElement(o.Localize,{i18n_default_text:"Reset Put"}),position:"bottom"},TICKHIGH:{name:n.createElement(o.Localize,{i18n_default_text:"High Tick"}),position:"top"},TICKLOW:{name:n.createElement(o.Localize,{i18n_default_text:"Low Tick"}),position:"bottom"},ASIANU:{name:n.createElement(o.Localize,{i18n_default_text:"Asian Up"}),position:"top"},ASIAND:{name:n.createElement(o.Localize,{i18n_default_text:"Asian Down"}),position:"bottom"},LBFLOATCALL:{name:n.createElement(o.Localize,{i18n_default_text:"Close-to-Low"}),position:"top"},LBFLOATPUT:{name:n.createElement(o.Localize,{i18n_default_text:"High-to-Close"}),position:"top"},LBHIGHLOW:{name:n.createElement(o.Localize,{i18n_default_text:"High-to-Low"}),position:"top"},CALLSPREAD:{name:n.createElement(o.Localize,{i18n_default_text:"Spread Up"}),position:"top"},PUTSPREAD:{name:n.createElement(o.Localize,{i18n_default_text:"Spread Down"}),position:"bottom"},RUNHIGH:{name:n.createElement(o.Localize,{i18n_default_text:"Only Ups"}),position:"top"},RUNLOW:{name:n.createElement(o.Localize,{i18n_default_text:"Only Downs"}),position:"bottom"}}},f=function(t){return{CALL:{name:t?n.createElement(o.Localize,{i18n_default_text:"Higher"}):n.createElement(o.Localize,{i18n_default_text:"Rise"}),position:"top"},PUT:{name:t?n.createElement(o.Localize,{i18n_default_text:"Lower"}):n.createElement(o.Localize,{i18n_default_text:"Fall"}),position:"bottom"},CALLE:{name:n.createElement(o.Localize,{i18n_default_text:"Rise"}),position:"top"},PUTE:{name:n.createElement(o.Localize,{i18n_default_text:"Fall"}),position:"bottom"},DIGITMATCH:{name:n.createElement(o.Localize,{i18n_default_text:"Matches"}),position:"top"},DIGITDIFF:{name:n.createElement(o.Localize,{i18n_default_text:"Differs"}),position:"bottom"},DIGITEVEN:{name:n.createElement(o.Localize,{i18n_default_text:"Even"}),position:"top"},DIGITODD:{name:n.createElement(o.Localize,{i18n_default_text:"Odd"}),position:"bottom"},DIGITOVER:{name:n.createElement(o.Localize,{i18n_default_text:"Over"}),position:"top"},DIGITUNDER:{name:n.createElement(o.Localize,{i18n_default_text:"Under"}),position:"bottom"},ONETOUCH:{name:n.createElement(o.Localize,{i18n_default_text:"Touch"}),position:"top"},NOTOUCH:{name:n.createElement(o.Localize,{i18n_default_text:"No Touch"}),position:"bottom"},MULTUP:{name:n.createElement(o.Localize,{i18n_default_text:"Up"}),position:"top"},MULTDOWN:{name:n.createElement(o.Localize,{i18n_default_text:"Down"}),position:"bottom"}}},p=function(t){return a(a({},f(t)),u())},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return p(e)[t]?p(e)[t.toUpperCase()].name:""},h=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return p(e)[t]?p(e)[t.toUpperCase()].position:"top"}},"./src/Constants/index.js":(t,e,r)=>{"use strict";r.d(e,{FT:()=>n.FT,NC:()=>n.NC,lA:()=>n.lA,n2:()=>n.n2});var n=r("./src/Constants/contract.js")},"./src/Modules/Contract/Components/Digits/index.js":(t,e,r)=>{"use strict";r.d(e,{Z:()=>U});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("../../node_modules/prop-types/index.js"),a=r.n(i),s=r("react"),c=r("mobx"),l=r("@deriv/components"),u=r("@deriv/shared"),f=r("@deriv/translations"),p=r("./src/Stores/Modules/Contract/Helpers/logic.js"),d=r("./src/App/Components/Animations/index.js"),h=r("./src/Constants/index.js"),_=function(t){var e=t.current_spot,r=t.is_selected_winning,n=t.is_lost,i=t.is_won;return s.createElement(s.Fragment,null,s.createElement(l.Text,{size:"xs",align:"center",weight:"bold",className:"digits__digit-spot-value"},e.slice(0,-1)),s.createElement("span",{className:o()("digits__digit-spot-last",{"digits__digit-spot-last--selected-win":r,"digits__digit-spot-last--win":i,"digits__digit-spot-last--loss":n})},e.slice(-1)))};_.propTypes={current_spot:a().string,is_lost:a().bool,is_won:a().bool};const y=_;var m=r("mobx-react"),v=function(t){var e=t.is_latest,r=t.is_lost,n=t.is_selected,i=t.is_won,a=t.percentage,c=t.value,l=a&&!isNaN(a)?parseFloat(a).toFixed(1):null;return s.createElement(s.Fragment,null,s.createElement("span",{className:o()("digits__digit-value",{"digits__digit-value--latest":e,"digits__digit-value--selected":n,"digits__digit-value--win":i&&e,"digits__digit-value--loss":r&&e})},s.createElement("i",{className:o()("digits__digit-display-value",{"digits__digit-display-value--no-stats":!l})},c),!!l&&s.createElement("i",{className:"digits__digit-display-percentage"},l,"%")))};v.propTypes={is_latest:a().bool,is_lost:a().bool,is_selected:a().bool,is_trade_page:a().bool,is_won:a().bool,value:a().number};const g=v;var b=function(t){var e=t.is_max,r=t.is_min,n=t.is_selected,i=t.percentage,a=(i-10)/4;a=((a=Math.min(Math.max(a,-1),1))+1)/2*.85+.15;var c=339.292,l=(20*i-102)/3/100;return l=Math.max(Math.min(l,.66),.06),s.createElement("div",{className:o()("digits__pie-container",{"digits__pie-container--selected":n})},s.createElement("svg",{className:"digits__pie-progress",width:"120",height:"120",viewBox:"0 0 120 120"},s.createElement("circle",{className:"progress__bg",cx:"60",cy:"60",r:"54",fill:"none",stroke:"#E8EEFC",strokeWidth:"12"}),i&&s.createElement("circle",{className:o()("progress__value",{"progress__value--is-max":e,"progress__value--is-min":r}),cx:"60",cy:"60",r:"54",fill:"none",strokeOpacity:e||r?1:a,strokeWidth:"12",strokeDasharray:[c*l,c*(1-l)],strokeDashoffset:c*((l+1)/2)})))};b.propTypes={is_max:a().bool,is_min:a().bool,percentage:a().number};const w=b;var x=function(t){var e=t.barrier,r=t.is_digit_contract,n=t.has_entry_spot,i=t.is_lost,a=t.is_max,c=t.is_min,f=t.is_won,p=t.onSelect,h=t.latest_digit,_=t.selected_digit,m=t.status,v=t.stats,b=t.value,x=t.onLastDigitSpot,E=h.digit,S=h.spot,O=b===E,k=b===e,P=E===e,j=v?100*v/1e3:null;s.useEffect((function(){x&&x({spot:S,is_lost:i,is_selected_winning:P,is_latest:O,is_won:f})}),[h,S,e,b,i,P,O,f,x]);var L=(0,u.isMobile)()&&"function"==typeof p&&!m,C=(0,u.isMobile)()&&b===_&&!m;return s.createElement("div",{className:o()("digits__digit",{"digits__digit--latest":O,"digits__digit--win":f&&O,"digits__digit--loss":i&&O,"digits__digit--is-selectable":L,"digits__digit--is-selected":C}),onClick:function(){L&&p(b)}},s.createElement(w,{is_min:c,is_max:a,is_selected:k,percentage:j}),s.createElement(l.DesktopWrapper,null,s.createElement(d.s,{is_visible:!!(r&&O&&S&&m&&n),className:"digits__digit-spot",keyname:"digits__digit-spot"},s.createElement(y,{current_spot:S,is_lost:i,is_selected_winning:P,is_visible:!(!O||!S),is_won:f}))),s.createElement(g,{is_latest:O,is_lost:i,is_selected:k,is_won:f,percentage:j,value:b}))};x.propTypes={barrier:a().number,has_entry_spot:a().bool,is_lost:a().bool,is_won:a().bool,latest_digit:a().object,value:a().number};const E=(0,m.observer)(x);var S=function(t){var e=t.is_lost,r=t.is_trade_page,n=t.is_won,i=t.position;return s.createElement(s.Fragment,null,!!i&&s.createElement("span",{className:"digits__pointer",style:{transform:"translate3d(calc(".concat(i.left,"px), ").concat(i.top,"px, 0px)")}},s.createElement(l.Icon,{icon:"IcProfit",className:o()("digits__icon",{"digits__icon--win":n&&!r,"digits__icon--loss":e&&!r}),color:n?"green":"red",custom_color:n||e?void 0:"var(--brand-orange)"})))};S.propTypes={is_lost:a().bool,is_won:a().bool,position:a().object};const O=S;function k(t){return function(t){if(Array.isArray(t))return L(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||j(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||j(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){if(t){if("string"==typeof t)return L(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var C=Array.from(Array(10).keys()),T=function(t){var e=t.barrier,r=t.contract_type,n=t.digits,i=t.digits_info,a=t.dimension,c=t.is_digit_contract,l=t.has_entry_spot,f=t.is_ended,p=t.is_trade_page,d=t.onDigitChange,h=t.onLastDigitSpot,_=t.selected_digit,y=t.status,m=t.tick,v=t.trade_type,g=P(s.useState({0:{left:6,top:0},1:{left:6+1*a,top:0},2:{left:6+2*a,top:0},3:{left:6+3*a,top:0},4:{left:6+4*a,top:0},5:{left:6+5*a,top:0},6:{left:6+6*a,top:0},7:{left:6+7*a,top:0},8:{left:6+8*a,top:0},9:{left:6+9*a,top:0}}),1)[0],b=P(s.useState({0:{left:6,top:-60},1:{left:6+1*a,top:-60},2:{left:6+2*a,top:-60},3:{left:6+3*a,top:-60},4:{left:6+4*a,top:-60},5:{left:6+0*a,top:8},6:{left:6+1*a,top:8},7:{left:6+2*a,top:8},8:{left:6+3*a,top:8},9:{left:6+4*a,top:8}}),1)[0],w=function(t){S()&&t!==_&&"function"==typeof d&&d({target:{name:"last_digit",value:t}})},x=function(){return(0,u.isMobile)()?b:g},S=function(){return!!(0,u.isMobile)()&&"even_odd"!==v},j=Object.keys(i).sort().map((function(t){return i[t]})).slice(-1)[0]||{},L=f&&"won"===y&&c,T=f&&"lost"===y&&c,A=n?Math.min.apply(Math,k(n)):null,N=n?Math.max.apply(Math,k(n)):null,D=m?+m.pip_size:null,I=m&&m.ask?m.ask.toFixed(D):null,M=I?+I.split("").pop():null,z=m?x()[M]:x()[j.digit],R=L||T?j:{digit:M,spot:I};return s.createElement("div",{className:o()("digits",{"digits--trade":p})},C.map((function(t){return s.createElement(E,{barrier:(o=t,i={DIGITMATCH:function(t){return t===e},DIGITDIFF:function(t){return t!==e&&!isNaN(e)},DIGITOVER:function(t){return t>e},DIGITUNDER:function(t){return t<e},DIGITODD:function(t){return t%2},DIGITEVEN:function(t){return!(t%2)}},r&&i[r]&&i[r](o)?o:null),has_entry_spot:l,is_digit_contract:c,is_lost:T,is_trade_page:p,is_won:L,key:t,is_max:n?n[t]===N:null,is_min:n?n[t]===A:null,stats:n?n[t]:null,status:y,latest_digit:p?R:j,value:t,onLastDigitSpot:h,onSelect:S()?w:null,selected_digit:!!S()&&_});var o,i})),s.createElement(O,{is_lost:T,is_trade_page:p,is_won:L,position:z}))};T.propTypes={barrier:a().number,contract_type:a().string,digits_info:a().object,is_ended:a().bool,status:a().string,trade_type:a().string,onDigitChange:a().func,selected_digit:a().number};const A=(0,m.observer)(T);var N=["contract_info","digits_array","digits_info","display_status","is_digit_contract","is_ended","is_trade_page","onDigitChange","selected_digit","trade_type","onChangeStatus"];function D(){return D=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},D.apply(this,arguments)}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return M(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var z=function(t){var e=t.contract_info,r=t.digits_array,n=t.digits_info,o=t.display_status,i=t.is_digit_contract,a=t.is_ended,l=t.is_trade_page,f=t.onDigitChange,d=t.selected_digit,h=t.trade_type,_=t.onChangeStatus,y=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,N),m=e.date_start,v=y.tick,g=!l||!!v,b=!!l&&(0,p.xF)(e,v),w=!b&&g?o:null;if(m&&!b){v=null;var x=e.tick_stream;if(x&&x.length){var E=(0,c.toJS)(x.slice(-1)[0]);v={ask:E.tick,bid:E.tick,epoch:E.epoch,pip_size:E.tick_display_value.split(".")[1].length,current_tick:x.length}}}return s.useEffect((function(){_&&_({status:w,current_tick:v?v.current_tick:null})}),[v,l,o,_,w]),s.createElement(A,{dimension:(0,u.isMobile)()?64:52,has_entry_spot:!!e.entry_tick,barrier:!b&&g?+e.barrier:null,contract_type:!b&&g?e.contract_type:null,digits:r,digits_info:!b&&g?n:{},is_digit_contract:i,is_ended:a,is_trade_page:l,status:w,tick:v,trade_type:h,onDigitChange:f,selected_digit:d,onLastDigitSpot:y.onLastDigitSpot})},R=s.memo((function(t){var e,r=I(s.useState(),2),n=r[0],i=r[1],a=I(s.useState(),2),c=a[0],p=a[1],_=I(s.useState(),2),m=_[0],v=_[1],g=I(s.useState(),2),b=g[0],w=g[1],x=I(s.useState(),2),E=x[0],S=x[1],O=I(s.useState(),2),k=O[0],P=O[1],j=I(s.useState(),2),L=j[0],C=j[1],T=(0,u.useIsMounted)(),A=t.contract_info,N=t.digits_array,M=t.is_digit_contract,R=t.is_trade_page,U=t.underlying;return s.createElement(s.Fragment,null,s.createElement(l.DesktopWrapper,null,s.createElement(d.o,{is_visible:(N||M)&&T(),className:"digits__container",keyname:"digits",type:"bottom"},R&&s.createElement("div",{className:"digits__tooltip-container"},s.createElement(l.Popover,{alignment:"top",classNameBubble:"digits__tooltip-bubble",icon:"info",id:"dt_last_digits_info_tooltip",margin:4,message:(e=R?U:A.underlying,(0,f.localize)("Last digit stats for latest 1000 ticks for {{underlying_name}}",{underlying_name:(0,h.lA)()[e.toUpperCase()]}))})),s.createElement(z,t))),s.createElement(l.MobileWrapper,null,s.createElement("div",{className:"digits__container"},s.createElement(d.s,{is_visible:!!(M&&n&&m&&A.entry_tick),className:o()("digits__digit-spot",{"digits__digit-spot--is-trading":R}),keyname:"digits__digit-spot"},R&&s.createElement(l.Text,{size:"xs",align:"center",className:"digits__digit-spot-value"},s.createElement(f.Localize,{i18n_default_text:"Tick {{current_tick}} - ",values:{current_tick:c}})),s.createElement(y,{current_spot:m,is_lost:L,is_selected_winning:b,is_visible:!(!E||!m),is_won:k})),s.createElement(z,D({},t,{onChangeStatus:function(t){i(t.status),p(t.current_tick)},onLastDigitSpot:function(t){v(t.spot),C(t.is_lost),w(t.is_selected_winning),S(t.is_latest),P(t.is_won)}})))))}));R.displayName="Digits",R.propTypes={contract_info:a().object,digits_info:a().object,display_status:a().string,is_digit_contract:a().bool,is_ended:a().bool,is_trade_page:a().bool,trade_type:a().string,onDigitChange:a().func,selected_digit:a().number};const U=R},"./src/Modules/Page404/index.js":(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>s});var n=r("react"),o=r("@deriv/components"),i=r("@deriv/shared"),a=r("@deriv/translations");const s=function(){return n.createElement(o.PageError,{header:(0,a.localize)("We couldn’t find that page"),messages:[(0,a.localize)("You may have followed a broken link, or the page has moved to a new address."),(0,a.localize)("Error code: {{error_code}} page not found",{error_code:404})],redirect_urls:[i.routes.trade],redirect_labels:[(0,a.localize)("Return to trade")],classNameImage:"page-404__image",image_url:(0,i.getUrlBase)("/public/images/common/404.png")})}},"./src/Modules/Reports/Helpers/market-underlying.js":(t,e,r)=>{"use strict";r.d(e,{cS:()=>i,lA:()=>a,ti:()=>s,yu:()=>c});var n=r("./src/Constants/index.js"),o=r("@deriv/translations"),i=function(t){var e={category:"",underlying:""},r=new RegExp("^([A-Z]+)_((1HZ[0-9-V]+)|((CRASH|BOOM)[0-9\\d]+[A-Z]?)|(OTC_[A-Z0-9]+)|R_[\\d]{2,3}|[A-Z]+)").exec(t);return null!==r&&(e.category=r[1].toLowerCase(),e.underlying=r[2]),e},a=function(t){return t?(0,n.lA)()[t.toUpperCase()]:null},s=function(t){return t?(0,n.FT)()[t.toUpperCase()].name:null},c=function(t,e){if(/^MULTUP|MULTDOWN/.test(e))return"";var r=new RegExp("ticks|tick|seconds|minutes|minute|hour|hours").exec(t);if(null!==r){var n=r[0],i=n[0].toUpperCase()+n.slice(1);return i.endsWith("s")?i:"".concat(i,"s")}return(0,o.localize)("Days")}},"./src/Modules/SmartChart/Components/bottom-widgets.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=function(t){var e=t.Digits;return i.createElement("div",{className:"bottom-widgets"},e)};a.propTypes={Digits:o().node};const s=a},"./src/Modules/SmartChart/Components/top-widgets.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>_});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r("react-dom"),s=r.n(a),c=r("@deriv/components"),l=r("@deriv/translations"),u=r("@deriv/shared"),f=r("./src/Stores/connect.js"),p=r("./src/Modules/SmartChart/index.js"),d=(0,f.$j)((function(t){var e=t.modules;return{granularity:e.contract_trade.granularity,markers_array:e.contract_trade.markers_array}}))((function(t){var e=t.markers_array,r=t.granularity,n=e[e.length-1];if(!n||!n.contract_info.tick_stream)return null;if((0,u.isEnded)(n.contract_info)||0!==r)return null;var o=n.contract_info,a=o.contract_type,s=o.tick_stream,f=o.tick_count,p=(0,u.isDigitContract)(a)?s.length:Math.max(s.length-1,0);return i.createElement(c.Text,{weight:"bold",className:"recent-trade-info"},(0,l.localize)("Tick")," ",p,"/",f)})),h=function(t){var e=t.InfoBox,r=t.is_mobile,n=t.is_title_enabled,o=void 0===n||n,a=t.onSymbolChange,l=t.y_axis_width,u=t.theme,f=t.open_market,h=t.open,_=t.is_digits_widget_active,y=i.createElement(p.oP,{open_market:f,open:h,enabled:o,onChange:a,searchInputClassName:"data-hj-whitelist",isNestedList:r,portalNodeId:r?"deriv_app":void 0}),m=s().createPortal(i.createElement("div",{className:"smartcharts-".concat(u)},i.createElement("div",{className:"top-widgets-portal",style:{width:"calc(100% - ".concat(l?l+5:0,"px)")}},y,!_&&i.createElement(d,null))),document.getElementById("app_contents"));return i.createElement(i.Fragment,null,e,i.createElement(c.MobileWrapper,null,m),i.createElement(c.DesktopWrapper,null,y))};h.propTypes={InfoBox:o().node,is_mobile:o().bool,is_title_enabled:o().bool,onSymbolChange:o().func};const _=h},"./src/Modules/SmartChart/index.js":(t,e,r)=>{"use strict";r.d(e,{If:()=>y,KW:()=>_,NU:()=>u,Xb:()=>s,as:()=>p,av:()=>h,kO:()=>d,mB:()=>f,oP:()=>c,oY:()=>l});var n=r("react"),o=r("@deriv/shared"),i=(0,o.moduleLoader)((function(){return Promise.resolve().then(r.t.bind(r,"@deriv/deriv-charts",23))}));i.then((function(t){(0,t.setSmartChartsPublicPath)((0,o.getUrlBase)("/js/smartcharts/"))}));var a=function(t){return function(){return i.then((function(e){return{default:e[t]}}))}},s=n.lazy(a("SmartChart")),c=n.lazy(a("ChartTitle")),l=(a("ChartSize"),n.lazy(a("ChartMode"))),u=n.lazy(a("DrawTools")),f=n.lazy(a("Share")),p=n.lazy(a("StudyLegend")),d=n.lazy(a("Views")),h=n.lazy(a("ToolbarWidget")),_=n.lazy(a("FastMarker")),y=n.lazy(a("RawMarker"))},"./src/Modules/Trading/Containers/toast-popup.jsx":(t,e,r)=>{"use strict";r.d(e,{S:()=>m,a:()=>_});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("../../node_modules/prop-types/index.js"),a=r.n(i),s=r("react"),c=r("react-dom"),l=r.n(c),u=r("@deriv/components"),f=r("./src/Stores/connect.js"),p=["portal_id","children","className"];function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(){return h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},h.apply(this,arguments)}var _=function(t){var e=t.portal_id,r=void 0===e?"popup_root":e,n=t.children,i=t.className,a=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,p);return document.getElementById(r)?l().createPortal(s.createElement(u.Toast,h({className:o()("dc-toast-popup",i)},a),n),document.getElementById(r)):null},y=function(t){var e=t.status,r=t.portal_id,n=t.message,i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(s.useState(!1),2),a=i[0],c=i[1];return document.getElementById(r)&&n?(a||"online"===e?a&&"online"===e&&setTimeout((function(){c(!1)}),1500):c(!0),l().createPortal(s.createElement(u.MobileWrapper,null,s.createElement(u.Toast,{className:o()({"dc-toast--blinker":"blinker"===e}),is_open:a,timeout:0,type:"error"},n)),document.getElementById(r))):null};y.propTypes={portal_id:a().string,status:a().string,message:a().string};var m=(0,f.$j)((function(t){return{network_status:t.common.network_status}}))((function(t){var e=t.network_status;return s.createElement(y,{portal_id:"popup_root",message:e.tooltip,status:e.class})}))},"./src/Modules/Trading/Helpers/digits.js":(t,e,r)=>{"use strict";r.d(e,{A:()=>i,H:()=>a});var n=["even_odd","match_diff","over_under"],o=["DIGITDIFF","DIGITMATCH","DIGITOVER","DIGITUNDER","DIGITEVEN","DIGITODD"],i=function(t){return n.includes(t)},a=function(t){return o.includes(t)}},"./src/Stores/Modules/Contract/Helpers/contract-type.js":(t,e,r)=>{"use strict";r.d(e,{a:()=>n});var n=function(t){return"rise_fall"===t||"rise_fall_equal"===t||"high_low"===t}},"./src/Stores/Modules/Contract/Helpers/logic.js":(t,e,r)=>{"use strict";r.d(e,{$B:()=>y,FD:()=>_,NQ:()=>v,W9:()=>b,aG:()=>f,f:()=>g,f6:()=>c,xF:()=>h,z9:()=>m});var n=r("../../node_modules/moment/moment.js"),o=r.n(n),i=r("@deriv/shared"),a=r("./src/_common/base/server_time.js"),s=r.n(a),c=function(t){if((0,i.isEmptyObject)(t))return null;var e=t.date_start,r=v(t),n=p(e,r||null),o=f(e,r||null);return{chart_type:t.tick_count?"mountain":o,granularity:t.tick_count?0:n,end_epoch:r,start_epoch:e,scroll_to_epoch:t.purchase_time}},l=[[1,0],[2,120],[6,600],[24,900],[120,3600],[720,14400]],u=function(t){return t||s().get().unix()},f=function(t,e){return o().duration(o().unix(u(e)).diff(o().unix(t))).asHours()<=1?"mountain":"candle"},p=function(t,e){return d(u(e)-t)},d=function(t){return(l.find((function(e){return t<=3600*e[0]}))||[null,86400])[1]},h=function(t,e){if((0,i.isEmptyObject)(e)||(0,i.isEmptyObject)(t))return!1;var r=v(t);return!(!r||!e.epoch)&&o().duration(o().unix(e.epoch).diff(o().unix(r))).asSeconds()>=2},_=function(t){return!!(t.cancellation&&v(t)<t.cancellation.date_expiry)},y=function(t){return"cancelled"===t.status},m=function(t){return!!(t.cancellation.date_expiry<s().get().unix())},v=function(t){var e=t.exit_tick_time,r=t.date_expiry,n=t.is_expired,o=t.is_path_dependent,a=t.sell_time,s=t.status,c=t.tick_count;if(n&&"open"!==s||(0,i.isUserSold)(t)||y(t))return(0,i.isUserSold)(t)?a>r?r:a:!c&&a>r||r>e&&!+o?r:e},g=function(t){return t.contract_info.buy_price},b=function(t){var e=t.contract_update,r=t.limit_order,n=(0,i.getLimitOrderAmount)(r||e),o=n.stop_loss,a=n.take_profit;return{contract_update_stop_loss:o?Math.abs(o).toString():"",contract_update_take_profit:a?a.toString():"",has_contract_update_stop_loss:!!o,has_contract_update_take_profit:!!a}}},"./src/Stores/Modules/Contract/Helpers/multiplier.js":(t,e,r)=>{"use strict";r.d(e,{Lf:()=>a,Qu:()=>s,tP:()=>c});var n=r("./src/Stores/connect.js");function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=function(t){var e=!t.has_cancellation;(0,t.onChangeMultiple)(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({has_cancellation:e},e?{has_stop_loss:!1,has_take_profit:!1}:{cancellation_price:void 0}))},s=function(t){var e=t.event;(0,t.onChangeMultiple)({has_cancellation:!0,has_take_profit:!1,has_stop_loss:!1,cancellation_duration:e.target.value})},c=(0,n.$j)((function(t,e){!function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}(t);var r=e.contract,n=void 0===r?{}:r;return{validation_errors:n.validation_errors,contract_update_take_profit:n.contract_update_take_profit,contract_update_stop_loss:n.contract_update_stop_loss,has_contract_update_take_profit:n.has_contract_update_take_profit,has_contract_update_stop_loss:n.has_contract_update_stop_loss}}))},"./src/Stores/Modules/Portfolio/Helpers/details.js":(t,e,r)=>{"use strict";r.d(e,{BX:()=>s,Cc:()=>l,H3:()=>c,uZ:()=>a});var n=r("@deriv/shared"),o=r("@deriv/translations"),i=function(t){return t%1!=0},a=function(){return{d:{name_plural:(0,o.localize)("days"),name_singular:(0,o.localize)("day")},h:{name_plural:(0,o.localize)("hours"),name_singular:(0,o.localize)("hour")},m:{name_plural:(0,o.localize)("minutes"),name_singular:(0,o.localize)("minute")},s:{name:(0,o.localize)("seconds")}}},s=function(t){var e=a(),r=t.asMilliseconds()/1e3;if(r){if(r>=864e5)return r/864e5<=2?e.d.name_singular:e.d.name_plural;if(r>=36e5&&r<864e5)return i(r/36e5)?"":36e5===r?e.h.name_singular:e.h.name_plural;if(r>=6e4&&r<36e5)return i(r/6e4)?"":6e4===r?e.m.name_singular:e.m.name_plural;if(r>=1e3&&r<6e4)return e.s.name}return e.s.name},c=function(t){return(0,n.getDiffDuration)((0,n.epochToMoment)(t.date_start||t.purchase_time),(0,n.epochToMoment)(t.date_expiry))},l=function(t){return t.tick_count?t.tick_count:function(t){var e=t.asMilliseconds()/1e3;if(e>=864e5){var r=e/864e5;return Math.floor(r)}if(e>=36e5&&e<864e5){var o=i(e/36e5),a=i(e/6e4)?"HH[h] mm[m] ss[s]":"HH[h] mm[m]";return o?(0,n.formatMilliseconds)(e,a):Math.floor(e/36e5)}return e>=6e4&&e<36e5?i(e/6e4)?(0,n.formatMilliseconds)(e,"mm[m] ss[s]"):Math.floor(e/6e4):Math.floor(e/1e3)}(c(t))}},"./src/Stores/Modules/Trading/Constants/contract.js":(t,e,r)=>{"use strict";r.d(e,{GF:()=>u,f:()=>f,jK:()=>c,r2:()=>l});var n=r("@deriv/translations"),o=r("@deriv/shared");function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var c=function(){return{payout:(0,n.localize)("Payout"),stake:(0,n.localize)("Stake"),multiplier:(0,n.localize)("Multiplier")}},l=function(t){return{rise_fall:{title:(0,n.localize)("Rise/Fall"),trade_types:["CALL","PUT"],basis:["stake","payout"],components:["start_date"],barrier_count:0},rise_fall_equal:{title:(0,n.localize)("Rise/Fall"),trade_types:["CALLE","PUTE"],basis:["stake","payout"],components:["start_date"],barrier_count:0},high_low:{title:(0,n.localize)("Higher/Lower"),trade_types:["CALL","PUT"],basis:["stake","payout"],components:["barrier"],barrier_count:1},touch:{title:(0,n.localize)("Touch/No Touch"),trade_types:["ONETOUCH","NOTOUCH"],basis:["stake","payout"],components:["barrier"]},end:{title:(0,n.localize)("Ends In/Ends Out"),trade_types:["EXPIRYMISS","EXPIRYRANGE"],basis:["stake","payout"],components:["barrier"]},stay:{title:(0,n.localize)("Stays In/Goes Out"),trade_types:["RANGE","UPORDOWN"],basis:["stake","payout"],components:["barrier"]},asian:{title:(0,n.localize)("Asian Up/Asian Down"),trade_types:["ASIANU","ASIAND"],basis:["stake","payout"],components:[]},match_diff:{title:(0,n.localize)("Matches/Differs"),trade_types:["DIGITMATCH","DIGITDIFF"],basis:["stake","payout"],components:["last_digit"]},even_odd:{title:(0,n.localize)("Even/Odd"),trade_types:["DIGITODD","DIGITEVEN"],basis:["stake","payout"],components:[]},over_under:{title:(0,n.localize)("Over/Under"),trade_types:["DIGITOVER","DIGITUNDER"],basis:["stake","payout"],components:["last_digit"]},lb_call:{title:(0,n.localize)("Close-to-Low"),trade_types:["LBFLOATCALL"],basis:["multiplier"],components:[]},lb_put:{title:(0,n.localize)("High-to-Close"),trade_types:["LBFLOATPUT"],basis:["multiplier"],components:[]},lb_high_low:{title:(0,n.localize)("High-to-Low"),trade_types:["LBHIGHLOW"],basis:["multiplier"],components:[]},tick_high_low:{title:(0,n.localize)("High Tick/Low Tick"),trade_types:["TICKHIGH","TICKLOW"],basis:[],components:[]},run_high_low:{title:(0,n.localize)("Only Ups/Only Downs"),trade_types:["RUNHIGH","RUNLOW"],basis:[],components:[]},reset:{title:(0,n.localize)("Reset Up/Reset Down"),trade_types:["RESETCALL","RESETPUT"],basis:[],components:[]},callputspread:{title:(0,n.localize)("Spread Up/Spread Down"),trade_types:["CALLSPREAD","PUTSPREAD"],basis:[],components:[]},multiplier:{title:(0,n.localize)("Multipliers"),trade_types:["MULTUP","MULTDOWN"],basis:["stake"],components:["take_profit","stop_loss"].concat(a((0,o.shouldShowCancellation)(t)?["cancellation"]:[]),a((0,o.shouldShowExpiration)(t)?["expiration"]:[])),config:{hide_duration:!0}}}},u=function(){var t;return i(t={},(0,n.localize)("Multipliers"),["multiplier"]),i(t,(0,n.localize)("Ups & Downs"),["rise_fall","rise_fall_equal","run_high_low","reset","asian","callputspread"]),i(t,(0,n.localize)("Highs & Lows"),["high_low","touch","tick_high_low"]),i(t,(0,n.localize)("Ins & Outs"),["end","stay"]),i(t,(0,n.localize)("Look Backs"),["lb_high_low","lb_put","lb_call"]),i(t,(0,n.localize)("Digits"),["match_diff","even_odd","over_under"]),t},f=["callputspread","run_high_low","reset","asian","tick_high_low","end","stay","lb_call","lb_put","lb_high_low"]},"./src/Stores/Modules/Trading/Helpers/active-symbols.js":(t,e,r)=>{"use strict";r.d(e,{Uf:()=>v,c:()=>u,jt:()=>d,pp:()=>p,rh:()=>w,xZ:()=>f});var n=r("mobx"),o=r("@deriv/shared"),i=r("@deriv/translations");function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,c,"next",t)}function c(t){s(i,n,o,a,c,"throw",t)}a(void 0)}))}}function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new O(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=f(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var p={};function d(){}function h(){}function _(){}var y={};c(y,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(k([])));v&&v!==e&&r.call(v,o)&&(y=v);var g=_.prototype=d.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(o,i,s,c){var l=f(t[o],t,i);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==a(p)&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(p).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=f(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=_,c(g,"constructor",_),c(_,"constructor",h),h.displayName=c(_,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,s,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}var u=(0,n.flow)(l().mark((function t(e,r){var n,a,s,c,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.WS.wait("website_status");case 2:return n=t.sent,t.next=5,o.WS.residenceList();case 5:a=t.sent,s=n.website_status.clients_country,c=(a.residence_list.find((function(t){return t.value===s}))||{}).text,u=c?(0,i.localize)("Sorry, this app is unavailable in {{clients_country}}.",{clients_country:c}):(0,i.localize)("Sorry, this app is unavailable in your current location."),e({message:(0,i.localize)("If you have an account, log in to continue."),header:u,redirect_label:(0,i.localize)("Log in"),redirectOnClick:function(){return(0,o.redirectToLogin)(r,(0,i.getLanguage)())},should_show_refresh:!1});case 10:case"end":return t.stop()}}),t)}))),f=(0,n.flow)(l().mark((function t(e,r,n){var a,s,c,u,f;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.WS.wait("get_settings");case 2:return a=t.sent,t.next=5,o.WS.residenceList();case 5:s=t.sent,c=a.get_settings.country_code,u=(s.residence_list.find((function(t){return t.value===c}))||{}).text,f=r?(0,i.localize)("Unfortunately, trading options isn't possible in your country"):u||n?(0,i.localize)("Sorry, trading is unavailable in {{clients_country}}.",{clients_country:u}):(0,i.localize)("Sorry, trading is unavailable in your current location."),e({message:" ",header:f,redirect_label:null,redirectOnClick:function(){return{}},should_show_refresh:!1});case 10:case"end":return t.stop()}}),t)}))),p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return!!t.length&&!!t.filter((function(t){return t.symbol===e}))[0]&&!t.filter((function(t){return t.symbol===e}))[0].exchange_is_open},d=function(){var t=c(l().mark((function t(){var e,r,n,o=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=o.length>0&&void 0!==o[0]?o[0]:[]).length){t.next=3;break}return t.abrupt("return","");case 3:return t.next=5,h(e);case 5:if(!(r=t.sent)){t.next=8;break}return t.abrupt("return",r);case 8:return t.next=10,_(e);case 10:return n=t.sent,t.abrupt("return",n);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=c(l().mark((function t(e){var r,n,i,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=o.LocalStore.get("cq-favorites")){t.next=4;break}return t.abrupt("return",void 0);case 4:if(n=JSON.parse(r)["chartTitle&Comparison"],!(i=n.map((function(t){return e.find((function(e){return e.symbol===t}))})))){t.next=14;break}if(!(a=i.filter((function(t){return t})).find(g))){t.next=14;break}return t.next=11,b(a);case 11:if(!t.sent){t.next=14;break}return t.abrupt("return",a.symbol);case 14:return t.abrupt("return",void 0);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",void 0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=c(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e,"1HZ100V");case 2:if(t.t1=t.sent,t.t1){t.next=7;break}return t.next=6,m(e,/random_index/);case 6:t.t1=t.sent;case 7:if(t.t0=t.t1,t.t0){t.next=12;break}return t.next=11,m(e,/major_pairs/);case 11:t.t0=t.sent;case 12:if(!(r=t.t0)){t.next=15;break}return t.abrupt("return",r.symbol);case 15:return t.abrupt("return",e.find((function(t){return"major_pairs"===t.submarket})).symbol);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=c(l().mark((function t(e,r){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.find((function(t){return t.symbol===r&&g(t)})),t.next=3,b(n);case 3:if(!t.sent){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",void 0);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),m=function(){var t=c(l().mark((function t(e,r){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.find((function(t){return r.test(t.submarket)&&g(t)})),t.next=3,b(n);case 3:if(!t.sent){t.next=6;break}return t.abrupt("return",n);case 6:return t.abrupt("return",void 0);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),v=function(){var t=c(l().mark((function t(e,r){var n,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.shift(),o=e.find((function(t){return n===t.market&&g(t)})),t.next=4,b(o);case 4:if(!t.sent){t.next=9;break}return t.abrupt("return",{category:o.market,subcategory:o.submarket});case 9:if(!(r.length>0)){t.next=11;break}return t.abrupt("return",v(e,r));case 11:return t.abrupt("return",void 0);case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),g=function(t){return 1===t.exchange_is_open},b=function(){var t=c(l().mark((function t(e){var r,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.WS.storage.contractsFor(null==e?void 0:e.symbol);case 2:return n=t.sent,t.abrupt("return",!["InvalidSymbol","InputValidationFailed"].includes(null===(r=n.error)||void 0===r?void 0:r.code));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return(t.find((function(t){return t.symbol.toUpperCase()===e.toUpperCase()}))||{display_name:""}).display_name}},"./src/Stores/Modules/Trading/Helpers/barrier.js":(t,e,r)=>{"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{l:()=>i,t:()=>o});var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{count:t.barriers};if(t.barriers){var r={};return["barrier","low_barrier","high_barrier"].forEach((function(e){e in t&&(r[e]=t[e])})),Object.assign(e||{},n({},t.expiry_type,r))}},i=function(t){return Math.floor(t)===t||t.length<1||t%1==0||isNaN(t)?0:t.toString().split(".")[1].length||0}},"./src/Stores/Modules/Trading/Helpers/contract-type.js":(t,e,r)=>{"use strict";r.d(e,{Z:()=>$});var n,o,i,a,s,c,l,u,f,p,d,h,_,y,m,v,g,b,w,x,E,S,O,k,P,j,L,C,T=r("@deriv/shared"),A=r("./src/_common/base/server_time.js"),N=r.n(A),D=r("@deriv/translations"),I=r("./src/Stores/Modules/Portfolio/Helpers/details.js"),M=r("./src/Stores/Modules/Trading/Helpers/barrier.js"),z=r("./src/Stores/Modules/Trading/Helpers/duration.js"),R=r("./src/Stores/Modules/Trading/Helpers/start-date.js"),U=r("./src/Stores/Modules/Trading/Constants/contract.js");function F(){F=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function f(){}function p(){}function d(){}var h={};s(h,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==e&&r.call(y,o)&&(h=y);var m=d.prototype=f.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==J(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,s(m,"constructor",d),s(d,"constructor",p),p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(g.prototype),s(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function G(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function B(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){G(i,n,o,a,s,"next",t)}function s(t){G(i,n,o,a,s,"throw",t)}a(void 0)}))}}function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,e)||Y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t){return function(t){if(Array.isArray(t))return V(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){if(t){if("string"==typeof t)return V(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(t,e):void 0}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){X(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function X(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}const $=(o={},i={},a={},s={},c=!1,l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[t.contract_type]=t.contract_display,e},u=function(t,e){return-1!==t.indexOf(e)?e:t[0]},f=function(t){return n&&{form_components:["duration","amount"].concat(W(n[t].components)).filter((function(e){return!("duration"===e&&n[t].config&&n[t].config.hide_duration)}))}},p=function(t,e){return{duration_units_list:(0,T.getPropertyValue)(o,[t,"config","durations","units_display",e])||[]}},d=function(t,e,r){var n=(0,T.getPropertyValue)(o,[e,"config","durations","units_display",r])||[],i=[];return n.forEach((function(t){i.push(t.value)})),{duration_unit:u(i,t)}},h=function(t,e,r){var n=(0,T.getPropertyValue)(o,[t,"config","durations","min_max",e])||{};return r&&(n=n[r]||{}),{duration_min_max:n}},_=function(t){return{contract_start_type:t===Number(0)?"spot":"forward"}},y=function(t,e){var r,n=(0,T.getPropertyValue)(o,[t,"config"]),i=[];return null!=n&&n.has_spot&&i.push({text:(0,D.localize)("Now"),value:Number(0)}),null!=n&&n.forward_starting_dates&&i.push.apply(i,W(n.forward_starting_dates)),{start_date:i.find((function(t){return t.value===e}))?e:null===(r=i[0])||void 0===r?void 0:r.value,start_dates_list:i}},m=W(Array(24).keys()).map((function(t){return"0".concat(t).slice(-2)})),v=W(Array(12).keys()).map((function(t){return"0".concat(5*t).slice(-2)})),g=function(t,e,r){return t&&!(0,R.Y)(t,e)&&(e.minute(v.find((function(r){return(0,R.Y)(t,e.minute(r))}))||e.format("mm")),(0,R.Y)(t,e)||(e.minute(0),e.hour(m.find((function(n){return(0,R.Y)(t,e.hour(n),r,!0)}))||e.format("HH")),e.minute(v.find((function(r){return(0,R.Y)(t,e.minute(r))}))||e.format("mm")))),e.format("HH:mm")},b=function(t,e){var r=H((0,T.isTimeValid)(e)?e.split(":"):[0,0],2),n=r[0],o=r[1];return(0,T.toMoment)(t||N().get()).hour(n).minute(o)},w=function(){var t=B(F().mark((function t(e){var r,n,o,i,s,c,l,u,f=arguments;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:null,e){t.next=3;break}return t.abrupt("return",[]);case 3:if(e in a){t.next=8;break}return t.next=6,T.WS.tradingTimes(e);case 6:if(n=t.sent,(0,T.getPropertyValue)(n,["trading_times","markets"]))for(o=0;o<n.trading_times.markets.length;o++)if(i=n.trading_times.markets[o].submarkets)for(s=0;s<i.length;s++)if(c=i[s].symbols)for(l=0;l<c.length;l++)u=c[l],a[n.echo_req.trading_times]||(a[n.echo_req.trading_times]={}),a[n.echo_req.trading_times][u.symbol]=u.events;case 8:return t.abrupt("return",a[e][r]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=B(F().mark((function t(e){var r,n,o,i,a,c,l,u,f=arguments;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:null,e){t.next=3;break}return t.abrupt("return",[]);case 3:if(e in s){t.next=8;break}return t.next=6,T.WS.tradingTimes(e);case 6:if(n=t.sent,(0,T.getPropertyValue)(n,["trading_times","markets"]))for(o=0;o<n.trading_times.markets.length;o++)if(i=n.trading_times.markets[o].submarkets)for(a=0;a<i.length;a++)if(c=i[a].symbols)for(l=0;l<c.length;l++)u=c[l],s[n.echo_req.trading_times]||(s[n.echo_req.trading_times]={}),s[n.echo_req.trading_times][u.symbol]={open:u.times.open,close:u.times.close};case 8:return t.abrupt("return",r?s[e][r]:s[e]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(t){return t.minute(5*Math.ceil(t.minute()/5))},O=function(t){return{trade_types:(0,T.getPropertyValue)(o,[t,"config","trade_types"])}},P=function(t,e){var r=(0,T.getPropertyValue)(o,[t,"basis"])||[],n=(0,U.jK)();return{basis_list:r.reduce((function(t,e){return[].concat(W(t),[{text:n[e],value:e}])}),[]),basis:u(r,e)}},j=function(t,e){var r=(0,T.getPropertyValue)(o,[t,"config","multiplier_range"])||[];return{multiplier_range_list:r.map((function(t){return{text:"x".concat(t),value:t}})),multiplier:u(r,e)}},L=function(t,e,r){var n=(0,T.getPropertyValue)(o,[t,"config","cancellation_range"])||[],i=new RegExp("^([0-9]+)|([a-zA-Z]+)$","g"),a=(0,T.shouldShowCancellation)(r);return Z({cancellation_duration:u(n,e),cancellation_range_list:n.map((function(t){return{text:"".concat((e=t,r=H(e.match(i),2),n=r[0],o=r[1],a=(0,I.uZ)(),"".concat(n," ").concat(a[o].name_plural))),value:t};var e,r,n,o,a}))},a?{}:{has_cancellation:!1})},C=function(t){var e,r=null===(e=/^(.*)_equal$/.exec(t))||void 0===e?void 0:e[1];return r&&!o[r]?{is_equal:1,has_equals_only:!0}:{}},{buildContractTypesConfig:function(t){return T.WS.storage.contractsFor(t).then((function(e){var r=(0,T.getPropertyValue)(e,["contracts_for"]);if(c=r&&!e.contracts_for.available.find((function(t){return"forward"!==t.start_type})),r&&!c){var a=(0,U.GF)();n=(0,U.r2)(t),o={},i=(0,T.cloneObject)(a),e.contracts_for.available.forEach((function(t){var e=Object.keys(n).find((function(e){return-1!==n[e].trade_types.indexOf(t.contract_type)&&(void 0===n[e].barrier_count||+n[e].barrier_count===t.barriers)}));if(e){if(!o[e]){var r=i[Object.keys(i).find((function(t){return-1!==i[t].indexOf(e)}))];if(!r)return;r[r.indexOf(e)]={value:e,text:n[e].title},o[e]=(0,T.cloneObject)(n[e])}var a=o[e].config||{};a.has_spot=a.has_spot||"spot"===t.start_type,a.durations=!a.hide_duration&&(0,z.oR)(t,a.durations),a.trade_types=l(t,a.trade_types),a.barriers=(0,M.t)(t,a.barriers),a.forward_starting_dates=(0,R.H)(t,a.forward_starting_dates),a.multiplier_range=t.multiplier_range,a.cancellation_range=t.cancellation_range,o[e].config=a}})),Object.keys(i).forEach((function(t){i[t]=i[t].filter((function(t){return"object"===J(t)})),0===i[t].length&&delete i[t]}))}}))},getBarriers:k=function(t,e){var r=(0,T.getPropertyValue)(o,[t,"config","barriers"])||{},n=r[e]||{},i=n.barrier||n.high_barrier||"",a=n.low_barrier||"";return{barrier_count:r.count||0,barrier_1:i.toString(),barrier_2:a.toString()}},getContractType:function(t,e){var r=Object.keys(t||{}).reduce((function(e,r){return[].concat(W(e),W(t[r].map((function(t){return t.value}))))}),[]).filter((function(t){return-1===U.f.indexOf(t)})).sort((function(t,e){return"multiplier"===t||"multiplier"===e?-1:0}));return{contract_type:u(r,e)}},getContractValues:function(t){var e=t.contract_expiry_type,r=t.contract_type,n=t.basis,o=t.duration_unit,i=t.expiry_type,a=t.multiplier,s=t.start_date,c=t.cancellation_duration,l=t.symbol;if(!r)return{};var u=f(r),m=P(r,n),v=O(r),g=y(r,s),b=_(g.start_date),w=k(r,e),x=d(o,r,b.contract_start_type),S=p(r,b.contract_start_type),T=h(r,b.contract_start_type),A=j(r,a),N=L(r,c,l),D=E(S,i),I=C(r);return Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(Z({},u),m),v),g),b),w),x),S),T),D),A),N),I)},getDurationMinMax:h,getDurationUnit:d,getDurationUnitsList:p,getFullContractTypes:function(){return o},getExpiryDate:function(t,e,r,n){var o=null;if("endtime"===r){var i=(0,T.toMoment)(n),a=(0,T.toMoment)(e);o=(0,z.o5)(t)?(a.isBefore(i,"day")||n&&a.isAfter(i.clone().add(1,"day"))?i:a).format("YYYY-MM-DD"):(a.isSameOrBefore(i,"day")?i.clone().add(1,"day"):a).format("YYYY-MM-DD")}return{expiry_date:o}},getExpiryTime:function(t,e,r,n,o,i,a){var s=null;if("endtime"===r){var c="23:59:59";if(n&&n.length&&"--"!==n[0]&&(c=n.slice(-1)[0]),!i&&N().get().isBefore(b(t),"day"))s=c;else{var l=i?b(i,a):N().get(),u=b(t,e);s=u.format("HH:mm");var f=[{open:l.clone().add(5,"minute"),close:(0,T.minDate)(l.clone().add(24,"hour"),b(t,c))}];if((0,R.Y)(f,u)||(s=g(f,u.clone(),l.clone())),u.isSameOrBefore(l)||u.diff(l,"minute")<5){var p=23===l.get("hours")&&l.get("minute")>=55,d=o&&!(0,R.Y)(o,l.clone().add(5,"minutes"));s=l.clone().add(p||d?0:5,"minutes"),s=S(s).format("HH:mm")}"00:00"===s&&l.isBefore(u,"day")&&(s=l.clone().subtract(5,"minute").format("HH:mm"))}}return{expiry_time:s}},getExpiryType:E=function(t,e){if(t){if(!e&&t.length>0||1===t.length&&"t"===t[0].value)return{expiry_type:"duration"};if(0===t.length)return{expiry_type:null}}return{expiry_type:e}},getSessions:function(t,e){return{sessions:((((0,T.getPropertyValue)(o,[t,"config"])||{}).forward_starting_dates||[]).find((function(t){return t.value===e}))||{}).sessions}},getStartTime:function(t,e,r){return{start_time:e?g(t,b(e,r)):null}},getStartType:_,getTradingEvents:w,getTradingTimes:x,getContractCategories:function(){return{contract_types_list:i,has_only_forward_starting_contracts:c}}})},"./src/Stores/Modules/Trading/Helpers/duration.js":(t,e,r)=>{"use strict";r.d(e,{I7:()=>h,P7:()=>_,QJ:()=>f,ln:()=>p,o5:()=>d,oR:()=>c});var n=r("@deriv/translations"),o=r("@deriv/shared");function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=function(){return{t:{display:(0,n.localize)("Ticks"),order:1},s:{display:(0,n.localize)("Seconds"),order:2,to_second:1},m:{display:(0,n.localize)("Minutes"),order:3,to_second:60},h:{display:(0,n.localize)("Hours"),order:4,to_second:3600},d:{display:(0,n.localize)("Days"),order:5,to_second:86400}}},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{min_max:{},units_display:{}};e.min_max[t.start_type]=e.min_max[t.start_type]||{},e.units_display[t.start_type]=e.units_display[t.start_type]||[];var r=u(t.min_contract_duration),n=u(t.max_contract_duration);e.min_max[t.start_type][t.expiry_type]={min:l(r.duration,r.unit,"s"),max:l(n.duration,n.unit,"s")};var o=[];e.units_display[t.start_type].forEach((function(t){o.push(t.value)}));var a=s();return/^tick|daily$/.test(t.expiry_type)?-1===o.indexOf(r.unit)&&o.push(r.unit):Object.keys(a).forEach((function(t){"d"!==t&&-1===o.indexOf(t)&&a[t].order>=a[r.unit].order&&a[t].order<=a[n.unit].order&&o.push(t)})),e.units_display[t.start_type]=o.sort((function(t,e){return a[t].order>a[e].order?1:-1})).reduce((function(t,e){return[].concat(i(t),[{text:a[e].display,value:e}])}),[]),e},l=function(t,e,r){if(!t||!e||!r||isNaN(parseInt(t)))return null;var n=s();return e!==r&&"to_second"in n[e]?t*n[e].to_second/n[r].to_second:t},u=function(t){var e=t.toString().match(/[a-zA-Z]+|[0-9]+/g);return{duration:+e[0],unit:e[1]}},f=function(t){var e=t.duration_unit,r=t.expiry_date,n=t.expiry_type,i=t.duration_units_list,a=t.root_store.common.server_time,s="duration"===n&&"d"===e,c="endtime"===n&&((0,o.toMoment)(r).isAfter((0,o.toMoment)(a),"day")||!d(i)),l="daily";return s||c||(l="t"===e?"tick":"intraday"),l},p=function(t,e){if(!(t>=0&&e&&Number.isInteger(t)))return null;if("m"===e){var r=t/60;return r>=1?Math.floor(r):1}if("h"===e){var n=t/3600;return n>=1?Math.floor(n):1}if("d"===e){var o=t/86400;return o>=1?Math.floor(o):1}return t},d=function(t){return t.some((function(t){return-1!==["m","h"].indexOf(t.value)}))},h=function(t,e){return/^R_/.test(t)&&"endtime"===e?(0,o.toMoment)(null).format("DD MMM YYYY"):null},_=function(t,e,r){if(!t[e])return[];var n=p(+t[e].max,r);return[p(+t[e].min,r),n]}},"./src/Stores/Modules/Trading/Helpers/proposal.js":(t,e,r)=>{"use strict";r.d(e,{RX:()=>u,_N:()=>l,yr:()=>c});var n=r("@deriv/shared");function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s={barrier:"barrier_1",barrier2:"barrier_2",date_expiry:"expiry_date"},c=function(t){var e=(0,n.getPropertyValue)(t,["error","details","field"]);if(!e)return null;var r,o=s[e]||e,i=document.getElementsByName(o)[0];return i&&(r=i)&&(0!==r.offsetWidth||0!==r.offsetHeight)?o:null},l=function(t,e,r){var o,i,a,s=e.proposal||{},l=s.payout-s.ask_price||0,u=100*l/(s.ask_price||1),f=s.display_value,p=t.basis_list.find((function(e){return e.value!==t.basis}))||{},d="Stake"===p.text?f:s[p.value],h=d>r.value;r.value&&d!==r.value||(h=null);var _={text:p.text||"",value:d||""};return{commission:s.commission,cancellation:s.cancellation,id:s.id||"",has_error:!!e.error,has_error_details:!!c(e),error_code:null==e||null===(o=e.error)||void 0===o?void 0:o.code,error_field:null==e||null===(i=e.error)||void 0===i||null===(a=i.details)||void 0===a?void 0:a.field,has_increased:h,limit_order:s.limit_order,message:s.longcode||e.error.message,obj_contract_basis:_,payout:s.payout,profit:l.toFixed((0,n.getDecimalPlaces)(t.currency)),returns:"".concat(u.toFixed(2),"%"),stake:f}},u=function(t){var e={};return Object.keys(t.trade_types).forEach((function(r){var n=f(t,r);e[r]=n})),e},f=function(t,e){var r={},o={};if("endtime"===t.expiry_type){var a=(0,n.toMoment)(t.expiry_date);r.date_expiry=(0,n.convertToUnix)(a.unix(),t.expiry_time)}return"multiplier"===t.contract_type&&function(t,e){e.multiplier=t.multiplier,e.cancellation=t.has_cancellation?t.cancellation_duration:void 0,e.limit_order=t.has_take_profit||t.has_stop_loss?{}:void 0,t.has_take_profit&&t.take_profit&&(e.limit_order.take_profit=+t.take_profit||0),t.has_stop_loss&&t.stop_loss&&(e.limit_order.stop_loss=+t.stop_loss||0)}(t,o),i(i(i(i(i({proposal:1,subscribe:1,amount:parseFloat(t.amount)||0,basis:t.basis,contract_type:e,currency:t.currency,symbol:t.symbol},t.start_date&&{date_start:(0,n.convertToUnix)(t.start_date,t.start_time)}),"duration"===t.expiry_type?{duration:parseInt(t.duration),duration_unit:t.duration_unit}:r),(t.barrier_count>0||-1!==t.form_components.indexOf("last_digit"))&&{barrier:t.barrier_1||t.last_digit}),2===t.barrier_count&&{barrier2:t.barrier_2}),o)}},"./src/Stores/Modules/Trading/Helpers/start-date.js":(t,e,r)=>{"use strict";r.d(e,{H:()=>a,Y:()=>c});var n=r("./src/_common/base/server_time.js"),o=r.n(n),i=r("@deriv/shared"),a=function(t,e){var r=[];return(t.forward_starting_options||[]).length&&t.forward_starting_options.forEach((function(t){var e=r.find((function(e){return e.value===parseInt(t.date)})),n={open:(0,i.toMoment)(t.open),close:(0,i.toMoment)(t.close)};e?e.sessions.push(n):r.push({text:(0,i.toMoment)(t.date).format("ddd - DD MMM, YYYY"),value:parseInt(t.date),sessions:[n]})})),r.length?r:e},s=function(t,e,r){var n=(0,i.toMoment)(e);return r&&n.minute(0).second(0),t.isBefore(n)&&n.unix()!==t.unix()},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.toMoment)(o().get()),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.toMoment)(o().get()),n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!(s(e,o().get(),n)||s(e,r,n)||t.length&&!t.find((function(t){return e.isBetween(t.open,t.close,n?"hour":null,"[]")})))}},"./src/Stores/connect.js":(t,e,r)=>{"use strict";r.d(e,{$j:()=>u,z1:()=>l});var n=r("mobx-react"),o=r("react");function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=o.createContext(null),l=function(t){var e=t.store,r=t.children;return o.createElement(c.Provider,{value:a(a({},e),{},{mobxStores:e})},r)},u=function(t){return function(e){return function(t,e){var r=function(r){var i=o.useContext(c),s=e;return function(t){return!("function"!=typeof t||!t.prototype||!t.prototype.isReactComponent)}(e)&&(s=function(t){return o.createElement(e,t)}),(0,n.useObserver)((function(){return s(a(a({},r),t(i,r)))}))};return r.displayName=e.name,r}(t,e)}}},"./src/_common/base/server_time.js":(t,e,r)=>{var n,o,i,a=r("./src/_common/utility.js").PromiseClass,s=(o=!1,i=new a,{init:function(t){o||(n=t,i.resolve(n.server_time),o=!0)},get:function(){return o&&n.server_time?n.server_time.clone():void 0},timePromise:function(){return o?Promise.resolve(n.server_time):i.promise}});t.exports=s},"./src/_common/utility.js":t=>{function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r,n=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.promise=new Promise((function(t,r){e.reject=r,e.resolve=t}))}));t.exports={template:function(t,e){var r=e;return e&&!Array.isArray(e)&&(r=[e]),t.replace(/\[_(\d+)]/g,(function(t,e){return r[+e-1]}))},createElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement(t);return Object.keys(e).forEach((function(t){var n=e[t];"text"===t?r.textContent=n:"html"===t?r.html(n):r.setAttribute(t,n)})),r},getStaticHash:function(){return r=r||(document.querySelector('script[src*="main"]').getAttribute("src")||"").split(".")[1]},PromiseClass:n}}}]);