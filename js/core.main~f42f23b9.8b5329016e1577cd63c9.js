"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9328],{87463:(e,t,r)=>{r.d(t,{Z:()=>w});var o,n,i,s=r(52076),c=r(59001),a=r(39402);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t,r,o,n,i,s){try{var c=e[i](s),a=c.value}catch(e){return void r(e)}c.done?t(a):Promise.resolve(a).then(o,n)}function p(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=g(e);if(t){var n=g(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function v(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var w=(o=c.action.bound,n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(b,e);var t,r,o,n,a,u=d(b);function b(){var e;h(this,b);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return p(e=u.call.apply(u,[this].concat(r)),"active_symbols",i,_(e)),e}return t=b,r=[{key:"setActiveSymbols",value:(n=regeneratorRuntime.mark((function e(){var t,r,o,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.WS.authorized.activeSymbols();case 2:t=e.sent,r=t.active_symbols,o=t.error,(0,c.runInAction)((function(){r.length&&!o?n.active_symbols=r:n.active_symbols=[]}));case 6:case"end":return e.stop()}}),e)})),a=function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function s(e){l(i,r,o,s,c,"next",e)}function c(e){l(i,r,o,s,c,"throw",e)}s(void 0)}))},function(){return a.apply(this,arguments)})}],r&&f(t.prototype,r),o&&f(t,o),Object.defineProperty(t,"prototype",{writable:!1}),b}(a.Z),i=v(n.prototype,"active_symbols",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v(n.prototype,"setActiveSymbols",[o],Object.getOwnPropertyDescriptor(n.prototype,"setActiveSymbols"),n.prototype),n)},39402:(e,t,r)=>{r.d(t,{Z:()=>N});var o,n,i,s,c,a,u,l,p,h,f,y,d,b,_,g,v,w,O,S,m,P,k=r(59001),j=r(52076),A=r(58147);function E(e,t,r,o,n,i,s){try{var c=e[i](s),a=c.value}catch(e){return void r(e)}c.done?t(a):Promise.resolve(a).then(o,n)}function D(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function s(e){E(i,o,n,s,c,"next",e)}function c(e){E(i,o,n,s,c,"throw",e)}s(void 0)}))}}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function L(e,t,r,o,n){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var N=(o=k.action.bound,n=k.action.bound,i=k.action.bound,s=k.action.bound,c=k.action.bound,a=k.action.bound,u=k.action.bound,l=k.action.bound,p=k.action.bound,h=k.action.bound,f=k.action.bound,y=k.action.bound,d=k.action.bound,b=k.action.bound,_=k.action.bound,g=k.action.bound,P=m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,e),z(this,"validation_errors",w,this),z(this,"validation_rules",O,this),this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,z(this,"partial_fetch_time",S,this);var r=t.root_store,o=t.local_storage_properties,n=t.session_storage_properties,i=t.validation_rules,s=t.store_name;Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0});var c=o&&o.length||n&&n.length;if(c){if(!s)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:s,enumerable:!1,writable:!1})}this.root_store=r,this.local_storage_properties=o||[],this.session_storage_properties=n||[],this.setValidationRules(i),this.setupReactionForLocalStorage(),this.setupReactionForSessionStorage(),this.retrieveFromStorage()}var t,r,o;return t=e,r=[{key:"getSnapshot",value:function(e){var t=(0,k.toJS)(this);return(0,j.isEmptyObject)(this.root_store)||(t.root_store=this.root_store),e&&e.length&&(t=e.reduce((function(e,r){return Object.assign(e,T({},r,t[r]))}),{})),t}},{key:"setupReactionForLocalStorage",value:function(){var t=this;this.local_storage_properties.length&&(0,k.reaction)((function(){return t.local_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.local_storage_properties,e.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var t=this;this.session_storage_properties.length&&(0,k.reaction)((function(){return t.session_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.session_storage_properties,e.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(t,r){var o=JSON.stringify(this.getSnapshot(t),(function(e,t){if(null!==t)return t}));r===e.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,o):r===e.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,o)}},{key:"retrieveFromStorage",value:function(){var e=this,t=JSON.parse(localStorage.getItem(this.store_name,{})),r=JSON.parse(sessionStorage.getItem(this.store_name,{})),o=C(C({},t),r);Object.keys(o).forEach((function(t){return e[t]=o[t]}))}},{key:"setValidationErrorMessages",value:function(e,t){var r=this;this.validation_errors[e]&&!r.validation_errors[e].filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!r.validation_errors[e].includes(t)}))).length||(this.validation_errors[e]=t)}},{key:"setValidationRules",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(r){e.addRule(r,t[r])}))}},{key:"addRule",value:function(e,t){var r=this;this.validation_rules[e]=t,(0,k.intercept)(this,e,(function(t){return r.validateProperty(e,t.newValue),t}))}},{key:"validateProperty",value:function(e,t){var r=this,o=this.validation_rules[e].trigger,n=T({},e,void 0!==t?t:this[e]),i=T({},e,this.validation_rules[e].rules||[]);o&&Object.hasOwnProperty.call(this,o)&&(n[o]=this[o],i[o]=this.validation_rules[o].rules||[]);var s=new A.Z(n,i,this);s.isPassed(),Object.keys(n).forEach((function(e){r.setValidationErrorMessages(e,s.errors.get(e))}))}},{key:"validateAllProperties",value:function(){var e=this,t=Object.keys(this.validation_rules),r=Object.keys(this.validation_errors);t.forEach((function(t){e.validateProperty(t,e[t])})),r.forEach((function(r){t.includes(r)||delete e.validation_errors[r]}))}},{key:"onSwitchAccount",value:function(e){var t=this;e&&(this.switch_account_listener=e,this.switchAccountDisposer=(0,k.when)((function(){return t.root_store.client.switch_broadcast}),D(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.switch_account_listener())||!r.then||"function"!=typeof r.then){e.next=6;break}r.then((function(){t.root_store.client.switchEndSignal(),t.onSwitchAccount(t.switch_account_listener)})),e.next=7;break;case 6:throw new Error("Switching account listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,j.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))))}},{key:"onPreSwitchAccount",value:function(e){var t=this;e&&(this.pre_switch_account_listener=e,this.preSwitchAccountDisposer=(0,k.when)((function(){return t.root_store.client.pre_switch_broadcast}),D(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.pre_switch_account_listener())||!r.then||"function"!=typeof r.then){e.next=6;break}r.then((function(){t.root_store.client.setPreSwitchAccount(!1),t.onPreSwitchAccount(t.pre_switch_account_listener)})),e.next=7;break;case 6:throw new Error("Pre-switch account listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,j.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))))}},{key:"onLogout",value:function(e){var t=this;this.logoutDisposer=(0,k.when)((function(){return t.root_store.client.has_logged_out}),D(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.logout_listener())||!r.then||"function"!=typeof r.then){e.next=6;break}r.then((function(){t.root_store.client.setLogout(!1),t.onLogout(t.logout_listener)})),e.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,j.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.logout_listener=e}},{key:"onClientInit",value:function(e){var t=this;this.clientInitDisposer=(0,k.when)((function(){return t.root_store.client.initialized_broadcast}),D(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.client_init_listener())||!r.then||"function"!=typeof r.then){e.next=6;break}r.then((function(){t.root_store.client.setInitialized(!1),t.onClientInit(t.client_init_listener)})),e.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,j.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.client_init_listener=e}},{key:"onNetworkStatusChange",value:function(e){var t=this;this.networkStatusChangeDisposer=(0,k.reaction)((function(){return t.root_store.common.is_network_online}),(function(e){try{t.network_status_change_listener(e)}catch(e){(0,j.isProduction)()||console.error(e)}})),this.network_status_change_listener=e}},{key:"onThemeChange",value:function(e){var t=this;this.themeChangeDisposer=(0,k.reaction)((function(){return t.root_store.ui.is_dark_mode_on}),(function(e){try{t.theme_change_listener(e)}catch(e){(0,j.isProduction)()||console.error(e)}})),this.theme_change_listener=e}},{key:"onRealAccountSignupEnd",value:function(e){var t=this;this.realAccountSignupEndedDisposer=(0,k.when)((function(){return t.root_store.ui.has_real_account_signup_ended}),(function(){try{var e=t.real_account_signup_ended_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Real account signup listeners are required to return a promise.");e.then((function(){t.root_store.ui.setRealAccountSignupEnd(!1),t.onRealAccountSignupEnd(t.real_account_signup_ended_listener)}))}catch(e){(0,j.isProduction)()||console.error(e)}})),this.real_account_signup_ended_listener=e}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(e){if(this.root_store.client.loginid!==e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];r.forEach((function(e){return e()})),this.partial_fetch_time=!1}}}],r&&I(t.prototype,r),o&&I(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),m.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")}),w=L((v=P).prototype,"validation_errors",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),O=L(v.prototype,"validation_rules",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),S=L(v.prototype,"partial_fetch_time",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L(v.prototype,"retrieveFromStorage",[k.action],Object.getOwnPropertyDescriptor(v.prototype,"retrieveFromStorage"),v.prototype),L(v.prototype,"setValidationErrorMessages",[k.action],Object.getOwnPropertyDescriptor(v.prototype,"setValidationErrorMessages"),v.prototype),L(v.prototype,"setValidationRules",[k.action],Object.getOwnPropertyDescriptor(v.prototype,"setValidationRules"),v.prototype),L(v.prototype,"addRule",[k.action],Object.getOwnPropertyDescriptor(v.prototype,"addRule"),v.prototype),L(v.prototype,"validateProperty",[k.action],Object.getOwnPropertyDescriptor(v.prototype,"validateProperty"),v.prototype),L(v.prototype,"validateAllProperties",[k.action],Object.getOwnPropertyDescriptor(v.prototype,"validateAllProperties"),v.prototype),L(v.prototype,"onSwitchAccount",[o],Object.getOwnPropertyDescriptor(v.prototype,"onSwitchAccount"),v.prototype),L(v.prototype,"onPreSwitchAccount",[n],Object.getOwnPropertyDescriptor(v.prototype,"onPreSwitchAccount"),v.prototype),L(v.prototype,"onLogout",[i],Object.getOwnPropertyDescriptor(v.prototype,"onLogout"),v.prototype),L(v.prototype,"onClientInit",[s],Object.getOwnPropertyDescriptor(v.prototype,"onClientInit"),v.prototype),L(v.prototype,"onNetworkStatusChange",[c],Object.getOwnPropertyDescriptor(v.prototype,"onNetworkStatusChange"),v.prototype),L(v.prototype,"onThemeChange",[a],Object.getOwnPropertyDescriptor(v.prototype,"onThemeChange"),v.prototype),L(v.prototype,"onRealAccountSignupEnd",[u],Object.getOwnPropertyDescriptor(v.prototype,"onRealAccountSignupEnd"),v.prototype),L(v.prototype,"disposePreSwitchAccount",[l],Object.getOwnPropertyDescriptor(v.prototype,"disposePreSwitchAccount"),v.prototype),L(v.prototype,"disposeSwitchAccount",[p],Object.getOwnPropertyDescriptor(v.prototype,"disposeSwitchAccount"),v.prototype),L(v.prototype,"disposeLogout",[h],Object.getOwnPropertyDescriptor(v.prototype,"disposeLogout"),v.prototype),L(v.prototype,"disposeClientInit",[f],Object.getOwnPropertyDescriptor(v.prototype,"disposeClientInit"),v.prototype),L(v.prototype,"disposeNetworkStatusChange",[y],Object.getOwnPropertyDescriptor(v.prototype,"disposeNetworkStatusChange"),v.prototype),L(v.prototype,"disposeThemeChange",[d],Object.getOwnPropertyDescriptor(v.prototype,"disposeThemeChange"),v.prototype),L(v.prototype,"disposeRealAccountSignupEnd",[b],Object.getOwnPropertyDescriptor(v.prototype,"disposeRealAccountSignupEnd"),v.prototype),L(v.prototype,"onUnmount",[_],Object.getOwnPropertyDescriptor(v.prototype,"onUnmount"),v.prototype),L(v.prototype,"assertHasValidCache",[g],Object.getOwnPropertyDescriptor(v.prototype,"assertHasValidCache"),v.prototype),v)}}]);